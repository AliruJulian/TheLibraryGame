webpackJsonp([0],[function(e,t,n){"use strict";var i=n(1),s=n(3),a=n(23);s.enableProdMode(),i.platformBrowserDynamic().bootstrapModule(a.AppModule)},,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(21),r=n(24),d=n(28),l=n(29),c=n(59),p=n(60),u=n(67),g=n(68),h=n(69),f=n(70),v=n(71),m=n(72),_=n(73),y=n(74),b=n(75),w=n(76),k=n(77),x=n(78),T=n(79),S=n(80),C=n(81),A=n(82),O=n(83),E=n(84),j=n(85),D=n(86),I=n(87),q=n(61),L=[{path:"",redirectTo:"/l/tasks",pathMatch:"full"},{path:"u/:component",component:E.UnloggedcontentComponent},{path:"u/:component/:id",component:E.UnloggedcontentComponent},{path:"l/home",redirectTo:"/l/tasks",pathMatch:"full"},{path:"l/:component",component:k.LoggedcontentComponent},{path:"l/:component/:id",component:k.LoggedcontentComponent},{path:"l/:component/:id/:additionalinformation",component:k.LoggedcontentComponent}],U=function(){function e(){}return e=i([a.NgModule({imports:[o.BrowserModule,r.FormsModule,d.HttpModule,l.RouterModule.forRoot(L,{useHash:!1})],declarations:[c.AppComponent,p.HTMLEditorComponent,u.SelectQuestComponent,g.SelectTaskComponent,h.UploadPictureComponent,f.AdministrationComponent,v.BadgeComponent,m.EditBadgeComponent,_.EditQuestComponent,y.EditTaskComponent,w.HighscorelistComponent,b.LegalComponent,k.LoggedcontentComponent,x.QuestComponent,T.SolvedOverlayComponent,S.StatisticsComponent,C.TaskComponent,A.TasksComponent,O.TasksearchComponent,E.UnloggedcontentComponent,j.UserprogressComponent,D.UsersettingsComponent,I.SafeHtmlPipe],providers:[q.LibgameService],bootstrap:[c.AppComponent]}),s("design:paramtypes",[])],e)}();t.AppModule=U},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=function(){function e(e){this.router=e}return e=i([a.Component({selector:"lib-app",template:"\n\n    <!-- Router -->\n    <router-outlet></router-outlet>\n\n  "}),s("design:paramtypes",[o.Router])],e)}();t.AppComponent=r},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(61),r=function(){function e(e){this.lService=e,this.htmlcontent=new a.EventEmitter,this.reload=new a.EventEmitter,this.id="",this.hasFocus=!1,this.showInsertPicture=!1,this.showInsertLink=!1,this.tempPictureLink="",this.tempPictureWidth="",this.tempPictureHeight="",this.tempPictureId=-1,this.id=this.makeid()}return e.prototype.ngOnInit=function(){var e=this;document.addEventListener("mousedown",function(){e.hasFocus=!1},!1),this.setInnerHTMLOfDiv(this.value)},e.prototype.setInnerHTMLOfDiv=function(e){var t=this;return"undefined"==typeof document.getElementById(this.id)||null==document.getElementById(this.id)||"undefined"==typeof this.value?void setTimeout(function(){t.setInnerHTMLOfDiv(e)},10):void(this.value.length!=document.getElementById(this.id).innerHTML.length&&(document.getElementById(this.id).innerHTML=e))},e.prototype.ngOnChanges=function(e){"undefined"!=typeof e.value&&this.setInnerHTMLOfDiv(e.value.currentValue)},e.prototype.updateValue=function(){this.htmlcontent.emit($("#"+this.id).html().trim())},e.prototype.getPictures=function(){return"undefined"!=typeof this.pictures?this.pictures:[]},e.prototype.focusFunction=function(){this.hasFocus=!0},e.prototype.makeUnderline=function(e){var t=this;return document.execCommand("underline"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10),!1},e.prototype.makeBold=function(e){var t=this;document.execCommand("bold"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10)},e.prototype.makeItalic=function(e){var t=this;document.execCommand("italic"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10)},e.prototype.makeLineThrough=function(e){var t=this;document.execCommand("strikethrough"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10)},e.prototype.makeAlignLeft=function(e){var t=this;document.execCommand("justifyLeft"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10)},e.prototype.makeAlignRight=function(e){var t=this;document.execCommand("justifyRight"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10)},e.prototype.makeAlignCenter=function(e){var t=this;document.execCommand("justifyCenter"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10)},e.prototype.makeInsertPicture=function(e){var t=this;this.showInsertPicture=!0,this.pictureInsertID=this.makeid(),document.execCommand("insertHTML",!1,"<img id='"+this.pictureInsertID+"' src='' />"),e.preventDefault(),e.stopPropagation(),this.hasFocus=!0,setTimeout(function(){$("#"+t.id).focus()},10)},e.prototype.finalizeInsertPicture=function(){this.showInsertPicture=!1,0!=this.tempPictureLink.length?($("#"+this.id).find("#"+this.pictureInsertID).attr("src",this.tempPictureLink),$("#"+this.id).find("#"+this.pictureInsertID).css("width",this.tempPictureWidth+"px"),$("#"+this.id).find("#"+this.pictureInsertID).css("height",this.tempPictureHeight+"px")):this.tempPictureId!=-1&&($("#"+this.id).find("#"+this.pictureInsertID).attr("src",this.lService.getPictureLink(this.tempPictureId)),$("#"+this.id).find("#"+this.pictureInsertID).css("width",this.tempPictureWidth+"px"),$("#"+this.id).find("#"+this.pictureInsertID).css("height",this.tempPictureHeight+"px")),this.tempPictureLink="",this.tempPictureId=-1,this.tempPictureWidth="",this.tempPictureHeight=""},e.prototype.abortInsertPicture=function(){this.showInsertPicture=!1,$("#"+this.id).find("#"+this.pictureInsertID).remove()},e.prototype.makeid=function(){for(var e="",t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz",n=0;n<5;n++)e+=t.charAt(Math.floor(Math.random()*t.length));return e},i([a.Input(),s("design:type",Object)],e.prototype,"value",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"pictures",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"htmlcontent",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"reload",void 0),e=i([a.Component({selector:"htmleditor-component",providers:[o.LibgameService],template:'\n\n\n    <div class="editor" [class.editor-hasfocus]="hasFocus" (click)="$event.stopPropagation();" (mousedown)="$event.stopPropagation();" (focusout)="updateValue()" (mouseleave)="updateValue();hasFocus = false;">\n      <div *ngIf="hasFocus" class="editor-head" style="width:100%;">\n        <button (click)="makeUnderline($event);" class="button-editor" style="text-decoration:underline;width:35px;">U</button>\n        <button (click)="makeBold($event);" class="button-editor" style="width:35px;">B</button>\n        <button (click)="makeItalic($event);" class="button-editor" style="width:35px;">I</button>\n        <button (click)="makeLineThrough($event);" class="button-editor" style="text-decoration:line-through;width:35px;">S</button>\n\n        <button (click)="makeAlignLeft($event);" class="button-editor" style="width:35px;margin-left:10px;"><i class="fa fa-align-left" style="margin: 0;"></i></button>\n        <button (click)="makeAlignCenter($event);" class="button-editor" style="width:35px;"><i class="fa fa-align-center" style="margin: 0;"></i></button>\n        <button (click)="makeAlignRight($event);" class="button-editor" style="width:35px;"><i class="fa fa-align-right" style="margin: 0;"></i></button>\n\n        <button (click)="makeInsertPicture($event);" class="button-editor" style="width:35px;margin-left:10px;"><i class="fa fa-file-image-o" style="margin: 0;"></i></button>\n\n\n      </div>\n      <div contenteditable="true" [id]="id" (focus)="focusFunction()" class="editor-body" style="width:100%;height:auto;min-height:200px;">\n\n      </div>\n    </div>\n\n    <div *ngIf="showInsertPicture" (click)="$event.stopPropagation();" style="position:fixed;left:0%;top:0%;background:rgba(0,0,0,0.4);width:100%;height:100%;z-index:1000000;margin:0;">\n      <div style="position:relative;margin-left:auto;margin-right:auto;top:5%;background:white;border:solid 1px gray;color:black;width:90%;max-width:400px;height:auto;padding:10px;">\n        <p style="width:100%;text-align:center;">Gib entweder einen Link ein oder w√§hle ein Bild aus der Datenbank aus</p>\n        <hr class="hrForAdministration">\n\n        <label [hidden]="tempPictureId != -1" style="width:100%;text-align:center;">Link</label>\n        <br [hidden]="tempPictureId != -1">\n        <input [hidden]="tempPictureId != -1" [(ngModel)]="tempPictureLink" type="text" placeholder="Link" style="width:100%;"/>\n        <br [hidden]="tempPictureId != -1">\n\n        <hr [hidden]="tempPictureLink.length != 0 || tempPictureId != -1" class="hrForAdministration">\n\n        <label [hidden]="tempPictureLink.length != 0" style="width:100%;text-align:center;">Bild aus der Datenbank</label>\n        <br [hidden]="tempPictureLink.length != 0">\n        <select [hidden]="tempPictureLink.length != 0" [(ngModel)]="tempPictureId"  style="width:100%;">\n          <option value=\'-1\' selected="selected">-- None --</option>\n          <option *ngFor="let t_picture of getPictures();" value=\'{{t_picture.picture_id}}\'>-- {{t_picture.picturename}} --</option>\n        </select>\n        <div [hidden]="tempPictureLink.length != 0" style="text-align:right;">\n          <uploadpicture-component (reload)="reload.emit(true);"></uploadpicture-component>\n        </div>\n\n        <hr [hidden]="tempPictureLink.length == 0 && tempPictureId == -1" class="hrForAdministration">\n\n        <div *ngIf="tempPictureLink.length != 0 || tempPictureId != -1">\n          <label  style="width:100%;text-align:center;">Breite [in Pixeln]<span style="color:#e9266d">*</span></label>\n          <br>\n          <input [(ngModel)]="tempPictureWidth" type="text" placeholder="Breite [in Pixeln]" style="width:100%;"/>\n          <br/>\n          <label  style="width:100%;text-align:center;">H√∂he [in Pixeln]<span style="color:#e9266d">*</span></label>\n          <br>\n          <input [(ngModel)]="tempPictureHeight" type="text" placeholder="H√∂he [in Pixeln]" style="width:100%;"/>\n        </div>\n\n        <button (click)="abortInsertPicture();" class="button" style="width: calc(35% - 10px);margin-top: 10px;">Abbrechen</button>\n        <button (click)="finalizeInsertPicture();" [hidden]="(tempPictureLink.length == 0 && tempPictureId == -1) || tempPictureWidth.length==0 || tempPictureHeight.length==0" class="button" style="width:60%;margin-left:5%;">Bild jetzt hinzuf√ºgen!</button>\n      </div>\n    </div>\n\n\n  '}),s("design:paramtypes",[o.LibgameService])],e)}();t.HTMLEditorComponent=r},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(28),o=n(3),r=n(5);n(62),n(66);var d=function(){function e(e){var t=this;this._http=e,this.user={},this.linkToWebservice="./webservice/webservice.php",this.user$=new r.Observable(function(e){return t._userObserver=e}).share(),this.universalcontent$=new r.Observable(function(e){return t._universalcontentObserver=e}).share(),this.specificcontent$=new r.Observable(function(e){return t._specificcontentObserver=e}).share(),this._dataStore={user_id:-1,user:{},universalcontent:{},specificcontent:{}}}return e.prototype.ngOnInit=function(){},e.prototype.loadUser=function(){var e=this,t="t=get&dt=user",n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});this._dataStore.user_id!=-1&&this._userObserver.next(this._dataStore.user),this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()}).subscribe(function(t){console.log(t),e._dataStore.user={},$.isEmptyObject(t.data)?e._dataStore.user_id=-1:(e._dataStore.user=t.data,e._dataStore.user_id=t.data.user_id),e._userObserver.next(e._dataStore.user)},function(e){console.error("Could not load user.")})},e.prototype.loginUser=function(e,t){var n="t=login&username="+e+"&pwd="+t,i=new a.Headers;i.append("Content-Type","application/x-www-form-urlencoded");var s=new a.RequestOptions({headers:i});return this._http.post(this.linkToWebservice,n,s).map(function(e){return e.json()})},e.prototype.loginAsAnonym=function(){var e="t=loginanonym",t=new a.Headers;t.append("Content-Type","application/x-www-form-urlencoded");var n=new a.RequestOptions({headers:t});return this._http.post(this.linkToWebservice,e,n).map(function(e){return e.json()})},e.prototype.logoutUser=function(){var e="t=logout",t=new a.Headers;t.append("Content-Type","application/x-www-form-urlencoded");var n=new a.RequestOptions({headers:t});return this._http.post(this.linkToWebservice,e,n).map(function(e){return e.json()})},e.prototype.deleteUser=function(){var e="t=set&dt=deleteuser",t=new a.Headers;t.append("Content-Type","application/x-www-form-urlencoded");var n=new a.RequestOptions({headers:t});return this._http.post(this.linkToWebservice,e,n).map(function(e){return e.json()})},e.prototype.updatePassword=function(e,t){var n="t=set&dt=password&new_password="+t+"&old_password="+e,i=new a.Headers;i.append("Content-Type","application/x-www-form-urlencoded");var s=new a.RequestOptions({headers:i});return this._http.post(this.linkToWebservice,n,s).map(function(e){return e.json()})},e.prototype.checkUsername=function(e){var t="t=get&dt=checkusername&username="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.checkEmail=function(e){var t="t=get&dt=checkemail&email="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.registerUser=function(e,t,n,i,s){var o="t=set&dt=new_user&username="+e+"&email="+t+"&password="+n+"&password_repeat="+i+"&faculty_id="+s,r=new a.Headers;r.append("Content-Type","application/x-www-form-urlencoded");var d=new a.RequestOptions({headers:r});return this._http.post(this.linkToWebservice,o,d).map(function(e){return e.json()})},e.prototype.sendNewPassword=function(e){var t="t=fp&email="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.setNewAdmin=function(e){var t="t=set&dt=addadmin&user_id="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.removeAdmin=function(e){var t="t=set&dt=removeadmin&user_id="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.sendEmailMessageToAllUsers=function(e){var t="t=set&dt=sendemail&headline="+e.headline+"&content="+e.content,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.loadUniversalContent=function(){var e=this,t="t=get&dt=content",n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});0==$.isEmptyObject(this._dataStore.universalcontent)&&this._universalcontentObserver.next(this._dataStore.universalcontent),this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()}).subscribe(function(t){console.log(t),e._dataStore.universalcontent={},$.isEmptyObject(t.data)||(e._dataStore.universalcontent=t.data),e._universalcontentObserver.next(e._dataStore.universalcontent)},function(e){console.error("Could not load universalcontent.")})},e.prototype.upsertGeneralContent=function(e){var t="t=set&dt=generalcontent&generalcontent="+encodeURIComponent(JSON.stringify(e)),n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.loadSpecificContent=function(e){var t=this,n="t=get&dt="+e,i=new a.Headers;i.append("Content-Type","application/x-www-form-urlencoded");var s=new a.RequestOptions({headers:i});this._http.post(this.linkToWebservice,n,s).map(function(e){return e.json()}).subscribe(function(e){console.log(e),t._dataStore.specificcontent={},$.isEmptyObject(e.data)||(t._dataStore.specificcontent=e.data),t._specificcontentObserver.next(t._dataStore.specificcontent)},function(e){console.error("Could not load specificcontent.")})},e.prototype.checkLocation=function(e,t,n){var i="t=get&dt=checklocation&lati="+e+"&long="+t+"&location_id="+n,s=new a.Headers;s.append("Content-Type","application/x-www-form-urlencoded");var o=new a.RequestOptions({headers:s});return this._http.post(this.linkToWebservice,i,o).map(function(e){return e.json()})},e.prototype.upsertTask=function(e){var t="t=set&dt=task&taskdata="+encodeURIComponent(JSON.stringify(e)),n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.deleteTask=function(e){var t="t=set&dt=deletetask&task_id="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.solveTask=function(e,t){var n="t=set&dt=solvetask&task_id="+t+"&solvedata="+encodeURIComponent(e),i=new a.Headers;i.append("Content-Type","application/x-www-form-urlencoded");var s=new a.RequestOptions({headers:i});return this._http.post(this.linkToWebservice,n,s).map(function(e){return e.json()})},e.prototype.getSolveLinkForLocationTask=function(e,t){return"./l/task/"+e+"/"+t},e.prototype.upsertBadge=function(e){var t="t=set&dt=badge&badgedata="+encodeURIComponent(JSON.stringify(e)),n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.deleteBadge=function(e){var t="t=set&dt=deletebadge&badge_id="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.upsertQuest=function(e){var t="t=set&dt=quest&questdata="+encodeURIComponent(JSON.stringify(e)),n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.deleteQuest=function(e){var t="t=set&dt=deletequest&quest_id="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.upsertLocation=function(e){var t="t=set&dt=location&locationdata="+encodeURIComponent(JSON.stringify(e)),n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.deleteLocation=function(e){var t="t=set&dt=deletelocation&location_id="+e,n=new a.Headers;n.append("Content-Type","application/x-www-form-urlencoded");var i=new a.RequestOptions({headers:n});return this._http.post(this.linkToWebservice,t,i).map(function(e){return e.json()})},e.prototype.getLocationFoundLink=function(e){return"http://aliru.de"},e.prototype.resetFacultyScore=function(){var e="t=set&dt=resetfacultyscore",t=new a.Headers;t.append("Content-Type","application/x-www-form-urlencoded");var n=new a.RequestOptions({headers:t});return this._http.post(this.linkToWebservice,e,n).map(function(e){return e.json()})},e.prototype.uploadPicture=function(e,t){var n=this.linkToWebservice,i={t:"set",dt:"uploadpicture",picturename:e.picturename};return new Promise(function(e,s){var a=new FormData,o=new XMLHttpRequest;if("undefined"!=typeof t&&null!=t)for(var r=0;r<t.length;r++)a.append("pictureupload",t[r],t[r].name);for(var d in i)"undefined"!=typeof i[d]&&"object"!=typeof i[d]&&a.append(d,i[d]);o.onreadystatechange=function(){4==o.readyState&&(200==o.status?e(JSON.parse(o.response)):s(o.response))},o.open("POST",n,!0),o.send(a)})},e.prototype.getFormatedDate=function(e){if("undefined"==typeof e||null==e||"string"!=typeof e||0==e.length)return"";e=e.replace("-","/").replace("-","/");var t=new Date(e.split(" ")[0]),n=t.getDate()<=9?"0"+t.getDate():t.getDate(),i=t.getMonth()+1<=9?"0"+(t.getMonth()+1):t.getMonth()+1;return n+"."+i+"."+t.getFullYear()},e.prototype.getPictureLink=function(e){return this.linkToWebservice+"?t=get&dt=picture&picture_id="+e},e.prototype.getLabelsAndDataForChart=function(e,t,n,i,s){var a={};a.labels={},a.ts={},a.data={};var o=JSON.parse(e),r=new Date,d=new Date(r);d.setDate(d.getDate()-t);var l=r.getMonth()-d.getMonth(),c=new Date(d);c.setMonth(c.getMonth()-n);for(var p=r.getFullYear()-c.getFullYear(),u=i+p;u>0+p;u--)a.labels[Object.keys(a.labels).length]=""+new Date(r.getFullYear()-u,0,1,0,0,0).getFullYear(),a.ts[Object.keys(a.ts).length]=new Date(r.getFullYear()-u,0,1,0,0,0).getTime()/1e3;for(var u=n+l;u>0+l;u--)a.labels[Object.keys(a.labels).length]=""+(new Date(r.getFullYear(),r.getMonth()-u,1,0,0,0).getMonth()+1)+"."+new Date(r.getFullYear(),r.getMonth()-u,1,0,0,0).getFullYear(),a.ts[Object.keys(a.ts).length]=new Date(r.getFullYear(),r.getMonth()-u,1,0,0,0).getTime()/1e3;for(var u=t;u>0;u--)a.labels[Object.keys(a.labels).length]=""+new Date(r.getFullYear(),r.getMonth(),r.getDate()-u,0,0,0).getDate()+"."+(new Date(r.getFullYear(),r.getMonth(),r.getDate()-u,0,0,0).getMonth()+1)+"."+new Date(r.getFullYear(),r.getMonth(),r.getDate()-u,0,0,0).getFullYear(),a.ts[Object.keys(a.ts).length]=new Date(r.getFullYear(),r.getMonth(),r.getDate()-u+1,0,0,0).getTime()/1e3;if(a.labels[Object.keys(a.labels).length]="Heute",a.ts[Object.keys(a.ts).length]=new Date(r.getFullYear(),r.getMonth(),r.getDate()+1,0,0,0).getTime()/1e3,"sum"==s)for(var g in a.ts){var h=0;for(var f in o)o[f].ts<a.ts[g]&&(h+=o[f].data);a.data[g]=h}else if("normal_comb"==s)for(var g in a.ts){var h=0;for(var f in o)o[f].ts<a.ts[g]&&(h=h>parseInt(o[f].data)?h:parseInt(o[f].data));a.data[g]=0==h?"0"==g?0:a.data[parseInt(g)-1]:h}else if("normal"==s){var v=!0;for(var g in a.ts){var h=0;for(var f in o)1==v&&o[f].ts<a.ts[g]?h=h>parseInt(o[f].data)?h:parseInt(o[f].data):0==v&&o[f].ts>a.ts[parseInt(g)-1]&&o[f].ts<a.ts[g]&&(h=h>parseInt(o[f].data)?h:parseInt(o[f].data));a.data[g]=h,v=!1}}else if("diff"==s){var v=!0,m=0;for(var g in a.ts){var h=0;for(var f in o)1==v&&o[f].ts<a.ts[g]?h=h>parseInt(o[f].data)?h:parseInt(o[f].data):0==v&&o[f].ts>a.ts[parseInt(g)-1]&&o[f].ts<a.ts[g]&&(h=h>parseInt(o[f].data)?h:parseInt(o[f].data));a.data[g]=h-m>=0?h-m:0,m=h>m?h:m,v=!1}"undefined"!=typeof a.data[0]&&delete a.data[0],"undefined"!=typeof a.ts[0]&&delete a.ts[0],"undefined"!=typeof a.labels[0]&&delete a.labels[0]}else if("avg"==s)for(var g in a.ts){var h=0,_=0;for(var f in o)"0"==g&&o[f].ts<a.ts[g]?(h+=o[f].data,_++):a.ts[parseInt(g)-1]<o[f].ts&&o[f].ts<a.ts[g]&&(h+=o[f].data,_++);a.data[g]=isNaN(h/_)?0:h/_}else if("avg_comb"==s)for(var g in a.ts){var h=0,_=0;for(var f in o)"0"==g&&o[f].ts<a.ts[g]?(h+=o[f].data,_++):a.ts[parseInt(g)-1]<o[f].ts&&o[f].ts<a.ts[g]&&(h+=o[f].data,_++);a.data[g]=isNaN(h/_)?"0"==g?0:a.data[parseInt(g)-1]:h/_}return a},e=i([o.Injectable(),s("design:paramtypes",[a.Http])],e)}();t.LibgameService=d},,,,,,function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=function(){function e(){this.shown=!1,this.questarray=new a.EventEmitter}return e.prototype.ngOnInit=function(){this.initialselectedquestarray=this.selectedquestarray.slice(0)},e.prototype.toggleChosenQuest=function(e){this.selectedquestarray.indexOf(e)>-1?this.selectedquestarray.splice(this.selectedquestarray.indexOf(e),1):this.selectedquestarray.push(e)},e.prototype.finalizeSelection=function(){this.shown=!1,this.questarray.emit(this.selectedquestarray)},e.prototype.finalizeSelectionAbort=function(){this.shown=!1,this.questarray.emit(this.initialselectedquestarray)},e.prototype.getNameOfQuestFromQuestId=function(e){for(var t in this.chooseablequestarray)if(!this.isUndefined(this.chooseablequestarray[t].de_DE)&&!this.isUndefined(this.chooseablequestarray[t].de_DE.questname)&&!this.isUndefined(this.chooseablequestarray[t].quest_id)&&this.chooseablequestarray[t].quest_id+""==""+e)return this.chooseablequestarray[t].de_DE.questname;return""},e.prototype.isUndefined=function(e){return"undefined"==typeof e},i([a.Input(),s("design:type",Object)],e.prototype,"chooseablequestarray",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"selectedquestarray",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"questarray",void 0),e=i([a.Component({selector:"selectquest-component",template:'\n\n\n    <div *ngIf="shown" style="position:fixed;left:0%;top:0%;background:rgba(0,0,0,0.4);width:100%;height:100%;z-index:1000000;">\n      <div style="position:absolute;left:5%;top:5%;background:white;border:solid 1px gray;color:black;width:90%;height:90%;">\n        <p style="padding:10px;width:100%;text-align:center;">W√§hle durch Anklicken die Quests aus</p>\n\n        <div style="height:calc(90% - 80px);margin:10px;padding:10px;overflow-y:scroll;">\n          <div *ngFor="let t_quest of chooseablequestarray"\n              (click)="toggleChosenQuest(t_quest.quest_id);"\n              [style.background]="selectedquestarray.indexOf(t_quest.quest_id) > -1?\'rgb(230,230,230)\':\'rgb(255,255,255)\'"\n              style="border:1px solid black;margin:2px 10px;cursor:pointer;">\n            <p style="margin:0;padding:0.2em;font-size:1em;font-weight:bold;">\n              {{!isUndefined(t_quest.questname)? t_quest.questname : (!isUndefined(t_quest.de_DE) ? t_quest.de_DE.questname : \'\')}}\n            </p>\n          </div>\n        </div>\n\n        <button (click)="finalizeSelection();" class="button" style="width:60%;margin-left:5%;">Beende die Auswahl</button>\n        <button (click)="finalizeSelectionAbort();" class="button" style="width:25%;margin-left:5%;">Abbrechen</button>\n      </div>\n    </div>\n\n    <div>\n      <div *ngFor="let t_quest_id of selectedquestarray"\n          style="border:1px solid black;margin:2px 0px;background:rgb(230,230,230);">\n        <p style="margin:0;padding:0.2em;font-size:1em;font-weight:bold;">{{getNameOfQuestFromQuestId(t_quest_id)}}</p>\n      </div>\n    </div>\n\n    <button class="button" (click)="shown=true;" style="width:initial;">\n      Hinzuf√ºgen/Entfernen von Vorquests\n    </button>\n\n  '}),s("design:paramtypes",[])],e)}();t.SelectQuestComponent=o},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=function(){function e(){this.shown=!1,this.taskarray=new a.EventEmitter}return e.prototype.ngOnInit=function(){this.initialselectedtaskarray=this.selectedtaskarray.slice(0)},e.prototype.toggleChosenTask=function(e){this.selectedtaskarray.indexOf(e)>-1?this.selectedtaskarray.splice(this.selectedtaskarray.indexOf(e),1):this.selectedtaskarray.push(e)},e.prototype.finalizeSelection=function(){this.shown=!1,this.taskarray.emit(this.selectedtaskarray)},e.prototype.finalizeSelectionAbort=function(){this.shown=!1,this.taskarray.emit(this.initialselectedtaskarray)},e.prototype.getNameOfTaskFromTaskId=function(e){for(var t in this.chooseabletaskarray)if(!this.isUndefined(this.chooseabletaskarray[t].de_DE)&&!this.isUndefined(this.chooseabletaskarray[t].de_DE.taskname)&&!this.isUndefined(this.chooseabletaskarray[t].task_id)&&this.chooseabletaskarray[t].task_id+""==""+e)return this.chooseabletaskarray[t].de_DE.taskname;return""},e.prototype.isUndefined=function(e){return"undefined"==typeof e},i([a.Input(),s("design:type",Object)],e.prototype,"chooseabletaskarray",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"selectedtaskarray",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"taskarray",void 0),e=i([a.Component({selector:"selecttask-component",template:'\n\n\n  <div *ngIf="shown" style="position:fixed;left:0%;top:0%;background:rgba(0,0,0,0.4);width:100%;height:100%;z-index:1000000;">\n    <div style="position:absolute;left:5%;top:5%;background:white;border:solid 1px gray;color:black;width:90%;height:90%;">\n      <p style="padding:10px;width:100%;text-align:center;">W√§hle durch Anklicken die Aufgaben aus</p>\n\n      <div style="height:calc(90% - 80px);margin:10px;padding:10px;overflow-y:scroll;">\n        <div *ngFor="let t_task of chooseabletaskarray"\n            (click)="toggleChosenTask(t_task.task_id);"\n            [style.background]="selectedtaskarray.indexOf(t_task.task_id) > -1?\'rgb(230,230,230)\':\'rgb(255,255,255)\'"\n            style="border:1px solid black;margin:2px 10px;cursor:pointer;">\n          <p style="margin:0;padding:0.2em;font-size:1em;font-weight:bold;">{{!isUndefined(t_task.taskname)? t_task.taskname : (!isUndefined(t_task.de_DE) ? t_task.de_DE.taskname : \'\')}}</p>\n        </div>\n      </div>\n\n      <button (click)="finalizeSelection();" class="button" style="width:60%;margin-left:5%;">Beende die Auswahl</button>\n      <button (click)="finalizeSelectionAbort();" class="button" style="width:25%;margin-left:5%;">Abbrechen</button>\n    </div>\n  </div>\n\n  <div>\n    <div *ngFor="let t_task_id of selectedtaskarray"\n        style="border:1px solid black;margin:2px 0px;background:rgb(230,230,230);">\n      <p style="margin:0;padding:0.2em;font-size:1em;font-weight:bold;">{{getNameOfTaskFromTaskId(t_task_id)}}</p>\n    </div>\n  </div>\n\n  <button class="button" (click)="shown=true;" style="width:initial;">\n    Hinzuf√ºgen/Entfernen von Aufgaben\n  </button>\n\n\n  '
}),s("design:paramtypes",[])],e)}();t.SelectTaskComponent=o},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(61),r=function(){function e(e){this.lService=e,this.reload=new a.EventEmitter,this.picturename="",this.shown=!1,this.successfullupload=!1}return e.prototype.ngOnInit=function(){this.picturename=""},e.prototype.requestPictureFileChangeEvent=function(e){this.pictureFiles=e.target.files},e.prototype.uploadPicture=function(){var e=this;return 0==this.picturename.length?void window.alert("Bitte w√§hle zuerst einen Bildnamen!"):0==this.pictureFiles.length?void window.alert("Bitte w√§hle zuerst eine Bilddatei aus!"):void this.lService.uploadPicture({picturename:this.picturename},this.pictureFiles).then(function(t){console.log(t),"undefined"!=typeof t.result&&1==t.result?(e.picturename="",e.pictureFiles=[],e.successfullupload=!0,setTimeout(function(){e.shown=!1,e.successfullupload=!1},2e3),e.reload.emit(!0)):window.alert("Es gab einen Fehler bei deiner Anfrage. Bitte lass die Seite neuladen!")},function(){window.alert("Es gab einen Fehler bei deiner Anfrage. Bitte lass die Seite neuladen!")})},e.prototype.abortUploadPicture=function(){this.shown=!1},i([a.Output(),s("design:type",Object)],e.prototype,"reload",void 0),e=i([a.Component({selector:"uploadpicture-component",providers:[o.LibgameService],template:'\n\n\n  <div *ngIf="shown" style="position:fixed;left:0%;top:0%;background:rgba(0,0,0,0.4);width:100%;height:100%;z-index:10000000;">\n    <div style="position:relative;margin-left:auto;margin-right:auto;top:5%;background:white;border:solid 1px gray;color:black;width:90%;max-width:500px;height:auto;padding:10px;text-align:center;">\n      <p style="padding:10px;width:100%;text-align:center;">W√§hle ein Bild und einen Bildnamen</p>\n      <hr class="hrForAdministration">\n\n      <input type="file" accept="image/*"\n                     (change)="requestPictureFileChangeEvent($event);" name="pictureupload" style="width: 95%;padding: 10px;">\n\n       <input [(ngModel)]="picturename" type="text" placeholder="Bildname" style="width: 95%;">\n\n      <button (click)="abortUploadPicture();" class="button" style="width: calc(35% - 10px);margin-top: 30px;">Abbrechen</button>\n      <button (click)="uploadPicture();" class="button" style="width:60%;margin-left:5%;">Bild jetzt hinzuf√ºgen!</button>\n      <div style="width:100%;text-align:center;">\n        <div *ngIf="successfullupload" style="padding: 5px;">Bild erfolgreich hinzugef√ºgt!</div>\n      </div>\n\n    </div>\n  </div>\n\n  <button class="button" (click)="shown=true;" style="width:initial;">\n    Bild zur Datenbank hinzuf√ºgen\n  </button>\n\n\n  '}),s("design:paramtypes",[o.LibgameService])],e)}();t.UploadPictureComponent=r},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.reload=new a.EventEmitter,this.specificcontent={},this.loading_specificcontent=!0,this.user_activity_task_active="10d",this.upsertNewTaskSuccessful=!1,this.upsertNewBadgeSuccessful=!1,this.upsertNewQuestSuccessful=!1,this.upsertNewLocationSuccessful=!1,this.upsertGeneralContentSuccessful=!1,this.addedNewAdminSuccessful=!1,this.sendEmailToAllUsersSuccessful=!1,this.loading_sendemails=!1,this.show_c_solved_tasks_chart=!1,this.show_cm_general=!1,this.show_cm_tasks=!1,this.show_cm_badges=!1,this.show_cm_quests=!1,this.show_cm_locations=!1,this.show_cm_reset_score=!1,this.show_um_add_admins=!1,this.show_um_send_mail=!1,this.addAdminId=-1,this.send_email={headline:"",content:""},this.new_task={},this.new_task_template={task_id:-1,task_type_id:1,json_task_data:{de_DE:{question:"",a1:"",a2:"",a3:"",a4:""}},de_DE:{taskname:"",description_long:"",solved_description:""},is_task_active:"1",score_rule:"10",location_id:-1},this.new_badge={},this.new_badge_template={de_DE:{badgename:"",description_long:"",solved_description:""},badge_id:-1,is_active:"1",json_task_ids:[],picture_id:-1},this.new_quest={},this.new_quest_template={quest_id:-1,de_DE:{questname:"",solved_description:""},is_active:"1",json_pre_quest_ids:[],json_quest_task_ids:[[]],location_id:-1,is_starter_quest:"0",score_rule:"10"},this.new_location={},this.new_location_template={location_id:-1,de_DE:{locationname:"",description_long:""},geo_lati:"",geo_long:"",geo_radius:""}}return e.prototype.ngOnInit=function(){var e=this;this.user_activity_task_active="10d",this.new_task=this.new_task_template,this.new_quest=this.new_quest_template,this.new_badge=this.new_badge_template,this.new_location=this.new_location_template,this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){if(console.log("Specific Content"),console.log(t),"undefined"!=typeof t._Tasks)for(var n in t._Tasks)t._Tasks[n].showhelper_information_open=!1,t._Tasks[n].showhelper_edit_open=!1,t._Tasks[n].upsert_successful=!1,"undefined"!=typeof t._Tasks[n].json_task_data&&(t._Tasks[n].json_task_data=JSON.parse(t._Tasks[n].json_task_data)),"undefined"!=typeof t._Tasks[n].pre_tasks&&(t._Tasks[n].pre_tasks=JSON.parse(t._Tasks[n].pre_tasks));if("undefined"!=typeof t._Quests)for(var i in t._Quests)t._Quests[i].showhelper_edit_open=!1,t._Quests[i].upsert_successful=!1,"undefined"!=typeof t._Quests[i].json_pre_quest_ids&&(t._Quests[i].json_pre_quest_ids=JSON.parse(t._Quests[i].json_pre_quest_ids)),"undefined"!=typeof t._Quests[i].json_quest_task_ids&&(t._Quests[i].json_quest_task_ids=JSON.parse(t._Quests[i].json_quest_task_ids));if("undefined"!=typeof t._Badges)for(var s in t._Badges)t._Badges[s].showhelper_edit_open=!1,t._Badges[s].upsert_successful=!1,"undefined"!=typeof t._Badges[s].json_task_ids&&(t._Badges[s].json_task_ids=JSON.parse(t._Badges[s].json_task_ids));if("undefined"!=typeof t._Locations)for(var a in t._Locations)t._Locations[a].showhelper_information_open=!1;e.specificcontent=t,e.updateChartUserActivityTask(10,0,0,!0),e.loading_specificcontent=!1}),this.lService.loadSpecificContent("administrationcontent")},e.prototype.getAdmins=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Admins?[]:this.specificcontent._Admins},e.prototype.getAllUsers=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._All_Users?[]:this.specificcontent._All_Users},e.prototype.getSuperadmins=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Superadmins?[]:this.specificcontent._Superadmins},e.prototype.getTasks=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Tasks?[]:this.specificcontent._Tasks},e.prototype.getQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Quests?[]:this.specificcontent._Quests},e.prototype.getBadges=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Badges?[]:this.specificcontent._Badges},e.prototype.getLocations=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Locations?[]:this.specificcontent._Locations},e.prototype.getTaskTypes=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Task_Types?[]:this.specificcontent._Task_Types},e.prototype.getCountActiveQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Active_Quests?0:this.specificcontent.Count_Active_Quests},e.prototype.getCountActiveTasks=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Active_Tasks?0:this.specificcontent.Count_Active_Tasks},e.prototype.getCountActiveBadges=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Active_Badges?0:this.specificcontent.Count_Active_Badges},e.prototype.getCountUsers=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Users?0:this.specificcontent.Count_Users},e.prototype.getCountUsersActiveLast2Days=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Users_Active_Last_2_Days?0:this.specificcontent.Count_Users_Active_Last_2_Days},e.prototype.getCountUsersCompletedAllQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Users_Completed_All_Quests?0:this.specificcontent.Count_Users_Completed_All_Quests},e.prototype.getCountUsersCompletedAllBadges=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Users_Completed_All_Badges?0:this.specificcontent.Count_Users_Completed_All_Badges},e.prototype.getStatistics=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent._Statistics?{}:this.specificcontent._Statistics},e.prototype.getUniversalContentPictures=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Pictures?[]:this.universalcontent._Pictures},e.prototype.getUniversalContent=function(e){if($.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Content)return"";var t=this.universalcontent._Content.filter(function(t){return t.content_mapper.toLowerCase()==e.toLowerCase()});return t.length>0?t[0].text:""},e.prototype.setUniversalContent=function(e,t){if(!$.isEmptyObject(this.universalcontent)&&"undefined"!=typeof this.universalcontent._Content)for(var n in this.universalcontent._Content)this.universalcontent._Content[n].content_mapper.toLowerCase()==e.toLowerCase()&&(this.universalcontent._Content[n].text=t)},e.prototype.initChartWithDelay=function(){var e=this;setTimeout(function(){e.user_activity_task_active="10d",e.updateChartUserActivityTask(10,0,0,!1)},1e3)},e.prototype.updateChartUserActivityTask=function(e,t,n,i){var s=[],a="undefined"!=typeof this.getStatistics().Administration_Statistic_1?JSON.parse(this.getStatistics().Administration_Statistic_1.json_statistic):[];for(var o in a)s.push({data:a[o].data,ts:a[o].ts});var r=this.lService.getLabelsAndDataForChart(JSON.stringify(s),e,t,n,"diff"),d={labels:$.map(r.labels,function(e){return e}),datasets:[{strokeColor:"rgba(251,78,0,1)",pointColor:"rgba(251,78,0,1)",pointStrokeColor:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:$.map(r.data,function(e){return e})}]},l=0;for(var c in r.data)r.data[c]>l&&(l=r.data[c]);var p={animation:!1,responsive:!0,scaleFontColor:"#000",bezierCurve:!1,datasetFill:!1,scaleOverride:!0,scaleSteps:8,scaleStepWidth:Math.ceil(l/8)+1,scaleStartValue:0,scaleLineColor:"rgba(0,0,0,.6)",scaleGridLineColor:"rgba(0,0,0,.2)",graphTitleFontSize:18,graphTitleFontColor:"#000"};if("undefined"==typeof i||0==i){var u=document.getElementById("canvas_user_activity_task");updateChart(u.getContext("2d"),d,p,!1,!1)}else{$("#canvas_user_activity_task").attr("width",$("#canvas_user_activity_task").parent().width());var u=document.getElementById("canvas_user_activity_task");new Chart(u.getContext("2d")).Line(d,p)}},e.prototype.showCanvasForTask=function(e,t){$("#qrcode-task-img"+e).qrcode({width:100,height:100,background:"#fff",fill:"#000",text:this.lService.getSolveLinkForLocationTask(e,t)})},e.prototype.showCanvasForLocation=function(e){$("#qrcode-location-img"+e).qrcode({width:100,height:100,background:"#fff",fill:"#000",text:this.lService.getLocationFoundLink(e)})},e.prototype.upsertGeneralContent=function(){var e=this,t={HOME_1:this.getUniversalContent("HOME_1"),MAIN_PICTURE_ID:this.getUniversalContent("MAIN_PICTURE_ID"),ROOT_LOCATION:this.getUniversalContent("ROOT_LOCATION"),START:this.getUniversalContent("START"),TOU:this.getUniversalContent("TOU"),PP:this.getUniversalContent("PP"),IMPRESSUM:this.getUniversalContent("IMPRESSUM")};this.lService.upsertGeneralContent(t).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?(e.upsertGeneralContentSuccessful=!0,setTimeout(function(){e.upsertGeneralContentSuccessful=!1},8e3),e.lService.loadSpecificContent("administrationcontent")):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.upsertTask=function(e){var t=this;if(console.log(e),"undefined"==typeof e.de_DE.taskname||0==e.de_DE.taskname.length)return void window.alert("Bitte w√§hle einen geeigneten Aufgabennamen!");if("undefined"==typeof e.de_DE.description_long||0==e.de_DE.description_long.length)return void window.alert("Bitte w√§hle eine Aufgabenbeschreibung!");if("undefined"==typeof e.de_DE.solved_description||0==e.de_DE.solved_description.length)return void window.alert("Bitte gib eine Meldung f√ºr den User ein, welche er erh√§lt, wenn er die Aufgabe erfolgreich gel√∂st hat!");if("undefined"==typeof e.score_rule||0==e.score_rule.length||!this.isNumeric(e.score_rule))return void window.alert("Bitte w√§hle die Exp. f√ºr die Aufgabe bzw. √ºberpr√ºfe, ob es sich um eine Zahl handelt!");if("undefined"==typeof e.task_type_id||e.task_type_id==-1)return void window.alert("Bitte w√§hle vorher einen korrekten Aufgabentypen aus!");if("undefined"==typeof e.json_task_data)return void window.alert("Es ist ein schwerwiegender Fehler aufgetreten. Bitte lass die Seite neuladen und versuche es erneut!");if(1==e.task_type_id){if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.question||0==e.json_task_data.de_DE.question.length)return void window.alert("Bitte gib eine Frage ein!");if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.a1||0==e.json_task_data.de_DE.a1.length)return void window.alert("Bitte gib zu deiner Frage die richtige Antwort ein!");if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.a2||0==e.json_task_data.de_DE.a2.length)return void window.alert("Bitte √ºberpr√ºfe deine falschen Antworten!");if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.a3||0==e.json_task_data.de_DE.a3.length)return void window.alert("Bitte √ºberpr√ºfe deine falschen Antworten!");if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.a4||0==e.json_task_data.de_DE.a4.length)return void window.alert("Bitte √ºberpr√ºfe deine falschen Antworten!")}else if(2==e.task_type_id){if("undefined"==typeof e.json_task_data.loc||e.json_task_data.loc==-1)return void window.alert("Bitte √ºberpr√ºfe den aufgabenspezifischen Ort!")}else if(3==e.task_type_id){if("undefined"==typeof e.json_task_data.isbn||0==e.json_task_data.isbn.length)return void window.alert("Bitte √ºberpr√ºfe die ISBN zu deiner Aufgabe nochmals!")}else if(4==e.task_type_id){if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.s1||0==e.json_task_data.de_DE.s1.length)return void window.alert("Bitte √ºberpr√ºfe deine Eingabe zur 1.Quelle!");if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.s2||0==e.json_task_data.de_DE.s2.length)return void window.alert("Bitte √ºberpr√ºfe deine Eingabe zur 2.Quelle!");if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.s3||0==e.json_task_data.de_DE.s3.length)return void window.alert("Bitte √ºberpr√ºfe deine Eingabe zur 3.Quelle!")}else if(5==e.task_type_id){if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.text||0==e.json_task_data.de_DE.text.length)return void window.alert("Bitte √ºberpr√ºfe die Eingabe zum L√ºckentext!");if("undefined"==typeof e.json_task_data.de_DE||"undefined"==typeof e.json_task_data.de_DE.answer||0==e.json_task_data.de_DE.answer.length)return void window.alert("Bitte √ºberpr√ºfe die Eingabe zur Antwort bei deiner L√ºckentext-Aufgabe!")}else if(6!=e.task_type_id)return void window.alert("Bitte w√§hle vorher einen korrekten Aufgabentypen aus!");"undefined"!=typeof e.task_id&&e.task_id==-1?this.lService.upsertTask(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?(t.upsertNewTaskSuccessful=!0,setTimeout(function(){t.upsertNewTaskSuccessful=!1},8e3),t.new_task=t.new_task_template,t.lService.loadSpecificContent("administrationcontent")):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")}):"undefined"!=typeof e.task_id&&e.task_id!=-1&&this.lService.upsertTask(e).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?(e.upsert_successful=!0,setTimeout(function(){e.upsert_successful=!1},8e3)):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.upsertBadge=function(e){var t=this;return console.log(e),"undefined"==typeof e.de_DE.badgename||0==e.de_DE.badgename.length?void window.alert("Bitte w√§hle einen geeigneten Abzeichennamen!"):"undefined"==typeof e.de_DE.description_long||0==e.de_DE.description_long.length?void window.alert("Bitte w√§hle eine Abzeichenbeschreibung!"):"undefined"==typeof e.de_DE.solved_description||0==e.de_DE.solved_description.length?void window.alert("Bitte gib eine Meldung f√ºr den User ein, welche er erh√§lt, wenn er das Abzeichen erfolgreich gel√∂st hat!"):"undefined"==typeof e.json_task_ids||0==e.json_task_ids.length?void window.alert("Ein Abzeichen, f√ºr welches die L√∂sung keiner Aufgabe n√∂tig ist, ist nicht m√∂glich!"):"undefined"==typeof e.picture_id||e.picture_id==-1?void window.alert("Bitte w√§hle ein Bild f√ºr das Abzeichen aus!"):void("undefined"!=typeof e.badge_id&&e.badge_id==-1?this.lService.upsertBadge(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?(t.upsertNewBadgeSuccessful=!0,setTimeout(function(){t.upsertNewBadgeSuccessful=!1},8e3),t.new_badge=t.new_badge_template,t.lService.loadSpecificContent("administrationcontent")):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")}):"undefined"!=typeof e.badge_id&&e.badge_id!=-1&&this.lService.upsertBadge(e).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?(e.upsert_successful=!0,setTimeout(function(){e.upsert_successful=!1},8e3)):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")}))},e.prototype.upsertQuest=function(e){var t=this;if(console.log(e),"undefined"==typeof e.de_DE.questname||0==e.de_DE.questname.length)return void window.alert("Bitte w√§hle einen geeigneten Questnamen!");if("undefined"==typeof e.de_DE.solved_description||0==e.de_DE.solved_description.length)return void window.alert("Bitte gib eine Meldung f√ºr den User ein, welche er erh√§lt, wenn er den Quest erfolgreich gel√∂st hat!");if("undefined"==typeof e.score_rule||0==e.score_rule.length||!this.isNumeric(e.score_rule))return void window.alert("Bitte w√§hle die Exp. f√ºr den Quest bzw. √ºberpr√ºfe, ob es sich um eine Zahl handelt!");if("undefined"!=typeof e.location_id&&e.location_id==-1&&"undefined"!=typeof e.json_pre_quest_ids&&0==e.json_pre_quest_ids.length&&"undefined"!=typeof e.is_starter_quest&&"0"==e.is_starter_quest)return void window.alert("Vorsicht: Dieser Quest wird niemals gefunden bzw. spielbar sein, da er an keinem Ort gefunden wird, keine Vorquests hat und kein Starterquest (Quest, welche der User von Beginn an l√∂sen kann) ist. Bitte sorge daf√ºr, dass genau eins davon zutrifft!");if("undefined"!=typeof e.json_pre_quest_ids&&0!=e.json_pre_quest_ids.length&&"undefined"!=typeof e.is_starter_quest&&"1"==e.is_starter_quest)return void window.alert("Vorsicht: Dieser Quest enth√§lt einen logischen Fehler, da ein Quest mit Vorquests niemals ein Starterquest (Quest, welche der User von Beginn an l√∂sen kann) sein kann! Bedenke, dass ein Quest mit Vorquests automatisch dem User zugeteilt wird, wenn er alle Vorquests abgeschlossen hat!");if("undefined"!=typeof e.location_id&&e.location_id!=-1&&"undefined"!=typeof e.is_starter_quest&&"1"==e.is_starter_quest)return void window.alert("Vorsicht: Dieser Quest enth√§lt einen logischen Fehler, da ein Quest, welcher an einem Ort gefunden werden kann, niemals ein Starterquest (Quest, welche der User von Beginn an l√∂sen kann) sein kann! Bedenke, dass ein Quest, welcher gefunden wird, nicht schon zu Beginn dem User gestellt werden kann!");if("undefined"==typeof e.json_quest_task_ids||0==e.json_quest_task_ids.length)return void window.alert("Schwerwiegender interner Fehler. Bitte lass die Seite neuladen!");for(var n=0;n<e.json_quest_task_ids.length;n++)if(0==e.json_quest_task_ids[n].length)return void window.alert("Fehler bei den Aufgaben f√ºr Stufe "+(n+1)+": Keine Aufgaben ausgew√§hlt!");"undefined"!=typeof e.quest_id&&e.quest_id==-1?this.lService.upsertQuest(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?(t.upsertNewQuestSuccessful=!0,setTimeout(function(){t.upsertNewQuestSuccessful=!1},8e3),t.new_quest=t.new_quest_template,t.lService.loadSpecificContent("administrationcontent")):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")}):"undefined"!=typeof e.quest_id&&e.quest_id!=-1&&this.lService.upsertQuest(e).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?(e.upsert_successful=!0,setTimeout(function(){e.upsert_successful=!1},8e3)):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.upsertLocation=function(e){var t=this;return console.log(e),"undefined"==typeof e.de_DE.locationname||0==e.de_DE.locationname.length?void window.alert("Bitte w√§hle einen geeigneten Ortsnamen!"):"undefined"!=typeof e.geo_lati&&0!=e.geo_lati.length&&this.isNumeric(e.geo_lati)?"undefined"!=typeof e.geo_long&&0!=e.geo_long.length&&this.isNumeric(e.geo_long)?"undefined"!=typeof e.geo_radius&&0!=e.geo_radius.length&&this.isNumeric(e.geo_radius)?void("undefined"!=typeof e.location_id&&e.location_id==-1&&this.lService.upsertLocation(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?(t.upsertNewLocationSuccessful=!0,setTimeout(function(){t.upsertNewLocationSuccessful=!1},8e3),t.new_location=t.new_location_template,t.lService.loadSpecificContent("administrationcontent")):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})):void window.alert("Bitte gib einen korrekten Radius ein!"):void window.alert("Bitte gib einen korrekten L√§ngengrad ein!"):void window.alert("Bitte gib einen korrekten Breitengrad ein!")},e.prototype.resetFacultyScore=function(){1==confirm("Soll jetzt der Fakult√§tshighscore zur√ºckgesetzt werden?")&&this.lService.resetFacultyScore().subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?window.alert("Der Fakult√§tshighscore wurde erfolgreich zur√ºckgesetzt!"):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.deleteAdmin=function(e){},e.prototype.setNewAdmin=function(){var e=this;return"undefined"==typeof this.addAdminId||this.addAdminId==-1?void window.alert("Bitte w√§hle zuerst einen User aus!"):void this.lService.setNewAdmin(this.addAdminId).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?(e.addedNewAdminSuccessful=!0,setTimeout(function(){e.addedNewAdminSuccessful=!1},8e3),e.addAdminId=-1,e.lService.loadSpecificContent("administrationcontent")):window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.setTaskActiveInactive=function(e){console.log(e),e.is_task_active="1"==e.is_task_active?"0":"1",this.lService.upsertTask(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result||window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.setTaskDeleteTask=function(e){var t=this;1==confirm("Soll die Aufgabe jetzt gel√∂scht werden?")&&this.lService.deleteTask(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?t.lService.loadSpecificContent("administrationcontent"):window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.setBadgeActiveInactive=function(e){console.log(e),e.is_active="1"==e.is_active?"0":"1",this.lService.upsertBadge(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result||window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.setBadgeDeleteBadge=function(e){var t=this;1==confirm("Soll das Abzeichen jetzt gel√∂scht werden?")&&this.lService.deleteBadge(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?t.lService.loadSpecificContent("administrationcontent"):window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.setQuestActiveInactive=function(e){console.log(e),e.is_active="1"==e.is_active?"0":"1",this.lService.upsertQuest(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result||window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.setQuestDeleteQuest=function(e){var t=this;1==confirm("Soll der Quest jetzt gel√∂scht werden?")&&this.lService.deleteQuest(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?t.lService.loadSpecificContent("administrationcontent"):window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.setLocationDeleteLocation=function(e){var t=this;1==confirm("Soll der Ort jetzt gel√∂scht werden?")&&this.lService.deleteLocation(e).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?t.lService.loadSpecificContent("administrationcontent"):window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.sendEmailMessageToAllUsers=function(){var e=this;if(1!=this.loading_sendemails){if("undefined"==typeof this.send_email.headline||0==this.send_email.headline.length)return void window.alert("Bitte gib zuerst einen Betreff ein!");if("undefined"==typeof this.send_email.content||0==this.send_email.content.length)return void window.alert("Bitte gib zuerst eine Nachricht ein!");this.loading_sendemails=!0,this.lService.sendEmailMessageToAllUsers(this.send_email).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?(e.sendEmailToAllUsersSuccessful=!0,setTimeout(function(){e.sendEmailToAllUsersSuccessful=!1},5e3),e.send_email.content="",e.send_email.headline=""):window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!"),e.loading_sendemails=!1},function(t){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),e.loading_sendemails=!1})}},e.prototype.isNumeric=function(e){return"undefined"!=typeof e&&!isNaN(parseFloat(e))},e.prototype.sendToConsole=function(e){console.log(e)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"reload",void 0),e=i([a.Component({selector:"administration-component",providers:[r.LibgameService],template:'\n\n  <div class="row-controlling row">\n\n      <p class="overall-headline" style="width:100%;text-align:center;padding: 10px 0px!important;">CONTROLLING</p>\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <div id="cf-ad-stats" class="content-frame">\n\n              <p class="headline">Daten und Fakten</p>\n\n              <div class="col-xs-12" style="width:100%;">\n\n                  <div  style="vertical-align:top;width:100%;color:rgb(255,255,255);">\n\n                      <div id="cf-ad-stats-quests-count" class="col-xs-12 col-sm-4" style="vertical-align:top;">\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;">Aktive Quests</p>\n                          <p style="font-size:1em;text-align:center;">{{getCountActiveQuests()}}</p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                      <div id="cf-ad-stats-badges-count" class="col-xs-12 col-sm-4" style="vertical-align:top;">\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;">Aktive Abzeichen</p>\n                          <p style="font-size:1em;text-align:center;">{{getCountActiveBadges()}}</p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                      <div id="cf-ad-stats-tasks-count" class="col-xs-12 col-sm-4" style="vertical-align:top;">\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;">Aktive Aufgaben</p>\n                          <p style="font-size:1em;text-align:center;">{{getCountActiveTasks()}}</p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                  </div>\n              </div>\n\n              <div class="col-xs-12" style="width:100%;">\n\n                  <div style="vertical-align:top;width:100%;color:rgb(255,255,255);">\n\n                      <div id="cf-ad-stats-user-count" class="col-xs-12 col-sm-3" style="vertical-align:top;">\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;">Nutzer</p>\n                          <p style="font-size:1em;text-align:center;">{{getCountUsers()}}</p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                      <div id="cf-ad-stats-user-last-active" class="col-xs-12 col-sm-3" style="vertical-align:top;">\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;">ZULETZT AKTIVE USER [2 TAGE]</p>\n                          <p style="font-size:1em;text-align:center;">{{getCountUsersActiveLast2Days()}}</p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                      <div id="cf-ad-stats-user-completed-quests" class="col-xs-12 col-sm-3" style="vertical-align:top;">\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;">USER, WELCHE ALLE QUESTS GEL√ñST HABEN</p>\n                          <p style="font-size:1em;text-align:center;">{{getCountUsersCompletedAllQuests()}}</p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                      <div id="cf-ad-stats-user-completed-badges" class="col-xs-12 col-sm-3" style="vertical-align:top;">\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;">USER, WELCHE ALLE ABZEICHEN GESAMMELT HABEN</p>\n                          <p style="font-size:1em;text-align:center;">{{getCountUsersCompletedAllBadges()}}</p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                  </div>\n\n\n              </div>\n              <div style="clear:both;"></div>\n\n\n          </div>\n\n\n          <div id="cf-ad-user-activity-task" class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_c_solved_tasks_chart=show_c_solved_tasks_chart?false:true;initChartWithDelay();">Chart: Gel√∂ste Aufgaben</p>\n\n              <div [hidden]="!show_c_solved_tasks_chart" style="width:100%;">\n                  <div style="display:inline-block;border:2px solid rgb(0,0,0);border-radius:4px;">\n                    <div (click)="updateChartUserActivityTask(10,0,0);user_activity_task_active=\'10d\';" [class.whiteButtonClass-currentItem]="user_activity_task_active==\'10d\'" [class.whiteButtonClass]="user_activity_task_active!=\'10d\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">10 Tage</div>\n                    <div (click)="updateChartUserActivityTask(30,0,0);user_activity_task_active=\'30d\';" [class.whiteButtonClass-currentItem]="user_activity_task_active==\'30d\'" [class.whiteButtonClass]="user_activity_task_active!=\'30d\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">30 Tage</div>\n                    <div (click)="updateChartUserActivityTask(0,6,0);user_activity_task_active=\'6m\';" [class.whiteButtonClass-currentItem]="user_activity_task_active==\'6m\'" [class.whiteButtonClass]="user_activity_task_active!=\'6m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">6 Monate</div>\n                    <div (click)="updateChartUserActivityTask(0,12,0);user_activity_task_active=\'12m\';" [class.whiteButtonClass-currentItem]="user_activity_task_active==\'12m\'" [class.whiteButtonClass]="user_activity_task_active!=\'12m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">12 Monate</div>\n                    <div (click)="updateChartUserActivityTask(0,24,0);user_activity_task_active=\'24m\';" [class.whiteButtonClass-currentItem]="user_activity_task_active==\'24m\'" [class.whiteButtonClass]="user_activity_task_active!=\'24m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">24 Monate</div>\n                    <div (click)="updateChartUserActivityTask(0,0,5);user_activity_task_active=\'5y\';" [class.whiteButtonClass-currentItem]="user_activity_task_active==\'5y\'" [class.whiteButtonClass]="user_activity_task_active!=\'5y\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">5 Jahre</div>\n                    <div style="clear:both;"></div>\n                  </div>\n              </div>\n\n              <div [hidden]="!show_c_solved_tasks_chart" style="width:100%!important;min-width:100px!important;">\n                  <canvas id="canvas_user_activity_task" height="400"></canvas>\n              </div>\n\n          </div>\n\n      </div>\n\n\n  </div>\n\n\n  <div class="row-content-management row">\n\n      <p class="overall-headline" style="width:100%;text-align:center;">CONTENT-MANAGEMENT</p>\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <div class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_cm_general=show_cm_general?false:true;">Allgemein</p>\n\n              <div [hidden]="!show_cm_general" style="width:100%;">\n\n                  <!-- Adding Location -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-4 adm-frame">\n\n                      <p class="headline">Administriere Allgemeines</p>\n\n                      <hr class="hrForAdministration">\n                      <label style="width:100%;text-align:center;padding-left:0.5em;">Hauptbild / Logo des Spiels<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <div >\n                          <div style="float:left;width:50%;margin-top:10px;">\n                              <select [value]="getUniversalContent(\'MAIN_PICTURE_ID\')" (change)="setUniversalContent(\'MAIN_PICTURE_ID\',$event.target.value);" style="width:100%;">\n                                  <option *ngFor="let t_picture of getUniversalContentPictures();" value=\'{{t_picture.picture_id}}\'>{{t_picture.picturename}}</option>\n                              </select>\n                          </div>\n                          <div style="float:left;width:50%;text-align:right;">\n                              <uploadpicture-component (reload)="reload.emit(true);"></uploadpicture-component>\n                          </div>\n                          <div style="clear:both;margin:0;height:0;"></div>\n                          <div [hidden]="(getUniversalContent(\'MAIN_PICTURE_ID\')+\'\').length == 0" style="text-align:center;">\n                              <label style="width:100%;text-align:center;">Hauptbild / Logo des Spiels Vorschau</label>\n                              <br>\n                              <img style=\'width:30%;\' src=\'{{(getUniversalContent("MAIN_PICTURE_ID")+"").length != 0 ? lService.getPictureLink(getUniversalContent("MAIN_PICTURE_ID")) : ""}}\'>\n                          </div>\n                      </div>\n                      <hr class="hrForAdministration">\n\n                      <label style="width:100%;text-align:center;padding-left:0.5em;">Zentraler Ort (Dieser Ort bestimmt, auf welchen Punkt beim √ñffnen der Aufgabensuche gezoomt werden soll)</label>\n                      <br>\n                      <select [value]="getUniversalContent(\'ROOT_LOCATION\')" (change)="setUniversalContent(\'ROOT_LOCATION\',$event.target.value);"  style="width:100%;">\n                        <option value=\'-1\' selected="selected">--None--</option>\n                        <option *ngFor="let t_location of getLocations();" value=\'{{t_location.location_id}}\'>-- {{t_location.locationname}} --</option>\n                      </select>\n                      <hr class="hrForAdministration">\n\n                      <label style="width:100%;text-align:center;padding-left:0.5em;">Inhalt der Startseite (bevor der User eingeloggt ist)<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="getUniversalContent(\'START\')" [pictures]="getUniversalContentPictures()" (htmlcontent)="setUniversalContent(\'START\',$event);" ></htmleditor-component>\n                      <hr class="hrForAdministration">\n\n                      <label style="width:100%;text-align:center;padding-left:0.5em;">Inhalt der Startseite (wenn der User eingeloggt ist; "Was kann ich hier machen?")<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="getUniversalContent(\'HOME_1\')" [pictures]="getUniversalContentPictures()" (htmlcontent)="setUniversalContent(\'HOME_1\',$event);" ></htmleditor-component>\n                      <hr class="hrForAdministration">\n\n                      <label style="width:100%;text-align:center;padding-left:0.5em;">AGB<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="getUniversalContent(\'TOU\')" [pictures]="getUniversalContentPictures()" (htmlcontent)="setUniversalContent(\'TOU\',$event);" ></htmleditor-component>\n                      <hr class="hrForAdministration">\n\n                      <label style="width:100%;text-align:center;padding-left:0.5em;">Datenschutzerkl√§rung<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="getUniversalContent(\'PP\')" [pictures]="getUniversalContentPictures()" (htmlcontent)="setUniversalContent(\'PP\',$event);" ></htmleditor-component>\n                      <hr class="hrForAdministration">\n\n                      <label style="width:100%;text-align:center;padding-left:0.5em;">Impressum<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="getUniversalContent(\'IMPRESSUM\')" [pictures]="getUniversalContentPictures()" (htmlcontent)="setUniversalContent(\'IMPRESSUM\',$event);" ></htmleditor-component>\n\n                      <button (click)="upsertGeneralContent();" class="button" style="margin-top:2em;">Speichere die allgemeinen Informationen</button>\n                      <div style="width:100%;text-align:center;">\n                        <div *ngIf="upsertGeneralContentSuccessful" style="padding: 5px;">Allgemeinen Informationen erfolgreich gespeichert!</div>\n                      </div>\n\n                  </div>\n\n                  <div style="clear:both;"></div>\n              </div>\n\n          </div>\n\n\n          <div id="cf-ad-manage-tasks" class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_cm_tasks=show_cm_tasks?false:true;">Aufgaben</p>\n\n\n\n              <div [hidden]="!show_cm_tasks" style="width:100%;">\n\n                  <!-- Deleting/Editing Tasks -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-1 adm-frame">\n\n                      <p class="headline">Organisiere bestehende Aufgaben</p>\n\n                          <div *ngFor="let t_task of getTasks(); let i = index;" class="cf-ad-manage-tasks-task" style="width: 100%;color: #fff;margin-bottom:0.1em;">\n                              <div  class="cf-ad-manage-tasks-task-head" style="cursor:pointer;background:rgb(230,230,230);">\n                                  <button (click)="setTaskDeleteTask(t_task.task_id)" class="delete-task-button fa fa-minus" title="L√∂sche diese Aufgabe" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                                  <button (click)="setTaskActiveInactive(getTasks()[i])" [class.active]="t_task.is_task_active==\'1\'" [class.inactive]="t_task.is_task_active!=\'1\'" class="set-task-active-inactive-button fa fa-circle" title="Setze die Aufgabe aktiv/inaktiv" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                                  <button (click)="t_task.showhelper_edit_open = t_task.showhelper_edit_open?false:true;" [class.button-pressed]="t_task.showhelper_edit_open" class="fa fa-edit" title="Bearbeite die Aufgabe" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                                  <button [hidden]="t_task.task_type_id != 6" (click)="t_task.showhelper_information_open = t_task.showhelper_information_open?false:true; t_task.showhelper_information_open?showCanvasForTask(t_task.task_id,t_task.json_task_data.loc):\'\';" [class.button-pressed]="t_task.showhelper_information_open" class="fa fa-info" title="Zeige weitere Informationen" style="padding:0.1em 0.5em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                                  <p style="margin:0;padding:0.3em;font-size:1.2em;font-weight:bold;">\n                                    {{t_task.de_DE?.taskname}}\n                                  </p>\n                                  <div style="clear:both;margin:0;height:0;"></div>\n                              </div>\n\n                              <div *ngIf="t_task.showhelper_edit_open" class="cf-ad-manage-tasks-task-edit">\n\n                                  <edittask-component [user]="user" [universalcontent]="universalcontent" [taskdata]="t_task" [locationsdata]="getLocations()" [tasktypesdata]="getTaskTypes()" (taskdataoutput)="getTasks()[i]=$event;" (reload)="reload.emit(true);"></edittask-component>\n\n                                  <button (click)="upsertTask(t_task)" class="button" style="margin-top:2em;">Speichere jetzt die √Ñnderungen</button>\n                                  <div style="width:100%;text-align:center;">\n                                    <div *ngIf="t_task.upsert_successful" style="padding: 5px;">Aufgabe erfolgreich ge√§ndert!</div>\n                                  </div>\n                              </div>\n\n                              <div [hidden]="!t_task.showhelper_information_open" class="cf-ad-manage-tasks-task-show-information">\n                                  <br>\n                                  <label style="width:100%;text-align:center;padding-left:0.5em;">Nutze diesen QR Code, um den Usern die M√∂glichkeit zu geben die Aufgabe direkt durch Scannen des QR Codes zu l√∂sen:</label>\n                                  <br>\n                                  <div style="width:200px;height:250px;margin:0!important;margin-right:auto!important;margin-left:auto!important;margin-top:0.3em!important;margin-bottom:0.5em!important;">\n                                      <canvas [id]="\'qrcode-task-img\'+t_task.task_id" height="200" width="200"></canvas>\n                                  </div>\n                              </div>\n\n                          </div>\n\n                  </div>\n\n                  <!-- Adding Tasks -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-2 adm-frame">\n\n                      <p class="headline">F√ºge eine neue Aufgabe hinzu</p>\n\n                      <edittask-component [user]="user" [universalcontent]="universalcontent" [taskdata]="new_task" [locationsdata]="getLocations()" [tasktypesdata]="getTaskTypes()" (taskdataoutput)="new_task=$event;" (reload)="reload.emit(true);"></edittask-component>\n\n                      <button (click)="upsertTask(new_task)" class="button" style="margin-top:2em;">F√ºge die Aufgabe jetzt hinzu</button>\n                      <div style="width:100%;text-align:center;">\n                        <div *ngIf="upsertNewTaskSuccessful" style="padding: 5px;">Aufgabe erfolgreich hinzugef√ºgt!</div>\n                      </div>\n\n                  </div>\n\n                  <div style="clear:both;"></div>\n              </div>\n\n\n          </div>\n\n          <div id="cf-ad-manage-badges" class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_cm_badges=show_cm_badges?false:true;">Abzeichen</p>\n\n\n\n              <div [hidden]="!show_cm_badges" style="width:100%;">\n\n                  <!-- Deleting/Editing Badges -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-1 adm-frame">\n\n                      <p class="headline">Organisiere bestehende Abzeichen</p>\n\n                      <div *ngFor="let t_badge of getBadges(); let i = index;" class="cf-ad-manage-badges-badge" style="width: 100%;color: #fff;margin-bottom:0.1em;">\n                          <div  class="cf-ad-manage-badges-badge-head" style="cursor:pointer;background:rgb(230,230,230);">\n                              <button (click)="setBadgeDeleteBadge(t_badge.badge_id)" class="delete-badge-button fa fa-minus" title="L√∂sche dieses Abzeichen" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <button (click)="setBadgeActiveInactive(getBadges()[i])" [class.active]="t_badge.is_active==\'1\'" [class.inactive]="t_badge.is_active!=\'1\'" class="set-badge-active-inactive-button fa fa-circle" title="Setze dieses Abzeichen aktiv/inaktiv" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <button (click)="t_badge.showhelper_edit_open = t_badge.showhelper_edit_open?false:true;" [class.button-pressed]="t_badge.showhelper_edit_open" class="fa fa-edit" title="Bearbeite das Abzeichen" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <p style="margin:0;padding:0.3em;font-size:1.2em;font-weight:bold;">\n                                  {{t_badge.de_DE?.badgename}}\n                              </p>\n                              <div style="clear:both;margin:0;height:0;"></div>\n                          </div>\n                          <div *ngIf="t_badge.showhelper_edit_open" class="cf-ad-manage-badges-badge-edit-description">\n\n                              <editbadge-component [user]="user" [universalcontent]="universalcontent" [badgedata]="t_badge" [alltasksdata]="getTasks()" (badgedataoutput)="getBadges()[i]=$event;" (reload)="reload.emit(true);"></editbadge-component>\n\n                              <button (click)="upsertBadge(t_badge)" class="edit-badge-button button" style="margin-top:2em;">Speichere jetzt die √Ñnderungen</button>\n                              <div style="width:100%;text-align:center;">\n                                <div *ngIf="t_badge.upsert_successful" style="padding: 5px;">Abzeichen erfolgreich ge√§ndert!</div>\n                              </div>\n                          </div>\n                      </div>\n\n                  </div>\n\n                  <!-- Adding Badges -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-2 adm-frame">\n\n                      <p class="headline">F√ºge ein neues Abzeichen hinzu</p>\n\n                      <editbadge-component [user]="user" [universalcontent]="universalcontent" [badgedata]="new_badge" [alltasksdata]="getTasks()" (badgedataoutput)="new_badge=$event;" (reload)="reload.emit(true);"></editbadge-component>\n\n                      <button (click)="upsertBadge(new_badge)" class="button" style="margin-top:2em;">F√ºge das Abzeichen jetzt hinzu</button>\n                      <div style="width:100%;text-align:center;">\n                        <div *ngIf="upsertNewBadgeSuccessful" style="padding: 5px;">Abzeichen erfolgreich hinzugef√ºgt!</div>\n                      </div>\n                  </div>\n\n                  <div style="clear:both;"></div>\n              </div>\n\n          </div>\n\n          <div id="cf-ad-manage-quests" class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_cm_quests=show_cm_quests?false:true;">Quests</p>\n\n              <div [hidden]="!show_cm_quests" style="width:100%;">\n\n                  <!-- Deleting/Editing Quests -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-1 adm-frame">\n\n                      <p class="headline">Organisiere bestehende Quests</p>\n\n                      <div *ngFor="let t_quest of getQuests(); let i = index;" class="cf-ad-manage-quests-quest" style="width: 100%;color: #fff;margin-bottom:0.1em;">\n                          <div  class="cf-ad-manage-quests-quest-head" style="cursor:pointer;background:rgb(230,230,230);">\n                              <button (click)="setQuestDeleteQuest(t_quest.quest_id)" class="delete-quest-button fa fa-minus"  title="L√∂sche diesen Quest" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <button (click)="setQuestActiveInactive(getQuests()[i])" [class.active]="t_quest.is_active==\'1\'" [class.inactive]="t_quest.is_active!=\'1\'" class="set-quest-active-inactive-button fa fa-circle" title="Setze diesen Quest aktiv/inaktiv" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <button (click)="t_quest.showhelper_edit_open = t_quest.showhelper_edit_open?false:true;" [class.button-pressed]="t_quest.showhelper_edit_open" class="fa fa-edit" title="Bearbeite den Quest" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <p style="margin:0;padding:0.3em;font-size:1.2em;font-weight:bold;">\n                                  {{t_quest.de_DE?.questname}}\n                              </p>\n                              <div style="clear:both;margin:0;height:0;"></div>\n                          </div>\n                          <div *ngIf="t_quest.showhelper_edit_open" class="cf-ad-manage-quests-quest-edit-description">\n\n                              <editquest-component [user]="user" [universalcontent]="universalcontent" [questdata]="t_quest" [allquestsdata]="getQuests()" [alltasksdata]="getTasks()" [locationsdata]="getLocations()" (questdataoutput)="getQuests()[i]=$event;" (reload)="reload.emit(true);"></editquest-component>\n\n                              <button (click)="upsertQuest(t_quest)" class="edit-quest-button button" style="margin-top:2em;">Speichere jetzt die √Ñnderungen</button>\n                              <div style="width:100%;text-align:center;">\n                                <div *ngIf="t_quest.upsert_successful" style="padding: 5px;">Quest erfolgreich ge√§ndert!</div>\n                              </div>\n\n                          </div>\n                      </div>\n\n\n                  </div>\n\n                  <!-- Adding Quests -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-2 adm-frame">\n\n                      <p class="headline">F√ºge einen neuen Quest hinzu</p>\n\n                      <editquest-component [user]="user" [universalcontent]="universalcontent" [questdata]="new_quest" [allquestsdata]="getQuests()" [alltasksdata]="getTasks()" [locationsdata]="getLocations()" (questdataoutput)="new_quest=$event;" (reload)="reload.emit(true);"></editquest-component>\n\n                      <button (click)="upsertQuest(new_quest)" class="button" style="margin-top:2em;">F√ºge den neuen Quest jetzt hinzu</button>\n                      <div style="width:100%;text-align:center;">\n                        <div *ngIf="upsertNewQuestSuccessful" style="padding: 5px;">Quest erfolgreich hinzugef√ºgt!</div>\n                      </div>\n\n                  </div>\n\n                  <div style="clear:both;"></div>\n              </div>\n\n          </div>\n\n\n          <div class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_cm_locations=show_cm_locations?false:true;">Orte</p>\n\n\n\n              <div [hidden]="!show_cm_locations" style="width:100%;">\n\n                  <!-- Deleting/Getting QR Code Location -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-1 adm-frame">\n\n                      <p class="headline">Orte</p>\n\n                      <div *ngFor="let t_location of getLocations()" class="cf-ad-manage-locations-setted-location" style="width: 100%;color: #fff;margin-bottom:0.1em;">\n                          <div  class="cf-ad-manage-locations-setted-location-head" style="cursor:pointer;background:rgb(230,230,230);">\n                              <button (click)="setLocationDeleteLocation(t_location.location_id);" class="delete-location-button fa fa-minus" title="L√∂sche diesen Ort" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <button (click)="t_location.showhelper_information_open = t_location.showhelper_information_open?false:true; t_location.showhelper_information_open?showCanvasForLocation(t_location.location_id):\'\';" [class.button-pressed]="t_location.showhelper_information_open" class="fa fa-info" title="Zeige weitere Informationen bzgl. diesem Ort" style="padding:0.1em 0.5em;font-size:1.3em;float:right;cursor:pointer;margin-left:0.5em;"></button>\n                              <p style="margin:0;padding:0.3em;font-size:1.2em;font-weight:bold;">\n                                  {{t_location.locationname}}<br>\n                                  {{"Lat: "+t_location.geo_lati}}<br>\n                                  {{"Long: "+t_location.geo_long}}<br>\n                                  {{"Radius: "+t_location.geo_radius+"m"}}\n                              </p>\n                              <div style="clear:both;margin:0;height:0;"></div>\n                              <div [hidden]="!t_location.showhelper_information_open" class="cf-ad-manage-locations-setted-location-description">\n\n                                  <div style="width:200px;height:250px;margin:0!important;margin-right:auto!important;margin-left:auto!important;margin-top:1em!important;margin-bottom:1em!important;">\n                                      <canvas [id]="\'qrcode-location-img\'+t_location.location_id" height="200" width="200"></canvas>\n                                  </div>\n\n                              </div>\n                          </div>\n                      </div>\n\n\n\n                  </div>\n\n                  <!-- Adding Location -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-2 adm-frame">\n\n                      <p class="headline">F√ºge neuen Ort hinzu</p>\n\n                      <!-- Choose Locationname[german] -->\n                      <hr class="hrForAdministration">\n                      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">1.) </span>Ortsname<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <input [(ngModel)]="new_location.de_DE.locationname" type="text" placeholder="Ortsname" style="width:100%;">\n                      <hr class="hrForAdministration">\n\n                      <!-- Choose Latitude -->\n                      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">2.) </span>Breitengrad [Beispiel: 10.1435]<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <input [(ngModel)]="new_location.geo_lati" type="text" placeholder="Breitengrad" style="width:100%;">\n                      <hr class="hrForAdministration">\n\n                      <!-- Choose Longitude -->\n                      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">3.) </span>L√§ngengrad [Beispiel: 10.1435]<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <input [(ngModel)]="new_location.geo_long" type="text" placeholder="L√§ngengrad" style="width:100%;">\n                      <hr class="hrForAdministration">\n\n                      <!-- Choose Radius -->\n                      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">4.) </span>Radius[meter]<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <input [(ngModel)]="new_location.geo_radius" type="text" placeholder="Radius[meter]" style="width:100%;">\n\n                      <button (click)="upsertLocation(new_location);" class="button" style="margin-top:2em;">F√ºge den neuen Ort jetzt hinzu</button>\n                      <div style="width:100%;text-align:center;">\n                        <div *ngIf="upsertNewLocationSuccessful" style="padding: 5px;">Ort erfolgreich hinzugef√ºgt!</div>\n                      </div>\n\n                  </div>\n\n                  <div style="clear:both;"></div>\n              </div>\n\n          </div>\n\n          <div id="cf-ad-reverse-faculty-score" class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_cm_reset_score=show_cm_reset_score?false:true;">Setze Fakult√§tshighscore zur√ºck</p>\n\n              <div [hidden]="!show_cm_reset_score" style="width:100%;max-width:350px;width:100%;margin-left:auto;margin-right:auto;">\n\n                  <button (click)="resetFacultyScore();" class="button" style="margin-top:2em;margin-bottom:2em;">Setze den Fakult√§tshighscore jetzt zur√ºck</button>\n\n              </div>\n\n          </div>\n\n\n      </div>\n\n\n  </div>\n\n  <div class="row-user-management row">\n\n      <p class="overall-headline" style="width:100%;text-align:center;">USER-MANAGEMENT</p>\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <div *ngIf="user.user_type_id==\'2\'" class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_um_add_admins=show_um_add_admins?false:true;">F√ºge Administratoren hinzu</p>\n\n              <div [hidden]="!show_um_add_admins" style="width:100%;">\n\n\n                  <!-- Deleting/Editing Administrators -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-1 adm-frame">\n\n                      <p class="headline">Admins</p>\n\n                        <div *ngFor="let t_admin of getAdmins();" class="cf-ad-admin" style="width: 100%;color: #fff;margin-bottom:0.1em;">\n                            <button (click)="deleteAdmin(t_admin.user_id)" class="degrade-admin-button fa fa-minus" title="L√∂sche diesen Admin" style="padding:0.1em 0.2em;font-size:1.3em;float:right;cursor:pointer;"></button>\n                            <p style="margin:0;padding:0.3em;font-size:1.2em;font-weight:bold;">\n                                {{t_admin.username}}\n                            </p>\n                            <div style="clear:both;margin:0;height:0;"></div>\n                        </div>\n\n                        <div *ngFor="let t_admin of getSuperadmins();" class="cf-ad-admin" style="width: 100%;color: #fff;margin-bottom:0.1em;">\n                            <p style="margin:0;padding:0.3em;font-size:1.2em;font-weight:bold;">\n                                {{\'Superadmin: \'+t_admin.username}}\n                            </p>\n                            <div style="clear:both;margin:0;height:0;"></div>\n                        </div>\n\n                  </div>\n\n                  <!-- Adding Administrators -->\n                  <div class="col-xs-12 col-sm-4 col-sm-offset-2 adm-frame">\n\n                      <p class="headline">F√ºge einen neuen Admin hinzu</p>\n\n                      <div style="width:100%;">\n                          <select [(ngModel)]="addAdminId"  style="width:100%;">\n                            <option value=\'-1\'>--None--</option>\n                            <option *ngFor="let t_user of getAllUsers();" [hidden]="t_user.user_type_id != 0" value=\'{{t_user.user_id}}\'>{{t_user.username}}</option>\n                          </select>\n                      </div>\n\n                      <button (click)="setNewAdmin()"  class="button" style="margin-top:2em;">F√ºge den ausgew√§hlten Admin jetzt hinzu</button>\n                      <div style="width:100%;text-align:center;">\n                        <div *ngIf="addedNewAdminSuccessful" style="padding: 5px;">Admin erfolgreich hinzugef√ºgt!</div>\n                      </div>\n\n                  </div>\n\n                  <div style="clear:both;"></div>\n              </div>\n\n          </div>\n\n          <div id="cf-ad-send-mail-to-users" class="content-frame">\n\n              <p class="headline headline-as-button" (click)="show_um_send_mail=show_um_send_mail?false:true;">Sende eine Mail an alle User</p>\n\n              <div [hidden]="!show_um_send_mail" style="width:100%;">\n\n                  <div class="col-xs-12 col-sm-6 col-sm-offset-3 adm-frame">\n\n                      <hr class="hrForAdministration">\n                      <label for="input-email-headline" style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">1.) </span>Betreff<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <input [(ngModel)]="send_email.headline" type="text" placeholder="Betreff" style="width:100%;"/>\n                      <hr class="hrForAdministration">\n\n                      <label for="textarea-email-message" style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">2.) </span>Nachricht<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <textarea [(ngModel)]="send_email.content" placeholder="Nachricht" style="width:100%;height:8em;resize:none;"></textarea>\n\n                      <button (click)="sendEmailMessageToAllUsers()" class="button">\n                        <span [hidden]="loading_sendemails">Sende jetzt die Nachricht(en) an alle User</span>\n                        <span [hidden]="!loading_sendemails"><i class="fa fa-spinner fa-pulse"></i></span>\n                      </button>\n                      <div style="width:100%;text-align:center;">\n                        <div *ngIf="sendEmailToAllUsersSuccessful" style="padding: 5px;">Emails erfolgreich gesendet!</div>\n                      </div>\n\n                  </div>\n\n                  <div style="clear:both;"></div>\n              </div>\n\n\n\n          </div>\n\n\n      </div>\n\n\n  </div>\n\n  '
}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.AdministrationComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1}),"string"==typeof this.badge_id&&0!=this.badge_id.length&&this.lService.loadSpecificContent("badge&badge_id="+this.badge_id)},e.prototype.ngOnChanges=function(e){for(var t in e){var n=e[t],i=n.previousValue,s=n.currentValue;"badge_id"==t&&i!=s&&this.lService.loadSpecificContent("badge&badge_id="+s)}},e.prototype.getBadgeData=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.BADGE_DATA?{badgename:"",description_long:""}:this.specificcontent.BADGE_DATA},e.prototype.getUserBadge=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.USER_BADGE?{completed:"0"}:this.specificcontent.USER_BADGE},e.prototype.getProgressTasks=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.PROGRESS_TASKS?[]:this.specificcontent.PROGRESS_TASKS},e.prototype.navigateToQuest=function(e){this.router.navigate(["/l/quest",e])},e.prototype.navigateToTask=function(e){this.router.navigate(["/l/task",e])},e.prototype.navigateToBadge=function(e){this.router.navigate(["/l/badge",e])},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"badge_id",void 0),e=i([a.Component({selector:"badge-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <!-- Overview of badge -->\n          <div id="cf-ba-overview" class="content-frame">\n\n              <p class="headline">Abzeichen {{getBadgeData().badgename}}</p>\n\n              <div class="depend-on-device-fifty-to-hundred-percentage-width depend-on-device-left-to-none-float" style="padding:0 1em;">\n                  <div id="cf-ba-overview-badge-pic" style="width:40%;margin-left:auto;margin-right:auto;">\n                      <div style=\'position:relative;\'>\n                          <img style=\'position:relative;top:0;left:0;width:100%;\' src=\'{{lService.getPictureLink(getBadgeData().picture_id)}}\'>\n                          <div class=\'fa\'\n                            [class.fa-check-square]="getUserBadge().completed==\'1\'"\n                            [class.fa-minus-square]="getUserBadge().completed==\'0\'" style=\'position:absolute;right:0;margin:0.3em;font-size:2em!important;color:white;\'></div>\n                      </div>\n                  </div>\n\n                  <p id="cf-ba-overview-badge-description" style="text-align:justify;" [innerHTML]="getBadgeData().description_long"></p>\n              </div>\n              <div class="depend-on-device-fifty-to-hundred-percentage-width depend-on-device-left-to-none-float" style="padding:0 1em;">\n                  <div style="text-align:center;margin-top:0.3em;margin-bottom:0.5em;">Ben√∂tigte Aufgaben um Abzeichen zu sammeln</div>\n                  <div *ngFor="let t_task of getProgressTasks()" class=\'cf-ba-overview-task\' style=\'overflow:hidden;cursor:pointer;font-weight:bold;font-size:1em;color:rgb(255,255,255);border:0px solid rgb(0,0,0);border-radius:4px;padding:0.2em 0.3em;background:rgb(50,50,50);margin-top:2px;margin-bottom:2px;\' (click)="navigateToTask(t_task.task_id)">\n                    {{t_task.taskname}} <br />\n                    <button class=\'fa\'\n                      [class.fa-check-square]="t_task.completed==\'1\'"\n                      [class.fa-minus-square]="t_task.completed==\'0\'"\n                      [style.color]="t_task.completed==\'1\'?\'rgb(0,150,0)\':\'rgb(150,0,0)\'" style=\'padding:0;font-size:1em;border:0;margin:0;background:transparent;margin-left:5px;float:right;\'></button>\n\n                  </div>\n              </div>\n              <div style="clear:both;"></div>\n\n          </div>\n\n\n      </div>\n\n\n\n  </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.BadgeComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.badgedataoutput=new a.EventEmitter,this.reload=new a.EventEmitter}return e.prototype.ngOnInit=function(){"undefined"!=typeof this.badgedata.badge_id&&this.badgedata.badge_id!=-1||(this.badgedata={de_DE:{badgename:"",description_long:"",solved_description:""},badge_id:-1,is_active:"1",json_task_ids:[],picture_id:-1})},e.prototype.getUniversalContentPictures=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Pictures?[]:this.universalcontent._Pictures},e.prototype.updateBadgeData=function(){"undefined"!=typeof this.badgedata&&this.badgedataoutput.emit(this.badgedata)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"badgedata",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"alltasksdata",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"badgedataoutput",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"reload",void 0),e=i([a.Component({selector:"editbadge-component",providers:[r.LibgameService],template:'\n\n  <div style="margin:0;padding:0;" (focusout)="updateBadgeData()" (mouseleave)="updateBadgeData()">\n\n    <!-- badgename, Description of badge -->\n    <div>\n        <div style="float:left;width:100%;">\n            <hr class="hrForAdministration">\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">1.) </span>Abzeichenname<span style="color:#e9266d">*</span></label>\n            <br>\n            <input [(ngModel)]="badgedata.de_DE.badgename" type="text" placeholder="Abzeichenname" style="width:100%;"/>\n            <hr class="hrForAdministration">\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">2.) </span>Beschreibung des Abzeichens<span style="color:#e9266d">*</span></label>\n            <br>\n            <htmleditor-component [value]="badgedata.de_DE.description_long" [pictures]="getUniversalContentPictures()" (htmlcontent)="badgedata.de_DE.description_long=$event;updateBadgeData();" (reload)="reload.emit(true);"></htmleditor-component>\n            <hr class="hrForAdministration">\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">3.) </span>Meldung, welche der User bei erfolgreichem L√∂sen erh√§lt<span style="color:#e9266d">*</span></label>\n            <br>\n            <htmleditor-component [value]="badgedata.de_DE.solved_description" [pictures]="getUniversalContentPictures()" (htmlcontent)="badgedata.de_DE.solved_description=$event;updateBadgeData();" (reload)="reload.emit(true);"></htmleditor-component>\n            <hr class="hrForAdministration">\n        </div>\n        <div style="clear:both;margin:0;height:0;"></div>\n    </div>\n\n    <!-- To solve tasks for badge -->\n    <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">4.) </span>Zu l√∂sende Aufgaben, um Abzeichen zu sammeln<span style="color:#e9266d">*</span></label>\n    <br>\n    <selecttask-component [chooseabletaskarray]="alltasksdata" [selectedtaskarray]="badgedata.json_task_ids" (taskarray)="badgedata.json_task_ids=$event;"></selecttask-component>\n    <hr class="hrForAdministration">\n\n    <!-- badge pic -->\n    <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">5.) </span>Abzeichenbild<span style="color:#e9266d">*</span></label>\n    <br>\n    <div >\n        <div style="float:left;width:50%;margin-top:10px;">\n            <select [(ngModel)]="badgedata.picture_id" style="width:100%;">\n                <option *ngFor="let t_picture of getUniversalContentPictures();" value=\'{{t_picture.picture_id}}\'>{{t_picture.picturename}}</option>\n            </select>\n        </div>\n        <div style="float:left;width:50%;text-align:right;">\n            <uploadpicture-component (reload)="reload.emit(true);"></uploadpicture-component>\n        </div>\n        <div style="clear:both;margin:0;height:0;"></div>\n        <div [hidden]="badgedata.picture_id==-1" style="text-align:center;">\n            <label style="width:100%;text-align:center;">Abzeichen Vorschau</label>\n            <br>\n            <img style=\'width:30%;\' src=\'{{lService.getPictureLink(badgedata.picture_id)}}\'>\n        </div>\n    </div>\n\n  </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.EditBadgeComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.questdataoutput=new a.EventEmitter,this.reload=new a.EventEmitter,this.LevelsLength=1}return e.prototype.ngOnInit=function(){"undefined"!=typeof this.questdata.quest_id&&this.questdata.quest_id!=-1||(this.questdata={quest_id:-1,de_DE:{questname:"",solved_description:""},is_active:"1",json_pre_quest_ids:[],json_quest_task_ids:[[]],location_id:-1,is_starter_quest:"0",score_rule:"10"}),null==this.questdata.location_id&&(this.questdata.location_id=-1),this.LevelsLength=this.questdata.json_quest_task_ids.length},e.prototype.getUniversalContentPictures=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Pictures?[]:this.universalcontent._Pictures},e.prototype.changeQuestTaskLevelLength=function(e){var t=parseInt(e.target.value),n=t-this.questdata.json_quest_task_ids.length;if(this.questdata.json_quest_task_ids.length>t)for(var i=this.questdata.json_quest_task_ids.length;i>0;i--)i-1>=t&&this.questdata.json_quest_task_ids.splice(i-1,1);else if(this.questdata.json_quest_task_ids.length<t)for(var i=0;i<n;i++)this.questdata.json_quest_task_ids.push([])},e.prototype.updateQuestData=function(){"undefined"!=typeof this.questdata&&this.questdataoutput.emit(this.questdata)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"questdata",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"allquestsdata",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"alltasksdata",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"locationsdata",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"questdataoutput",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"reload",void 0),e=i([a.Component({selector:"editquest-component",providers:[r.LibgameService],template:'\n\n      <div style="margin:0;padding:0;" (focusout)="updateQuestData()" (mouseleave)="updateQuestData()">\n\n            <!-- questname -->\n            <hr class="hrForAdministration">\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">1.) </span>Questname<span style="color:#e9266d">*</span></label>\n            <br>\n            <input [(ngModel)]="questdata.de_DE.questname" type="text"  placeholder="Questname" style="width:100%;">\n            <hr class="hrForAdministration">\n\n            <!-- solved_description -->\n            <label id="label-quest-solved-description" style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">2.) </span>Meldung, welche der User bei erfolgreichem L√∂sen erh√§lt<span style="color:#e9266d">*</span></label>\n            <br>\n            <htmleditor-component [value]="questdata.de_DE.solved_description" [pictures]="getUniversalContentPictures()" (htmlcontent)="questdata.de_DE.solved_description=$event;updateQuestData();" (reload)="reload.emit(true);"></htmleditor-component>\n            <hr class="hrForAdministration">\n\n            <!-- Location of quest -->\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">3.) </span>Fundort des Quests</label>\n            <br>\n            <select [(ngModel)]="questdata.location_id" style="width:100%;">\n                <option value=\'-1\' selected="selected">--None--</option>\n                <option *ngFor="let t_location of locationsdata;" value=\'{{t_location.location_id}}\'>-- {{t_location.locationname}} --</option>\n            </select>\n            <hr class="hrForAdministration">\n\n            <!-- pre quests -->\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">4.) </span>Vorquests, um Quest zu erhalten und l√∂sen zu k√∂nnen</label>\n            <br>\n            <selectquest-component [chooseablequestarray]="allquestsdata" [selectedquestarray]="questdata.json_pre_quest_ids" (questarray)="questdata.json_pre_quest_ids=$event;updateQuestData();"></selectquest-component>\n            <hr class="hrForAdministration">\n\n            <!-- levels with to solve tasks -->\n            <div >\n                <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">5.) </span>Anzahl der Aufgabenstufen und Aufgaben f√ºr jede Stufe<span style="color:#e9266d">*</span></label>\n                <br>\n                <select [(ngModel)]="LevelsLength" (change)="changeQuestTaskLevelLength($event)" style="width:100%;">\n                    <option value="1">1 Level</option>\n                    <option value="2">2 Levels</option>\n                    <option value="3">3 Levels</option>\n                    <option value="4">4 Levels</option>\n                    <option value="5">5 Levels</option>\n                    <option value="6">6 Levels</option>\n                    <option value="7">7 Levels</option>\n                    <option value="8">8 Levels</option>\n                    <option value="9">9 Levels</option>\n                    <option value="10">10 Levels</option>\n                </select>\n                <div>\n\n                    <div *ngFor="let t_level of questdata.json_quest_task_ids;let i = index;" class="add-quest-tasks-level-1" style="width:calc(100% - 10px);border:1px solid rgb(200,200,200);margin-left:10px;margin-bottom:5px;padding:3px;">\n                        <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">{{i+1}}.) </span>Aufgaben f√ºr Stufe {{i+1}}</label>\n                        <selecttask-component [chooseabletaskarray]="alltasksdata" [selectedtaskarray]="questdata.json_quest_task_ids[i]" (taskarray)="questdata.json_quest_task_ids[i]=$event;updateQuestData();"></selecttask-component>\n                    </div>\n\n                </div>\n            </div>\n            <hr class="hrForAdministration">\n\n            <!-- score rule -->\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">6.) </span>Exp. f√ºr User bei Abschluss des Quests<span style="color:#e9266d">*</span></label>\n            <br>\n            <input [(ngModel)]="questdata.score_rule" type="text" style="width:100%;padding-left:0.3em;">\n            <hr class="hrForAdministration">\n\n            <!-- is starter quest? -->\n            <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">7.) </span>Ist der Quest schon bei Spielbeginn dem User bekannt</label>\n            <br>\n            <input [checked]="questdata.is_starter_quest==\'1\'" (click)="questdata.is_starter_quest==\'1\'?questdata.is_starter_quest=\'0\':questdata.is_starter_quest=\'1\';" type="checkbox" style="width:25px;margin-left:48%;" />\n\n        </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.EditQuestComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.taskdataoutput=new a.EventEmitter,this.reload=new a.EventEmitter}return e.prototype.ngOnInit=function(){console.log("EditTask Init"),"undefined"!=typeof this.taskdata.task_id&&this.taskdata.task_id!=-1||(this.taskdata={task_id:-1,task_type_id:1,json_task_data:{},de_DE:{taskname:"",description_long:"",solved_description:""},is_task_active:"1",score_rule:"10",location_id:-1},this.changeTaskType()),"undefined"!=typeof this.taskdata.location_id&&null==this.taskdata.location_id&&(this.taskdata.location_id=-1),console.log(this.taskdata.de_DE),console.log(this.taskdata)},e.prototype.getUniversalContentPictures=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Pictures?[]:this.universalcontent._Pictures},e.prototype.changeTaskType=function(){1==this.taskdata.task_type_id?this.taskdata.json_task_data={de_DE:{a1:"",a2:"",a3:"",a4:"",question:""}}:2==this.taskdata.task_type_id?this.taskdata.json_task_data={loc:1}:3==this.taskdata.task_type_id?this.taskdata.json_task_data={isbn:""}:4==this.taskdata.task_type_id?this.taskdata.json_task_data={de_DE:{s1:"",s2:"",s3:""}}:5==this.taskdata.task_type_id?this.taskdata.json_task_data={de_DE:{answer:"",text:""}}:6==this.taskdata.task_type_id&&(this.taskdata.json_task_data={})},e.prototype.updateTaskData=function(){"undefined"!=typeof this.taskdata&&this.taskdataoutput.emit(this.taskdata)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"taskdata",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"locationsdata",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"tasktypesdata",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"taskdataoutput",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"reload",void 0),e=i([a.Component({selector:"edittask-component",providers:[r.LibgameService],template:'\n\n    <div style="margin:0;padding:0;" (focusout)="updateTaskData()" (mouseleave)="updateTaskData()">\n\n      <!-- taskname, Description of task -->\n      <div>\n          <div  style="float:left;width:100%;">\n              <hr class="hrForAdministration">\n              <label  style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">1.) </span>Name der Aufgabe<span style="color:#e9266d">*</span></label>\n              <br>\n              <input [(ngModel)]="taskdata.de_DE.taskname" type="text" name="task-name" placeholder="Name der Aufgabe" style="width:100%;"/>\n              <hr class="hrForAdministration">\n              <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">2.) </span>Beschreibung der Aufgabe<span style="color:#e9266d">*</span></label>\n              <br>\n              <htmleditor-component [value]="taskdata.de_DE.description_long" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.de_DE.description_long=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n              <hr class="hrForAdministration">\n              <label  style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">3.) </span>Meldung, welche der User bei erfolgreichem L√∂sen erh√§lt<span style="color:#e9266d">*</span></label>\n              <br>\n              <htmleditor-component [value]="taskdata.de_DE.solved_description" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.de_DE.solved_description=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n              <hr class="hrForAdministration">\n          </div>\n          <div style="clear:both;margin:0;height:0;"></div>\n      </div>\n\n      <!-- Location of task -->\n      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">4.) </span>Fundort der Aufgabe</label>\n      <br>\n      <select [(ngModel)]="taskdata.location_id"  style="width:100%;">\n        <option value=\'-1\' selected="selected">--None--</option>\n        <option *ngFor="let t_location of locationsdata;" value=\'{{t_location.location_id}}\'>-- {{t_location.locationname}} --</option>\n      </select>\n      <hr class="hrForAdministration">\n\n      <!-- score_rule -->\n      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">5.) </span>Exp., welche vom User gesammelt werden kann<span style="color:#e9266d">*</span></label>\n      <br>\n      <input [(ngModel)]="taskdata.score_rule" type="text" style="width:100%;padding-left:0.3em;">\n      <hr class="hrForAdministration">\n\n      <!-- task type -->\n      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">6.) </span>W√§hle den Aufgabentyp (Dieser bestimmt die nun folgenden Eingaben)<span style="color:#e9266d">*</span></label>\n      <br>\n      <select [(ngModel)]="taskdata.task_type_id" (change)="changeTaskType()" style="width:100%;">\n        <option *ngFor="let t_task_type of tasktypesdata;" value=\'{{t_task_type.task_type_id}}\'>-- {{t_task_type.task_type_name}} --</option>\n      </select>\n      <hr class="hrForAdministration">\n\n      <!-- Specification of task depend on task type -->\n      <label style="width:100%;text-align:center;padding-left:0.5em;"><span class="stepHelper">7.) </span>Aufgabenspezifikation [abh√§ngig von dem Aufgabetyp]<span style="color:#e9266d">*</span></label>\n      <br>\n      <div style="width:100%;">\n\n          <div *ngIf="taskdata.task_type_id==1" style="width:100%;">\n              <div style="float:left;width:100%;">\n                  <div style="width:100%;">\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.1.) </span>Frage<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.question" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.question=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.2.) </span>Richtige Antwort<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.a1" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.a1=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.3.) </span>1. Falsche Antwort<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.a2" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.a2=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.4.) </span>2. Falsche Antwort<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.a3" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.a3=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.5.) </span>3. Falsche Antwort<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.a4" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.a4=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                  </div>\n              </div>\n              <div style="clear:both;margin:0;height:0;"></div>\n          </div>\n\n          <div *ngIf="taskdata.task_type_id==2" style="width:100%;">\n              <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.1.) </span>Ort<span style="color:#e9266d">*</span></label>\n              <br>\n              <select [(ngModel)]="taskdata.json_task_data.loc" style="width:100%;">\n                  <option value=\'-1\' selected="selected">--None--</option>\n                  <option *ngFor="let t_location of locationsdata;" value=\'{{t_location.location_id}}\'>-- {{t_location.locationname}} --</option>\n              </select>\n          </div>\n\n          <div *ngIf="taskdata.task_type_id==3" style="width:100%;">\n              <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.1.) </span>ISBN<span style="color:#e9266d">*</span></label>\n              <br>\n              <input [(ngModel)]="taskdata.json_task_data.isbn" type="text" placeholder="ISBN" style="width:100%;">\n          </div>\n\n          <div *ngIf="taskdata.task_type_id==4" style="width:100%;">\n              <div style="float:left;width:100%;">\n                  <div style="width:100%;">\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.1.) </span>Quelle 1 (gr√ºn)<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.s1" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.s1=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.2.) </span>Quelle 2 (gelb)<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.s2" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.s2=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.3.) </span>Quelle 3 (rot)<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <htmleditor-component [value]="taskdata.json_task_data.de_DE.s3" [pictures]="getUniversalContentPictures()" (htmlcontent)="taskdata.json_task_data.de_DE.s3=$event;updateTaskData();" (reload)="reload.emit(true);"></htmleditor-component>\n                  </div>\n              </div>\n              <div style="clear:both;margin:0;height:0;"></div>\n          </div>\n\n          <div *ngIf="taskdata.task_type_id==5" style="width:100%;">\n              <div style="float:left;width:100%;">\n                  <div style="width:100%;">\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.1.) </span>Text mit L√ºcke<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <input [(ngModel)]="taskdata.json_task_data.de_DE.text" type="text" class="input-add-task-specification-task-type-5-text-with-blank" placeholder="Text mit L√ºcke" style="width:100%;">\n                      <button class="add-task-specification-task-type-5-mail-to-users-button button" (click)="taskdata.json_task_data.de_DE.text=taskdata.json_task_data.de_DE.text+\'[::BLANK::]\';" style="width:100%;cursor:pointer;text-align:center;padding:0.1em 0;">Klicke hier, um die L√ºcke einzuf√ºgen!</button>\n                      <label style="width:100%;text-align:center;padding-left:2em;"><span class="stepHelper">7.2.) </span>Richtige Antwort<span style="color:#e9266d">*</span></label>\n                      <br>\n                      <input [(ngModel)]="taskdata.json_task_data.de_DE.answer" type="text" class="input-add-task-specification-task-type-5-correct-answer" placeholder="Richtige Antwort" style="width:100%;">\n                  </div>\n              </div>\n              <div style="clear:both;margin:0;height:0;"></div>\n          </div>\n\n          <div *ngIf="taskdata.task_type_id==6" style="width:100%;">\n              <div style="text-align:center;"><span class="stepHelper">7.1.) </span>Keine ben√∂tigt</div>\n          </div>\n      </div>\n\n    </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.EditTaskComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1}),this.lService.loadSpecificContent("legal")},e.prototype.getTOU=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.TOU?{text:""}:this.specificcontent.TOU},e.prototype.getPP=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.PP?{text:""}:this.specificcontent.PP},e.prototype.getIMPRESSUM=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.IMPRESSUM?{
text:""}:this.specificcontent.IMPRESSUM},e.prototype.getLegalcontent=function(){return"tou"==this.legalcomponent?this.getTOU().text:"pp"==this.legalcomponent?this.getPP().text:"impressum"==this.legalcomponent?this.getIMPRESSUM().text:"Nothing found!"},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"legalcomponent",void 0),e=i([a.Component({selector:"legal-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n    <section class="col-xs-12" style="padding:0;background:white;">\n\n        <div class="content-frame">\n\n          <p *ngIf="legalcomponent==\'tou\'" class="headline"style="margin-top:10px;">Allgemeine Gesch√§ftsbedingungen</p>\n          <p *ngIf="legalcomponent==\'pp\'" class="headline"style="margin-top:10px;">Datenschutzerkl√§rung</p>\n          <p *ngIf="legalcomponent==\'impressum\'" class="headline"style="margin-top:10px;">Impressum</p>\n\n          <div style="margin-top:20px;width:100%;padding:0 3em;" [innerHTML]="getLegalcontent()">\n          </div>\n\n        </div>\n\n    </section>\n</div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.LegalComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent=[],this.loading_specificcontent=!0,this.number_of_shown_users_per_page=20}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1}),this.lService.loadSpecificContent("highscorelist")},e.prototype.getRankedHighscoreListArray=function(){return"undefined"!=typeof this.specificcontent?this.specificcontent:[]},e.prototype.getCurrentShownUsers=function(){return this.getRankedHighscoreListArray().slice(this.highscorepage*this.number_of_shown_users_per_page,(this.highscorepage+1)*this.number_of_shown_users_per_page)},e.prototype.getArrayTotalNumberOfHighscorePages=function(){for(var e=[],t=0;t<Math.ceil(this.getRankedHighscoreListArray().length/this.number_of_shown_users_per_page);t++)e.push(t);return e},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"highscorepage",void 0),e=i([a.Component({selector:"highscorelist-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <div id="cf-hi-highscore-list" class="content-frame">\n\n              <p class="headline">Highscore</p>\n\n              <div style="display:table;width:100%;border-spacing:2px 2px;color:rgb(255,255,255);">\n\n                  <div style=\'display:table-row;width:100%;\'>\n\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">Rang</p>\n                      </div>\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">Name</p>\n                      </div>\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">Exp.</p>\n                      </div>\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">Fak.</p>\n                      </div>\n\n                  </div>\n\n                  <div *ngFor="let t_user of getCurrentShownUsers();" [style.background]="t_user.user_id==user.user_id?\'#990000\':\'inherit\'" style=\'display:table-row;vertical-align:top;\'>\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style=\'font-size:1.3em;text-align:center;\'>{{t_user.ranking}}</p>\n                      </div>\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style=\'font-size:1em;text-align:center;\'>{{t_user.username}}</p>\n                      </div>\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style=\'font-size:1.1em;text-align:center;\'>{{t_user.user_score}}</p>\n                      </div>\n                      <div style=\'display:table-cell;vertical-align:top;\'>\n                          <p style=\'font-size:1em;text-align:center;\'>{{t_user.facultyname}}</p>\n                      </div>\n                  </div>\n\n\n\n              </div>\n\n              <!-- Navigation Highscore List -->\n\n              <div style="width:95%;margin-top:20px;margin-bottom:0.3em;margin-left:auto;margin-right:auto;">\n\n                <div *ngFor="let t_pageid of getArrayTotalNumberOfHighscorePages()"\n                  [class.cf-hi-nav-item-unselected]="t_pageid!=highscorepage"\n                  [class.cf-hi-nav-item]="t_pageid==highscorepage"\n                  (click)="highscorepage=t_pageid;"\n                  style=\'float:left;margin-right:2px;padding:10px 15px;border:1px solid black;\'>{{t_pageid+1}}</div>\n\n                <div style="clear:both;"></div>\n              </div>\n\n          </div>\n\n      </div>\n\n\n\n  </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.HighscorelistComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(61),r=n(29),d=function(){function e(e,t,n){this.router=e,this.route=t,this.lService=n,this.user={},this.loading_user=!0,this.universalcontent={},this.loading_universalcontent=!0,this.showncomponent="",this.timeframeForCheckingLocation=3e4,this.intervalTimerManageCheckLocation=null,this.solvedOverlayArray=[],this.toggled=!1,this.badge_id="",this.quest_id="",this.task_id="",this.legalcomponent="",this.highscorepage=0,this.additionalinformation="",this.locationfound_id="",this.reg_username="",this.reg_username_valid=!0,this.reg_username_exists=!1,this.reg_email="",this.reg_email_valid=!0,this.reg_email_exists=!1,this.reg_password="",this.reg_password_valid=!0,this.reg_password_repeat="",this.reg_password_repeat_valid=!0,this.reg_faculty_id=-2}return e.prototype.ngOnInit=function(){var e=this;this.sub=this.route.params.subscribe(function(e){var t="undefined"!=typeof e.scroll?e.scroll:"";"undefined"!=typeof t&&t.length>0?$("html, body").animate({scrollTop:$("#"+t).offset().top},"slow"):$("html, body").animate({scrollTop:0},"slow")}),$("#titleBar").show(),this.loading_user=!0,this.lService.user$.subscribe(function(t){"undefined"!=typeof t&&"undefined"!=typeof t.user_id||e.navigateToUnloggedComponent("home"),e.user=t,e.loading_user=!1,"undefined"!=typeof e.user.user_id&&e.user.user_id!=-1&&(e.manageCheckLocation(),null!=e.intervalTimerManageCheckLocation&&window.clearInterval(e.intervalTimerManageCheckLocation),e.intervalTimerManageCheckLocation=window.setInterval(function(){e.manageCheckLocation()},e.timeframeForCheckingLocation))}),this.lService.loadUser(),this.loading_universalcontent=!0,this.lService.universalcontent$.subscribe(function(t){e.universalcontent=t,e.loading_universalcontent=!1}),this.lService.loadUniversalContent(),this.sub=this.route.params.subscribe(function(t){var n="undefined"!=typeof t.component?t.component:"",i="undefined"!=typeof t.id?t.id:"",s="undefined"!=typeof t.additionalinformation?t.additionalinformation:"";n=n.toLowerCase(),i=i.toLowerCase(),0==n.length||"tasks"==n?e.showncomponent="tasks":"administration"==n?e.showncomponent="administration":"task"==n&&0!=i.length?(e.showncomponent="task",e.task_id=i,e.additionalinformation=s):"tasksearch"==n?e.showncomponent="tasksearch":"highscorelist"==n?(e.showncomponent="highscorelist",e.highscorepage=parseInt(i)):"quest"==n&&0!=i.length?(e.showncomponent="quest",e.quest_id=i):"badge"==n&&0!=i.length?(e.showncomponent="badge",e.badge_id=i):"legal"==n&&0!=i.length?(e.showncomponent="legal",e.legalcomponent=i):"statistics"==n?e.showncomponent="statistics":"userprogress"==n?e.showncomponent="userprogress":"usersettings"==n?e.showncomponent="usersettings":"locationfound"==n&&0!=i.length?(e.showncomponent="tasks",e.locationfound_id=i,e.checkLocation("","",e.locationfound_id)):e.showncomponent="tasks"})},e.prototype.getUniversalContentFacultyArray=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Faculties?[]:this.universalcontent._Faculties},e.prototype.getUniversalContentAnonymousUserPhrase=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent.Anonymous_User_Phrase?"":this.universalcontent.Anonymous_User_Phrase},e.prototype.getUniversalContentMainPictureId=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Content||0==this.universalcontent._Content.filter(function(e){return"MAIN_PICTURE_ID"==e.content_mapper}).length?-1:this.universalcontent._Content.filter(function(e){return"MAIN_PICTURE_ID"==e.content_mapper})[0].text},e.prototype.isUserAnonymousUser=function(){return"undefined"!=typeof this.user&&"undefined"!=typeof this.user.username&&(0!=this.getUniversalContentAnonymousUserPhrase().length&&this.user.username.indexOf(this.getUniversalContentAnonymousUserPhrase())>-1)},e.prototype.isUserAdminUser=function(){return"undefined"!=typeof this.user&&"undefined"!=typeof this.user.user_type_id&&(1==this.user.user_type_id||2==this.user.user_type_id)},e.prototype.logoutUser=function(){var e=this;this.lService.logoutUser().subscribe(function(t){e.router.navigate(["/u/home"])},function(e){console.error("Could not logout user.")})},e.prototype.navigateToComponent=function(e){this.router.navigate(["/l/"+e])},e.prototype.navigateToUnloggedComponent=function(e){this.router.navigate(["/u/"+e])},e.prototype.navigateToLegal=function(e){this.router.navigate(["/l/legal",e])},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe(),null!=this.intervalTimerManageCheckLocation&&window.clearInterval(this.intervalTimerManageCheckLocation)},e.prototype.deleteUser=function(){var e=this;1==confirm("M√∂chtest du deinen User jetzt l√∂schen?")&&this.lService.deleteUser().subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?e.navigateToUnloggedComponent("home"):window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.manageCheckLocation=function(){var e=this;navigator.geolocation?navigator.geolocation.getCurrentPosition(function(t){e.checkLocation(t.coords.latitude,t.coords.longitude,"")},function(e){console.log("Positioning Error: "),console.log(e),window.alert("Positionieren des Nutzers nicht m√∂glich! Fehler: "+("undefined"!=typeof e.message?e.message:""))},{enableHighAccuracy:!0,maximumAge:1e6}):window.alert("Bitte erlaube dem Spiel deine Position zu checken, da sonst das Spiel f√ºr dich nicht in vollem Umfang spielbar ist. Deine Position wird NICHT permanent gespeichert, sondern nur kurz (5-10 Sekunden) f√ºr die Suche von Aufgaben und Quests in deiner N√§he benutzt!")},e.prototype.checkLocation=function(e,t,n){var i=this;("undefined"!=typeof e&&"undefined"!=typeof t||"undefined"!=typeof n)&&this.lService.checkLocation(e,t,n).subscribe(function(e){if("undefined"!=typeof e.result&&1==e.result&&null!=e.data){for(var t in e.data.new_tasks)i.solvedOverlayArray.push({type:4,name:"Aufgabe gefunden",solved_description:"Du hast eine neue Aufgabe gefunden: '"+e.data.new_tasks[t].taskname+"'. Du findest sie ab sofort unter deinen aktuellen Aufgaben!"});for(var t in e.data.new_quests)i.solvedOverlayArray.push({type:4,name:"Quest gefunden",solved_description:"Du hast einen neuen Quest gefunden: '"+e.data.new_quests[t].questname+"'. Du findest sie ab sofort unter deinen aktuellen Aufgaben!"});for(var t in e.data.all_tasks_to_solve_in_near){var n="",s="";if("undefined"!=typeof e.data.all_tasks_to_solve_in_near[t].achievements){for(var a in e.data.all_tasks_to_solve_in_near[t].achievements.quests)n+="-"+e.data.all_tasks_to_solve_in_near[t].achievements.quests[a].questname+"<br />";for(var o in e.data.all_tasks_to_solve_in_near[t].achievements.badges)s+="-"+e.data.all_tasks_to_solve_in_near[t].achievements.badges[o].badgename+"<br />"}if(i.solvedOverlayArray.push({type:1,name:"Aufgabe erf√ºllt",solved_description:"Herzlichen Gl√ºckwunsch! Du hast die Aufgabe '"+e.data.all_tasks_to_solve_in_near[t].taskname+"' abgeschlossen.",score_rule:e.data.all_tasks_to_solve_in_near[t].score_rule,faculty_score_rule:e.data.all_tasks_to_solve_in_near[t].added_score_for_faculty,solved_quests:n,solved_badges:s}),"undefined"!=typeof e.data.all_tasks_to_solve_in_near[t].achievements)for(var a in e.data.all_tasks_to_solve_in_near[t].achievements.quests)i.solvedOverlayArray.push({type:3,name:"Quest erf√ºllt",solved_description:"Herzlichen Gl√ºckwunsch! Du hast den Quest '"+e.data.all_tasks_to_solve_in_near[t].achievements.quests[a].questname+"' abgeschlossen.",score_rule:e.data.all_tasks_to_solve_in_near[t].achievements.quests[a].score_rule,faculty_score_rule:e.data.all_tasks_to_solve_in_near[t].achievements.quests[a].score_rule});if("undefined"!=typeof e.data.all_tasks_to_solve_in_near[t].achievements)for(var o in e.data.all_tasks_to_solve_in_near[t].achievements.badges)i.solvedOverlayArray.push({type:2,name:"Abzeichen erhalten",solved_description:"Herzlichen Gl√ºckwunsch! Du hast das Abzeichen '"+e.data.all_tasks_to_solve_in_near[t].achievements.badges[o].badgename+"' abgeschlossen.<br /><img src='"+i.lService.getPictureLink(e.data.all_tasks_to_solve_in_near[t].achievements.badges[o].picture_id)+"' />"})}}else"undefined"!=typeof e.result&&1==e.result&&null==e.data?null!=i.intervalTimerManageCheckLocation&&(window.clearInterval(i.intervalTimerManageCheckLocation),i.intervalTimerManageCheckLocation=null):window.alert("Es ist ein Fehler aufgetreten. Bitte lass die Seite neuladen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.removeFromSolvedOverlayArray=function(e){this.solvedOverlayArray.splice(e,1)},e.prototype.registerLoggedUser=function(){var e=/^[A-Za-z0-9]{2,}$/;return 0==this.reg_username.length||null==this.reg_username.match(e)?void window.alert("Dein gew√§hlter Username entspricht nicht unseren Richtlinien!"):1==this.reg_username_exists?void window.alert("Dein gew√§hlter Username ist bereits vergeben!"):(e=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,0==this.reg_email.length||null==this.reg_email.match(e)?void window.alert("Bitte √ºberpr√ºfe deine E-Mail und versuche es erneut!"):1==this.reg_email_exists?void window.alert("Deine gew√§hlte E-Mail ist bereits vergeben!"):(e=/[A-Za-z0-9!?.:;-]{6,}/g,0==this.reg_password.length||null==this.reg_password.match(e)||this.reg_password!=this.reg_password_repeat?void window.alert("Dein Passwort entspricht nicht unseren Richtlinien oder du hast die beiden Passw√∂rter stimmen nicht √ºberein!"):this.reg_faculty_id==-2?void window.alert("Bitte w√§hle vor der Registration eine Fakult√§t!"):0==$("#reg_bed").prop("checked")?void window.alert("Bitte akzeptiere vor der Registration die AGB sowie die Datenschutzerkl√§rungen!"):void this.lService.registerUser(this.reg_username,this.reg_email,this.reg_password,this.reg_password_repeat,this.reg_faculty_id).subscribe(function(e){"undefined"!=typeof e.result&&1==e.result?window.location.reload():window.alert("Bitte lass die Seite neuladen und √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),console.error("Could not register user.")})))},e.prototype.keyupRegisterUsername=function(){var e=this,t=/^[A-Za-z0-9]{2,}$/;0!=this.reg_username.length&&null!=this.reg_username.match(t)?this.reg_username_valid=!0:this.reg_username_valid=!1,this.lService.checkUsername(this.reg_username).subscribe(function(t){"undefined"!=typeof t.data&&"undefined"!=typeof t.data.username_exists&&"undefined"!=typeof t.data.username&&t.data.username==e.reg_username&&1==t.data.username_exists?e.reg_username_exists=!0:"undefined"!=typeof t.data&&"undefined"!=typeof t.data.username_exists&&"undefined"!=typeof t.data.username&&t.data.username==e.reg_username&&0==t.data.username_exists&&(e.reg_username_exists=!1)},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),console.error("Could not login user.")})},e.prototype.keyupRegisterEmail=function(){var e=this,t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;0!=this.reg_email.length&&null!=this.reg_email.match(t)?this.reg_email_valid=!0:this.reg_email_valid=!1,this.lService.checkEmail(this.reg_email).subscribe(function(t){"undefined"!=typeof t.data&&"undefined"!=typeof t.data.email_exists&&"undefined"!=typeof t.data.email&&t.data.email==e.reg_email&&1==t.data.email_exists?e.reg_email_exists=!0:"undefined"!=typeof t.data&&"undefined"!=typeof t.data.email_exists&&"undefined"!=typeof t.data.email&&t.data.email==e.reg_email&&0==t.data.email_exists&&(e.reg_email_exists=!1)},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),console.error("Could not login user.")})},e.prototype.keyupRegisterPassword=function(){var e=/[A-Za-z0-9!?.:;-]{6,}/g;0!=this.reg_password.length&&null!=this.reg_password.match(e)?this.reg_password_valid=!0:this.reg_password_valid=!1},e.prototype.keyupRegisterPasswordRepeat=function(){0!=this.reg_password_repeat.length&&this.reg_password==this.reg_password_repeat?this.reg_password_repeat_valid=!0:this.reg_password_repeat_valid=!1},e=i([a.Component({selector:"loggedcontent-component",providers:[o.LibgameService],template:'\n\n\n  <!-- -->\n  <div id="wrapper" [class.toggled]="toggled">\n\n      <!-- Sidebar -->\n      <div id="sidebar-wrapper">\n\n        <!-- Logo -->\n        <div id="logo">\n          <img [src]="getUniversalContentMainPictureId().length != 0 ? lService.getPictureLink(getUniversalContentMainPictureId()) : \'\'" style="width:100%;" />\n        </div>\n\n        <!-- Nav -->\n        <nav class="nav">\n            <ul>\n                <li [class.current_page_item]="showncomponent==\'tasks\'"><a id="tasks" (click)="navigateToComponent(\'tasks\')" style="cursor:pointer;">Aktuelle Aufgaben</a></li>\n                <li [class.current_page_item]="showncomponent==\'tasksearch\'"><a id="map" (click)="navigateToComponent(\'tasksearch\')" style="cursor:pointer;">Aufgabensuche</a></li>\n                <li [class.current_page_item]="showncomponent==\'userprogress\'"><a id="achievements" (click)="navigateToComponent(\'userprogress\')" style="cursor:pointer;">Spielstand</a></li>\n                <li [class.current_page_item]="showncomponent==\'statistics\'"><a id="statistics" (click)="navigateToComponent(\'statistics\')" style="cursor:pointer;">Statistiken</a></li>\n                <li><a id="logout" (click)="logoutUser()" style="cursor:pointer;">Abmelden</a></li>\n            </ul>\n        </nav>\n\n        <nav *ngIf="isUserAdminUser()" class="nav" style="margin-top:0.5em;">\n            <ul>\n                <li [class.current_page_item]="showncomponent==\'administration\'"><a id="administration" (click)="navigateToComponent(\'administration\')" style="cursor:pointer;">Administration</a></li>\n            </ul>\n        </nav>\n\n        <!-- Copyright -->\n        <!--\n        <section id="copyright" style="margin-top: 0.5em;">\n            <p>\n                &copy; 2016 The Library Game.<br />\n                CodeDesign, Database: <a href="http://company.aliru.de">Julian Kissel</a><br />\n                Design: Alexander Moch<br />\n                Weitere Beteiligte: <a href="https://www.bib.uni-mannheim.de/">Bibliothek der Universit√§t Mannheim</a>, <a href="http://ls.wim.uni-mannheim.de/de/pi4/people/philip-mildner/">Philip Mildner</a>\n            </p>\n        </section>\n        -->\n\n\n        <!-- Register for Anonymous Player -->\n        <section id="registerAsAnonymous" *ngIf="getUniversalContentAnonymousUserPhrase().length!=0 && isUserAnonymousUser()">\n            <div style="padding:0px 10px;">\n\n                <form id="registerForm">\n                      <input [(ngModel)]="reg_username" (keyup)="keyupRegisterUsername()" [style.background]="reg_username.length>0?(reg_username_valid && reg_username_exists == false)?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_username" name="reg_username" type="text" maxlength="30" placeholder="Username" title="Gib hier deinen gew√ºnschten Usernamen ein" style="padding-top:7px;padding-bottom:7px;"/>\n                      <div *ngIf="reg_username_exists" style="padding: 5px;color: white;">Username ist leider schon vergeben!</div>\n\n                      <input [(ngModel)]="reg_email" (keyup)="keyupRegisterEmail()" [style.background]="reg_email.length>0?(reg_email_valid && reg_email_exists == false)?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_email" name="reg_email" type="text" maxlength="100" placeholder="E-Mail" title="Gib hier deine E-Mail ein" style="padding-top:7px;padding-bottom:7px;margin-top: 0.2em;"/>\n                      <div *ngIf="reg_email_exists" style="padding: 5px;color: white;">Ein User mit dieser E-Mail existiert leider bereits!</div>\n\n                      <input [(ngModel)]="reg_password" (keyup)="keyupRegisterPassword();keyupRegisterPasswordRepeat();" [style.background]="(reg_password_repeat.length>0 || reg_password.length>0)?reg_password_valid?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_password" name="reg_password" type="password" maxlength="30" placeholder="Passwort (Mind. 6 Zeichen)" title="Gib hier dein Passwort ein" style="padding-top:7px;padding-bottom:7px;margin-top: 0.2em;"/>\n\n                      <input [(ngModel)]="reg_password_repeat" (keyup)="keyupRegisterPasswordRepeat();keyupRegisterPassword();" [style.background]="(reg_password_repeat.length>0 || reg_password.length>0)?reg_password_repeat_valid?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_password_repeat" name="reg_password_repeat" type="password" maxlength="30" placeholder="Wiederhole dein Passwort" title="Wiederhole hier dein Passwort" style="padding-top:7px;padding-bottom:7px;margin-top: 0.2em;"/>\n\n                      <select [(ngModel)]="reg_faculty_id" name="reg_department" style="font-size:1em;background:#eeeeee;padding-top: 7px;padding-bottom: 7px;margin-top: 0.2em;">\n                        <option value="-2">W√§hle deine Fakult√§t</option>\n                        <option *ngFor="let t_faculty of getUniversalContentFacultyArray();" value=\'{{t_faculty.faculty_id}}\'>{{t_faculty.facultyname}}</option>\n                      </select>\n\n                      <div style="margin:10px 5px;float:left;">\n                        <input id="reg_bed" style="width:20px;height:20px;" name="reg_bed" type="checkbox" value="bed">\n                      </div>\n                      <div style="color:white;margin:10px 5px;">Ich stimme den <a style="color:rgb(210,210,210);cursor:pointer;text-decoration: underline;" (click)="navigateToLegal(\'tou\')" target="_blank">AGB</a> sowie der <a style="color:rgb(210,210,210);cursor:pointer;text-decoration: underline;" (click)="navigateToLegal(\'pp\')" target="_blank">Datenschutzerkl√§rungen</a> zu</div>\n                      <div style="clear:both;"></div>\n\n                      <div (click)="registerLoggedUser()" id="buttonReg">Jetzt registrieren</div>\n                </form>\n\n\n            </div>\n        </section>\n\n\n        <!-- "Delete ACC" AND "Go to Settings" for Non-Anonymous Player -->\n        <section id="deleteAcc">\n            <div style="padding:0px 10px;">\n\n                <input (click)="deleteUser()" type="button" id="buttonDeleteAcc" value="L√∂sche meinen Account" style="width:100%;"/>\n                <input (click)="navigateToComponent(\'usersettings\')" type="button" id="buttonSettingsAcc" value="Meine Einstellungen" style="width:100%;margin-top:5px;"/>\n\n            </div>\n        </section>\n\n\n        <!-- Nav -->\n        <nav class="nav">\n            <ul>\n                <li [class.current_page_item]="showncomponent==\'legal\' && legalcomponent==\'tou\'"><a (click)="navigateToLegal(\'tou\')" style="cursor:pointer;">Nutzungsbedingungen</a></li>\n                <li [class.current_page_item]="showncomponent==\'legal\' && legalcomponent==\'pp\'"><a (click)="navigateToLegal(\'pp\')" style="cursor:pointer;">Datenschutzerkl√§rung</a></li>\n                <li [class.current_page_item]="showncomponent==\'legal\' && legalcomponent==\'impressum\'"><a (click)="navigateToLegal(\'impressum\')" style="cursor:pointer;">Impressum</a></li>\n            </ul>\n        </nav>\n\n      </div>\n      <!-- /#sidebar-wrapper -->\n\n      <!-- Page Content -->\n      <div id="page-content-wrapper" style="padding:0;">\n\n        <div id="titleBar" class="hidden-sm hidden-md hidden-lg">\n          <div class="toggleLeft" (click)="toggled=toggled?false:true;"></div><div class="reloadButton" onclick="location.reload();"></div>\n        </div>\n\n        <div style="padding:15px;">\n\n          <div class="container-fluid">\n\n            <div id="content">\n\n              <!-- Routing Logged User -->\n              <tasks-component *ngIf="showncomponent==\'tasks\'" [user]="user" [universalcontent]="universalcontent"></tasks-component>\n              <quest-component *ngIf="showncomponent==\'quest\'" [user]="user" [universalcontent]="universalcontent" [quest_id]="quest_id"></quest-component>\n              <badge-component *ngIf="showncomponent==\'badge\'" [user]="user" [universalcontent]="universalcontent" [badge_id]="badge_id"></badge-component>\n              <userprogress-component *ngIf="showncomponent==\'userprogress\'" [user]="user" [universalcontent]="universalcontent"></userprogress-component>\n              <legal-component *ngIf="showncomponent==\'legal\'" [user]="user" [legalcomponent]="legalcomponent" [universalcontent]="universalcontent"></legal-component>\n              <usersettings-component *ngIf="showncomponent==\'usersettings\'" [user]="user" [universalcontent]="universalcontent"></usersettings-component>\n              <statistics-component *ngIf="showncomponent==\'statistics\'" [user]="user" [universalcontent]="universalcontent"></statistics-component>\n              <highscorelist-component *ngIf="showncomponent==\'highscorelist\'" [user]="user" [universalcontent]="universalcontent" [highscorepage]="highscorepage"></highscorelist-component>\n              <tasksearch-component *ngIf="showncomponent==\'tasksearch\'" [user]="user" [universalcontent]="universalcontent"></tasksearch-component>\n              <task-component *ngIf="showncomponent==\'task\'" [user]="user" [universalcontent]="universalcontent" [task_id]="task_id" [additionalinformation]="additionalinformation"></task-component>\n              <administration-component *ngIf="showncomponent==\'administration\'" [user]="user" [universalcontent]="universalcontent" (reload)="lService.loadUniversalContent();"></administration-component>\n\n              <footer id="is-footer">\n                <hr style="width:100%">\n              </footer>\n\n\n            </div>\n\n          </div>\n        </div>\n      </div>\n      <!-- /#page-content-wrapper -->\n\n  </div>\n  <!-- -->\n\n  <!-- Overlay -->\n  <div *ngFor="let solvedOverlayDataObject of solvedOverlayArray;let i = index;">\n    <solvedoverlay-component [user]="user" [universalcontent]="universalcontent" [solveddata]="solvedOverlayDataObject" (closeOverlay)="removeFromSolvedOverlayArray(i);"></solvedoverlay-component>\n  </div>\n\n\n  <!-- Dialog -->\n  <div id="dialog-confirm" style="display:none;">\n    <div id="dialog-content"></div>\n  </div>\n\n  '}),s("design:paramtypes",[r.Router,r.ActivatedRoute,o.LibgameService])],e)}();t.LoggedcontentComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1}),"string"==typeof this.quest_id&&0!=this.quest_id.length&&this.lService.loadSpecificContent("quest&quest_id="+this.quest_id)},e.prototype.ngOnChanges=function(e){for(var t in e){var n=e[t],i=n.previousValue,s=n.currentValue;"quest_id"==t&&i!=s&&this.lService.loadSpecificContent("quest&quest_id="+s)}},e.prototype.getQuestData=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.QUEST_DATA?{json_quest_task_ids:[],score_rule:0,is_starter_quest:"0",is_active:"1"}:this.specificcontent.QUEST_DATA},e.prototype.getProgressPreQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.PROGRESS_PRE_QUESTS?[]:this.specificcontent.PROGRESS_PRE_QUESTS},e.prototype.getUserQuest=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.USER_QUEST?{completed:"0",ts_quest_completed:""}:this.specificcontent.USER_QUEST},e.prototype.getProgressTasks=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.PROGRESS_TASKS?[]:this.specificcontent.PROGRESS_TASKS},e.prototype.getProgressTasksArrayForView=function(){if($.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.PROGRESS_TASKS)return[];var e=[];for(var t in this.specificcontent.PROGRESS_TASKS)if("object"==typeof this.getProgressTasks()[t]&&1==this.getProgressTasks()[t].completed)e.push(this.getProgressTasks()[t]);else if("object"==typeof this.getProgressTasks()[t])return e.push(this.getProgressTasks()[t]),e;return e},e.prototype.getTaskArrayForProgressTasksArrayKey=function(e){var t=[];for(var n in this.getProgressTasks()[e])"object"==typeof this.getProgressTasks()[n]&&t.push(this.getProgressTasks()[e][n]);return t},e.prototype.navigateToQuest=function(e){this.router.navigate(["/l/quest",e])},e.prototype.navigateToTask=function(e){
this.router.navigate(["/l/task",e])},e.prototype.navigateToBadge=function(e){this.router.navigate(["/l/badge",e])},e.prototype.isQuestCompleted=function(){return"undefined"!=typeof this.getUserQuest().completed&&"1"==this.getUserQuest().completed},e.prototype.getNumberOfCompletedLevels=function(){var e=0;for(var t in this.getProgressTasks())if("object"==typeof this.getProgressTasks()[t]){if(1!=this.getProgressTasks()[t].completed)return e;e++}return e},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"quest_id",void 0),e=i([a.Component({selector:"quest-component",providers:[r.LibgameService],template:'\n\n<div class="row">\n\n    <div class="col-xs-12" style="padding:0;">\n\n        <!-- Overview of quest -->\n        <div id="cf-qu-overview" class="content-frame">\n\n            <div class="content-quest-frame" style="width: 100%!important;padding: 0!important;margin: 0!important;border-radius: 0;">\n                <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                    <div class="depend-on-device-left-to-none-float" style="font-size:1.5em;font-weight:bold;text-decoration:underline;">{{\'Quest: \'+getQuestData()?.questname}}</div>\n                    <div class="depend-on-device-right-to-none-float" style="font-size:1.2em;margin-top:0.2em;"><span style="font-size:1.2em;font-weight:bold;">+{{getQuestData()?.score_rule}}</span> Exp.</div>\n                    <div style="clear:both;"></div>\n                </div>\n            </div>\n\n            <div *ngIf="isQuestCompleted()" style="width:100%;padding: 0!important;">\n              <p class=\'headline\' style="background:rgb(120,255,120);">\n                  Du hast diesen Quest bereits gel√∂st.\n                  <br>\n                  Gel√∂st am: {{lService.getFormatedDate(getUserQuest().ts_quest_completed)}}\n              </p>\n            </div>\n\n\n\n            <div style="padding:1em 1em;width:100%;max-width:30em;margin-left:auto;margin-right:auto;">\n\n                <div style="display:table;border-spacing:0 2px;width:100%;">\n\n                    <div style="display:table-row;width:100%;background:#eeeeee;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Erfahrung</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;">+{{getQuestData()?.score_rule}}\n                          <span [hidden]="!isQuestCompleted()" class=\'fa fa-check-square\' style=\'color:rgb(0,150,0);background:transparent;\'></span>\n                          <span [hidden]="isQuestCompleted()" class=\'fa fa-minus-square\' style=\'color:rgb(150,0,0);background:transparent;\'></span>\n                        </div>\n                    </div>\n\n                    <div style="display:table-row;width:100%;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Dein Fortschritt</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;">\n                          <span style="color:green;">{{getNumberOfCompletedLevels()}}</span> / {{getProgressTasks().length}}\n                        </div>\n                    </div>\n\n                    <div style="display:table-row;width:100%;background:#eeeeee;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Deine gesammelten Exp.</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;color:green!important;">\n                          +{{isQuestCompleted()?getQuestData()?.score_rule:\'0\'}}\n                        </div>\n                    </div>\n\n                    <div style="display:table-row;width:100%;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Starterquest</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;">\n                          {{getQuestData().is_starter_quest==\'1\'?\'Yes\':\'No\'}}\n                        </div>\n                    </div>\n\n\n                </div>\n\n\n                <div style="text-align:center;margin-top:0.5em;">Ben√∂tigte Vorquests</div>\n\n                  <div [hidden]="getProgressPreQuests().length != 0" id=\'cf-qu-overview-no-pre-quests\' style=\'font-weight:bold;font-size:1em;color:rgb(0,0,0);margin-bottom:0.3em;margin-top:0.2em;\'>Es werden keine Vorquests ben√∂tigt</div>\n\n                  <div *ngFor="let t_quest of getProgressPreQuests();" id=\'cf-qu-overview-pre-quest\' style=\'overflow:hidden;cursor:pointer;font-weight:bold;font-size:1.2em;color:rgb(255,255,255);border:0px solid rgb(0,0,0);border-radius:4px;padding:0.2em 0.3em;background:rgb(50,50,50);\' (click)="navigateToQuest(t_quest.quest_id)">\n                    {{t_quest.questname}}<br>\n                    <button [hidden]="!t_quest.completed" class=\'fa fa-check-square\' style=\'padding:0;font-size:1em;color:rgb(0,150,0);border:0;margin:0;background:transparent;margin-left:5px;float:right;\'></button>\n                    <button [hidden]="t_quest.completed" class=\'fa fa-minus-square\' style=\'padding:0;font-size:1em;color:rgb(150,0,0);border:0;margin:0;background:transparent;margin-left:5px;float:right;\'></button>\n                  </div>\n\n            </div>\n            <div style="clear:both;"></div>\n\n        </div>\n\n\n        <div [hidden]="getQuestData().is_active==\'1\'" class="content-frame" >\n            <p class=\'headline\' style="background:rgb(255,120,120);">\n              Der Quest ist nicht l√§nger aktiv\n            </p>\n        </div>\n\n        <div [hidden]="getQuestData().is_active!=\'1\'" id="cf-qu-quest-progress" class="content-frame">\n\n            <p class="headline">Dein Fortschritt</p>\n\n\n            <div *ngFor="let t_tasklevelinfo of getProgressTasksArrayForView(); let i = index;" class="cf-qu-quest-progress-step"style="margin-top:1em;">\n                <p class="cf-qu-quest-progress-step-headline" style="text-align:center;width:100%;">Stufe {{i+1}}/{{getProgressTasks().length}}\n\n                  <span class=\'fa\'\n                    [class.fa-check-square]="t_tasklevelinfo.completed"\n                    [class.fa-minus-square]="!t_tasklevelinfo.completed"\n                    [style.color]="t_tasklevelinfo.completed?\'rgb(0,150,0)\':\'rgb(150,0,0)\'" style=\'padding:0;font-size:1em;border:0;margin:0;background:transparent;margin-left:5px;\'></span>\n                </p>\n\n                <div class="cf-qu-quest-progress-step-tasks" style="padding:0 1.5em;">\n                  <div *ngFor="let t_taskarray of getTaskArrayForProgressTasksArrayKey(i); let i_t = in" (click)="navigateToTask(t_taskarray.task_id)" class="content-task-frame" style="width:100%;">\n                      <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                          <div style="float:left;">Aufgabe: {{t_taskarray.taskname}}</div>\n                          <button class=\'fa fa-check-square\'\n                          [class.fa-check-square]="t_taskarray.completed"\n                          [class.fa-minus-square]="!t_taskarray.completed"\n                          [style.color]="t_taskarray.completed?\'rgb(20,100,20)!important\':\'rgb(100,20,20)!important\'" style=\'padding:0;font-size:1.5em!important;border:0;margin:0;background:transparent;margin-left:5px;float:right;\'></button>\n                          <div style="clear:both;"></div>\n                      </div>\n                  </div>\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n\n\n</div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.QuestComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.closeOverlay=new a.EventEmitter,this.stars=[]}return e.prototype.ngOnInit=function(){this.stars=[{show:!1,opacity:1},{show:!1,opacity:1},{show:!1,opacity:1},{show:!1,opacity:1},{show:!1,opacity:1}],this.animateStar(0),this.animateStar(1),this.animateStar(2),this.animateStar(3),this.animateStar(4)},e.prototype.getType=function(){return"undefined"!=typeof this.solveddata.type?this.solveddata.type:-1},e.prototype.getName=function(){return"undefined"!=typeof this.solveddata.name?this.solveddata.name:""},e.prototype.getSolvedDescription=function(){return"undefined"!=typeof this.solveddata.solved_description?this.solveddata.solved_description:""},e.prototype.getScoreRule=function(){return"undefined"!=typeof this.solveddata.score_rule?this.solveddata.score_rule:""},e.prototype.getFacultyScoreRule=function(){return"undefined"!=typeof this.solveddata.faculty_score_rule?this.solveddata.faculty_score_rule:""},e.prototype.getSolvedQuests=function(){return"undefined"!=typeof this.solveddata.solved_quests?this.solveddata.solved_quests:""},e.prototype.getSolvedBadges=function(){return"undefined"!=typeof this.solveddata.solved_badges?this.solveddata.solved_badges:""},e.prototype.animateStar=function(e){var t=this,n=0;this.stars[e].opacity=.5+.5*Math.random(),0==this.stars[e].show?(this.stars[e].show=!0,n=500*Math.random()):(this.stars[e].show=!1,n=3500*Math.random()),setTimeout(function(e){t.animateStar(e)},n,e)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"solveddata",void 0),i([a.Output(),s("design:type",Object)],e.prototype,"closeOverlay",void 0),e=i([a.Component({selector:"solvedoverlay-component",providers:[r.LibgameService],template:'\n\n        <div class="overlay" style="display: block;">\n          <div class="overlay_lightbox" style="height: auto;">\n            <div class="overlay_buttons" style="text-align: right;">\n              <div class="button" (click)="closeOverlay.emit(true);" style="width: 50px; float: right; margin-right: 5px; margin-top: 5px;text-align: center;">X</div>\n            </div>\n            <div class="overlay_content">\n              <div style="position:relative;">\n                <img class="star-1" [hidden]="stars[0].show==false" [style.opacity]="stars[0].opacity" src="./../public/images/star1.png" style="width: 50px; height: 50px;">\n                <img class="star-2" [hidden]="stars[1].show==false" [style.opacity]="stars[1].opacity" src="./../public/images/star1.png" style="width: 50px; height: 50px;">\n                <img class="star-3" [hidden]="stars[2].show==false" [style.opacity]="stars[2].opacity" src="./../public/images/star1.png" style="width: 50px; height: 50px;">\n                <img class="star-4" [hidden]="stars[3].show==false" [style.opacity]="stars[3].opacity" src="./../public/images/star2.png" style="width: 50px; height: 50px;">\n                <img class="star-5" [hidden]="stars[4].show==false" [style.opacity]="stars[4].opacity" src="./../public/images/star2.png" style="width: 50px; height: 50px;">\n              </div>\n              <p class="headline" style="font-size:1.4em!important;font-weight:bold!important;width:90%;margin-left:auto;margin-right:auto;padding-top:1em;text-align:center;">\n                {{getName()}}\n              </p>\n              <p [hidden]="getType() != 1 && getType() != 3" class="headline2" style="width:90%;margin-left:auto;margin-right:auto;text-align:center;">\n                Deine Erfahrung: +{{getScoreRule()}} EXP. <br>\n                Fakult√§tsscore: +{{getFacultyScoreRule()}} EXP.\n              </p>\n              <div [innerHTML]="getSolvedDescription()" [style.padding-bottom]="getSolvedQuests().length == 0 && getSolvedBadges().length == 0? \'50px\':\'10px\'" style="width:90%;margin-left:auto;margin-right:auto;">\n              </div>\n              <div [hidden]="getSolvedQuests().length == 0" [style.padding-bottom]="getSolvedBadges().length == 0? \'50px\':\'10px\'" style="width:90%;margin-left:auto;margin-right:auto;">\n                Damit hast du folgende Quests ebenfalls abgeschlossen:<br />\n                <div [innerHTML]="getSolvedQuests()"></div>\n              </div>\n              <div [hidden]="getSolvedBadges().length == 0" style="width:90%;margin-left:auto;margin-right:auto;padding-bottom:50px;">\n                Damit hast du folgende Abzeichen ebenfalls erhalten:<br />\n                <div [innerHTML]="getSolvedBadges()"></div>\n              </div>\n            </div>\n          </div>\n        </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.SolvedOverlayComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0,this.user_score_period_active="10d",this.user_task_period_active="10d"}return e.prototype.ngOnInit=function(){var e=this;this.user_score_period_active="10d",this.user_task_period_active="10d",this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1,e.initFacultyChart(),e.updateChartUserScore(10,0,0,!0),e.updateChartUserTasks(10,0,0,!0)}),this.lService.loadSpecificContent("statistics")},e.prototype.getStatistics=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Statistics?{}:this.specificcontent.Statistics},e.prototype.getLastCompletedQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Last_Completed_Quests?[]:this.specificcontent.Last_Completed_Quests},e.prototype.getLastCompletedBadges=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Last_Completed_Badges?[]:this.specificcontent.Last_Completed_Badges},e.prototype.getLastCompletedTasks=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Last_Completed_Tasks?[]:this.specificcontent.Last_Completed_Tasks},e.prototype.getFaculties=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Faculties?[]:this.specificcontent.Faculties},e.prototype.getBestUsers=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Best_Users?[]:this.specificcontent.Best_Users},e.prototype.getBestUsersForFaculty=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Best_Users_For_Faculty?[]:this.specificcontent.Best_Users_For_Faculty},e.prototype.getCountBadges=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Badges?0:this.specificcontent.Count_Badges},e.prototype.getCountQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Count_Quests?0:this.specificcontent.Count_Quests},e.prototype.navigateToQuest=function(e){this.router.navigate(["/l/quest",e])},e.prototype.navigateToTask=function(e){this.router.navigate(["/l/task",e])},e.prototype.navigateToBadge=function(e){this.router.navigate(["/l/badge",e])},e.prototype.navigateToComponent=function(e){this.router.navigate(["/l/"+e])},e.prototype.updateChartUserScore=function(e,t,n,i){var s={},a="undefined"!=typeof this.getStatistics().User_Statistic_2?this.getStatistics().User_Statistic_2.json_statistic:[];for(var o in a)s[o]={},s[o].data=a[o].data,s[o].ts=a[o].ts;var r=this.lService.getLabelsAndDataForChart(JSON.stringify(s),e,t,n,"normal_comb"),d={labels:$.map(r.labels,function(e){return e}),datasets:[{strokeColor:"rgba(251,78,0,1)",pointColor:"rgba(251,78,0,1)",pointStrokeColor:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:$.map(r.data,function(e){return e})}]},l={animation:!1,responsive:!0,scaleFontColor:"#000",bezierCurve:!1,datasetFill:!1,scaleOverride:!0,scaleSteps:8,scaleStepWidth:Math.ceil(r.data[Object.keys(r.data).length-1]/8)+1,scaleStartValue:0,scaleLineColor:"rgba(0,0,0,.6)",scaleGridLineColor:"rgba(0,0,0,.2)",graphTitle:"Erfahrung",graphTitleFontSize:18,graphTitleFontColor:"#000"};if("undefined"==typeof i||0==i){var c=document.getElementById("canvas_user_score");updateChart(c.getContext("2d"),d,l,!1,!1)}else{$("#canvas_user_score").attr("width",$("#canvas_user_score").parent().width());var c=document.getElementById("canvas_user_score");new Chart(c.getContext("2d")).Line(d,l)}},e.prototype.updateChartUserTasks=function(e,t,n,i){var s={},a="undefined"!=typeof this.getStatistics().User_Statistic_1?this.getStatistics().User_Statistic_1.json_statistic:[];for(var o in a)s[o]={},s[o].data=a[o].data,s[o].ts=a[o].ts;var r=this.lService.getLabelsAndDataForChart(JSON.stringify(s),e,t,n,"normal_comb"),d={labels:$.map(r.labels,function(e){return e}),datasets:[{strokeColor:"rgba(251,78,0,1)",pointColor:"rgba(251,78,0,1)",pointStrokeColor:"#fff",pointHighlightStroke:"rgba(220,220,220,1)",data:$.map(r.data,function(e){return e})}]},l={animation:!1,responsive:!0,scaleFontColor:"#000",bezierCurve:!1,datasetFill:!1,scaleOverride:!0,scaleSteps:8,scaleStepWidth:Math.ceil(r.data[Object.keys(r.data).length-1]/8)+1,scaleStartValue:0,scaleLineColor:"rgba(0,0,0,.6)",scaleGridLineColor:"rgba(0,0,0,.2)",graphTitle:"Aufgaben",graphTitleFontSize:18,graphTitleFontColor:"#000"};if("undefined"==typeof i||0==i){var c=document.getElementById("canvas_user_tasks");updateChart(c.getContext("2d"),d,l,!1,!1)}else{$("#canvas_user_tasks").attr("width",$("#canvas_user_tasks").parent().width());var c=document.getElementById("canvas_user_tasks");new Chart(c.getContext("2d")).Line(d,l)}},e.prototype.initFacultyChart=function(){for(var e=[],t=[],n=0,i=0,s=this.getFaculties();i<s.length;i++){var a=s[i];e.push(a.facultyname),t.push(a.faculty_score),parseInt(a.faculty_score)>n&&(n=parseInt(a.faculty_score))}var o={labels:e,datasets:[{fillColor:"green",data:t}]},r={animation:!1,responsive:!0,scaleFontColor:"#000",scaleOverride:!0,scaleSteps:8,scaleStepWidth:Math.ceil(n/8)+1,scaleStartValue:0,inGraphDataShow:!0,inGraphDataXPosition:2,inGraphDataAlign:"center",inGraphDataFontColor:"#fff",graphTitle:"Fakult√§tenhighscore",graphTitleFontSize:18,graphTitleFontColor:"#000"};$("#canvas_faculties").attr("width",$("#canvas_faculties").parent().width());var d=document.getElementById("canvas_faculties");new Chart(d.getContext("2d")).HorizontalBar(o,r)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),e=i([a.Component({selector:"statistics-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n    <div class="col-xs-12 col-sm-7" style="padding:0;">\n\n        <!-- USER √úbersicht -->\n        <div id="cf-ho-overview" class="content-frame">\n\n            <p class="headline">Dein Fortschritt</p>\n\n            <div class="depend-on-device-table-to-none" style="width:100%;">\n\n                <div class="depend-on-device-tablerow-to-none" style="vertical-align:top;width:100%;color:rgb(255,255,255);">\n\n                    <div id="cf-ho-overview-stats-quests" class="col-xs-6 col-sm-3" style="vertical-align:top;">\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;">Quests</p>\n                        <p style="font-size:1em;text-align:center;color: black;">{{user?.completed_quests}}/{{getCountQuests()}}</p>\n                        <div style="clear:both;"></div>\n                    </div>\n\n                    <div id="cf-ho-overview-stats-badges" class="col-xs-6 col-sm-3" style="vertical-align:top;">\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;">Abzeichen</p>\n                        <p style="font-size:1em;text-align:center;color: black;">{{user?.completed_badges}}/{{getCountBadges()}}</p>\n                        <div style="clear:both;"></div>\n                    </div>\n\n                    <div id="cf-ho-overview-stats-tasks" class="col-xs-6 col-sm-3" style="vertical-align:top;">\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;">Aufgaben</p>\n                        <p style="font-size:1em;text-align:center;color: black;">{{user?.completed_tasks}}</p>\n                        <div style="clear:both;"></div>\n                    </div>\n\n                    <div id="cf-ho-overview-stats-experience" class="col-xs-6 col-sm-3" style="vertical-align:top;">\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;">Erfahrung</p>\n                        <p style="font-size:1em;text-align:center;color: black;">{{user?.user_score}}</p>\n                        <div style="clear:both;"></div>\n                    </div>\n\n                    <div style="clear:both;"></div>\n\n                </div>\n\n\n            </div>\n\n\n\n        </div>\n\n        <!-- Overview departments -->\n        <div id="cf-ho-statistic-departments" class="content-frame">\n\n            <p class="headline">√úbersicht √ºber die Fakult√§ten</p>\n\n            <div style="width:100%;">\n                <canvas id="canvas_faculties" height="300"></canvas>\n            </div>\n\n        </div>\n\n        <!-- USER SCORE -->\n        <div id="cf-st-user-score" class="content-frame">\n\n            <p class="headline">Deine Erfahrung im Zeitverlauf</p>\n\n            <div style="width:100%;">\n                <div style="display:inline-block;border:2px solid rgb(0,0,0);border-radius:4px;">\n                    <div (click)="updateChartUserScore(10,0,0);user_score_period_active=\'10d\';" [class.whiteButtonClass-currentItem]="user_score_period_active==\'10d\'" [class.whiteButtonClass]="user_score_period_active!=\'10d\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">10 Tage</div>\n                    <div (click)="updateChartUserScore(30,0,0);user_score_period_active=\'30d\';" [class.whiteButtonClass-currentItem]="user_score_period_active==\'30d\'" [class.whiteButtonClass]="user_score_period_active!=\'30d\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">30 Tage</div>\n                    <div (click)="updateChartUserScore(0,6,0);user_score_period_active=\'6m\';" [class.whiteButtonClass-currentItem]="user_score_period_active==\'6m\'" [class.whiteButtonClass]="user_score_period_active!=\'6m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">6 Monate</div>\n                    <div (click)="updateChartUserScore(0,12,0);user_score_period_active=\'12m\';" [class.whiteButtonClass-currentItem]="user_score_period_active==\'12m\'" [class.whiteButtonClass]="user_score_period_active!=\'12m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">12 Monate</div>\n                    <div (click)="updateChartUserScore(0,24,0);user_score_period_active=\'24m\';" [class.whiteButtonClass-currentItem]="user_score_period_active==\'24m\'" [class.whiteButtonClass]="user_score_period_active!=\'24m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">24 Monate</div>\n                    <div (click)="updateChartUserScore(0,0,5);user_score_period_active=\'5y\';" [class.whiteButtonClass-currentItem]="user_score_period_active==\'5y\'" [class.whiteButtonClass]="user_score_period_active!=\'5y\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">5 Jahre</div>\n                    <div style="clear:both;"></div>\n                </div>\n            </div>\n\n            <div style="width:100%;">\n                <canvas id="canvas_user_score" height="400"></canvas>\n            </div>\n\n        </div>\n\n        <!-- USER COMPLETED TASKS -->\n        <div id="cf-st-user-tasks" class="content-frame">\n\n            <p class="headline">Deine gel√∂sten Aufgaben im Zeitverlauf</p>\n\n            <div style="width:100%;">\n                <div style="display:inline-block;border:2px solid rgb(0,0,0);border-radius:4px;">\n                    <div (click)="updateChartUserTasks(10,0,0);user_task_period_active=\'10d\';" [class.whiteButtonClass-currentItem]="user_task_period_active==\'10d\'" [class.whiteButtonClass]="user_task_period_active!=\'10d\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">10 Tage</div>\n                    <div (click)="updateChartUserTasks(30,0,0);user_task_period_active=\'30d\';" [class.whiteButtonClass-currentItem]="user_task_period_active==\'30d\'" [class.whiteButtonClass]="user_task_period_active!=\'30d\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">30 Tage</div>\n                    <div (click)="updateChartUserTasks(0,6,0);user_task_period_active=\'6m\';" [class.whiteButtonClass-currentItem]="user_task_period_active==\'6m\'" [class.whiteButtonClass]="user_task_period_active!=\'6m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">6 Monate</div>\n                    <div (click)="updateChartUserTasks(0,12,0);user_task_period_active=\'12m\';" [class.whiteButtonClass-currentItem]="user_task_period_active==\'12m\'" [class.whiteButtonClass]="user_task_period_active!=\'12m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">12 Monate</div>\n                    <div (click)="updateChartUserTasks(0,24,0);user_task_period_active=\'24m\';" [class.whiteButtonClass-currentItem]="user_task_period_active==\'24m\'" [class.whiteButtonClass]="user_task_period_active!=\'24m\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">24 Monate</div>\n                    <div (click)="updateChartUserTasks(0,0,5);user_task_period_active=\'5y\';" [class.whiteButtonClass-currentItem]="user_task_period_active==\'5y\'" [class.whiteButtonClass]="user_task_period_active!=\'5y\'" class="depend-on-device-none-to-33-percentage-width" style="float:left;padding:5px 10px;">5 Jahre</div>\n                    <div style="clear:both;"></div>\n                </div>\n            </div>\n\n            <div style="width:100%;">\n                <canvas id="canvas_user_tasks" height="400"></canvas>\n            </div>\n\n        </div>\n\n    </div>\n\n    <div class="col-xs-12 col-sm-5 padding-left-10px-sm-md-lg" style="padding:0;">\n\n        <!-- Last gathered quests -->\n        <div id="cf-ho-completed-quests" class="content-frame">\n\n            <p class="headline">Zuletzt gel√∂ste Quests</p>\n\n            <div style="display:table;width:100%;border-spacing:2px 10px!important;color:rgb(255,255,255);">\n\n              <div *ngIf="getLastCompletedQuests().length == 0" (click)="navigateToComponent(\'tasks\')" style=\'width:100%;padding:0 20px;text-align:justify;margin-bottom:1em;\'><span class=\'link\'>Du hast leider noch keine abgeschlossenen Quests. Klicke hier, um zu deinen aktuellen Quests zu gelangen.</span></div>\n\n              <div *ngFor="let t_quest_data of getLastCompletedQuests();" style=\'display:table-row;vertical-align:top;\'>\n                  <div style=\'display:table-cell;vertical-align:top;\'>\n                      <p style=\'font-size:1.1em;text-align:center;\'><span (click)="navigateToQuest(t_quest_data.quest_id)" class=\'link\'>{{t_quest_data.questname}}</span></p>\n                  </div>\n                  <div style=\'display:table-cell;vertical-align:middle;min-width:100px;\'>\n                      <p style=\'font-size:1.1em;text-align:center;\'>+{{t_quest_data.score_rule}} Exp.</p>\n                  </div>\n                  <div style=\'display:table-cell;vertical-align:middle;\'>\n                      <p style=\'font-size:1em;text-align:center;\'>{{lService.getFormatedDate(t_quest_data.ts_quest_completed)}}</p>\n                  </div>\n              </div>\n\n            </div>\n\n        </div>\n\n        <!-- Last gathered badges -->\n        <div id="cf-ho-gathered-badges" class="content-frame">\n\n            <p class="headline">Zuletzt gesammelte Abzeichen</p>\n\n            <div style="display:table;width:100%;border-spacing:2px 10px!important;color:rgb(255,255,255);">\n\n              <div *ngIf="getLastCompletedBadges().length == 0" (click)="navigateToComponent(\'userprogress\')" style=\'width:100%;padding:0 20px;text-align:justify;margin-bottom:1em;\'><span class=\'link\'>Du hast leider noch kein gesammeltes Abzeichen.</span></div>\n\n              <div *ngFor="let t_badge_data of getLastCompletedBadges()" style=\'display:table-row;vertical-align:top;\'>\n                  <div style=\'display:table-cell;vertical-align:top;\'>\n                      <img style=\'width:5em;\' src=\'{{lService.getPictureLink(t_badge_data.picture_id)}}\'>\n                  </div>\n                  <div style=\'display:table-cell;vertical-align:middle;min-width:120px;\'>\n                      <p style=\'font-size:1.1em;text-align:center;\'>{{t_badge_data.badgename}}</p>\n                  </div>\n                  <div style=\'display:table-cell;vertical-align:middle;\'>\n                      <p style=\'font-size:1em;text-align:center;\'>{{lService.getFormatedDate(t_badge_data.ts_badge_completed)}}</p>\n                  </div>\n              </div>\n\n            </div>\n\n        </div>\n\n        <!-- Last completed tasks -->\n        <div id="cf-ho-completed-tasks" class="content-frame">\n\n            <p class="headline">Zuletzt gel√∂ste Aufgaben</p>\n\n            <div style="display:table;width:100%;border-spacing:2px 10px!important;color:rgb(255,255,255);">\n\n              <div *ngIf="getLastCompletedTasks().length == 0" (click)="navigateToComponent(\'tasks\')" style=\'width:100%;padding:0 20px;text-align:justify;margin-bottom:1em;\'><span class=\'link\'>Du hast leider noch keine gel√∂sten Aufgaben. Klicke hier, um zu deinen aktuellen Aufgaben zu gelangen.</span></div>\n\n              <div *ngFor="let t_task_data of getLastCompletedTasks()" style=\'display:table-row;vertical-align:top;\'>\n                  <p style=\'display:table-cell;vertical-align:middle;font-size:1.1em;text-align:center;\'><span (click)="navigateToTask(t_task_data.task_id)" class=\'link\'>{{t_task_data.taskname}}</span></p>\n                  <div style=\'display:table-cell;vertical-align:middle;min-width:100px;\'>\n                      <p style=\'font-size:1.1em;text-align:center;\'>+{{t_task_data.score_rule}} Exp.</p>\n                  </div>\n                  <div style=\'display:table-cell;vertical-align:middle;\'>\n                      <p style=\'font-size:1em;text-align:center;\'>{{lService.getFormatedDate(t_task_data.ts_last_update)}}</p>\n                  </div>\n              </div>\n\n            </div>\n\n\n        </div>\n\n        <!-- Best Users -->\n        <div id="cf-ho-best-users" class="content-frame">\n\n            <p class="headline"><span (click)="navigateToComponent(\'highscorelist/0\')" class="link">Die besten User</span></p>\n\n            <div style="display:table;width:100%;border-spacing:2px 2px;color:rgb(255,255,255);">\n\n\n                <div style=\'display:table-row;width:100%;\'>\n\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">NAME</p>\n                    </div>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">EXP.</p>\n                    </div>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">FAK.</p>\n                    </div>\n\n                </div>\n\n                <div *ngFor="let t_user of getBestUsers()" style=\'display:table-row;vertical-align:top;\'>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style=\'font-size:1em;text-align:center;\'>{{t_user.username}}</p>\n                    </div>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style=\'font-size:1.1em;text-align:center;\'>{{t_user.user_score}}</p>\n                    </div>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style=\'font-size:1em;text-align:center;\'>{{t_user.facultyname}}</p>\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n        <!-- Best Users for Users Faculty -->\n        <div id="cf-ho-best-users-faculty" class="content-frame">\n\n            <p class="headline">Die besten User deiner Fakult√§t</p>\n\n            <div style="display:table;width:100%;border-spacing:2px 2px;color:rgb(255,255,255);">\n\n\n                <div style=\'display:table-row;width:100%;\'>\n\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">NAME</p>\n                    </div>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;text-decoration:underline;">EXP.</p>\n                    </div>\n\n                </div>\n\n                <div *ngFor="let t_user of getBestUsersForFaculty()" style=\'display:table-row;vertical-align:top;\'>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style=\'font-size:1em;text-align:center;\'>{{t_user.username}}</p>\n                    </div>\n                    <div style=\'display:table-cell;vertical-align:top;\'>\n                        <p style=\'font-size:1.1em;text-align:center;\'>{{t_user.user_score}}</p>\n                    </div>\n                </div>\n\n            </div>\n\n        </div>\n\n\n    </div>\n\n\n  </div>\n\n  '
}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.StatisticsComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0,this.shuffleArrayTaskType1=[1,2,3,4],this.shuffleArrayTaskType4=[1,2,3],this.successfullSolved=!1,this.notSuccessfullSolved=!1,this.solvedOverlayArray=[]}return e.prototype.ngOnInit=function(){var e=this;this.successfullSolved=!1,this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){console.log("Specific Content"),console.log(t),"undefined"!=typeof t.TASK_DATA&&"undefined"!=typeof t.TASK_DATA.json_task_data&&(t.TASK_DATA.json_task_data=JSON.parse(t.TASK_DATA.json_task_data)),e.shuffle(e.shuffleArrayTaskType1),e.shuffle(e.shuffleArrayTaskType4),e.specificcontent=t,e.loading_specificcontent=!1,"3"==e.getTaskData().task_type_id&&setTimeout(function(){e.initBarcodeReader()},300),"6"!=e.getTaskData().task_type_id||0==e.additionalinformation.length||isNaN(parseFloat(e.additionalinformation))||e.solveTaskType6(e.additionalinformation)}),this.lService.loadSpecificContent("task&task_id="+this.task_id)},e.prototype.getTaskBlockedData=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.TASK_BLOCKED_DATA?{}:this.specificcontent.TASK_BLOCKED_DATA},e.prototype.getUserTaskScore=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.USER_TASK_SCORE?{value:"0",score:"0"}:this.specificcontent.USER_TASK_SCORE},e.prototype.getTaskData=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.TASK_DATA?{task_type_id:"0",json_task_data:{},needed_value:"0",score_rule:"1"}:this.specificcontent.TASK_DATA},e.prototype.getQuestsContainingTaskId=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.QUESTS_CONTAINING_TASK_ID?[]:this.specificcontent.QUESTS_CONTAINING_TASK_ID},e.prototype.getIsTaskBlocked=function(){return"undefined"!=typeof this.getTaskBlockedData().ts_blocked&&0!=(this.getTaskBlockedData().ts_blocked+"").length},e.prototype.getIsTaskSolvedByUser=function(){return parseFloat(this.getUserTaskScore().value)>=parseFloat(this.getTaskData().needed_value)},e.prototype.getIsTaskActive=function(){return"1"==this.getTaskData().is_task_active},e.prototype.navigateToQuest=function(e){this.router.navigate(["/l/quest",e])},e.prototype.solveTaskOverall=function(e,t){var n=this;this.lService.solveTask(e,t).subscribe(function(e){if(console.log(e),"undefined"!=typeof e.result&&1==e.result&&"undefined"!=typeof e.data&&"undefined"!=typeof e.data.task_solved&&1==e.data.task_solved){n.successfullSolved=!0;var t="",i="";if("undefined"!=typeof e.data.badges)for(var s in e.data.badges)t+="-"+e.data.badges[s].badgename+"<br />",n.solvedOverlayArray.push({type:2,name:"Abzeichen erhalten",solved_description:"Herzlichen Gl√ºckwunsch! Du hast das Abzeichen '"+e.data.badges[s].badgename+"' abgeschlossen.<br /><img src='"+n.lService.getPictureLink(e.data.badges[s].picture_id)+"' />"});if("undefined"!=typeof e.data.quests)for(var a in e.data.quests)i+="-"+e.data.quests[a].questname+"<br />",n.solvedOverlayArray.push({type:3,name:"Quest erf√ºllt",solved_description:"Herzlichen Gl√ºckwunsch! Du hast den Quest '"+e.data.quests[a].questname+"' abgeschlossen.",score_rule:e.data.quests[a].score_rule,faculty_score_rule:e.data.quests[a].score_rule});if("undefined"!=typeof e.data.tasks)for(var o in e.data.tasks)n.solvedOverlayArray.push({type:1,name:"Aufgabe erf√ºllt",solved_description:"Herzlichen Gl√ºckwunsch! Du hast die Aufgabe '"+e.data.tasks[o].taskname+"' abgeschlossen.",score_rule:e.data.tasks[o].score_rule,faculty_score_rule:e.data.tasks[o].score_rule,solved_quests:i,solved_badges:t});n.lService.loadSpecificContent("task&task_id="+n.task_id)}else window.alert("Leider hast du die Aufgabe nicht erfolgreich gel√∂st! Bitte versuche es erneut!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!")})},e.prototype.getTaskType1Answer=function(e){return"undefined"==typeof this.user.language||0==this.user.language.length||$.isEmptyObject(this.getTaskData().json_task_data)?{id:"",answer:""}:{id:"a"+this.shuffleArrayTaskType1[e],answer:this.getTaskData().json_task_data[this.user.language]["a"+this.shuffleArrayTaskType1[e]]}},e.prototype.solveTaskType1=function(e){var t=JSON.stringify({chosenanswer:this.getTaskType1Answer(e).id});this.solveTaskOverall(t,this.task_id)},e.prototype.solveTaskType2=function(e){},e.prototype.solveTaskType3=function(e){var t=JSON.stringify({isbn:e});this.solveTaskOverall(t,this.task_id)},e.prototype.initBarcodeReader=function(){var e=this,t=document.querySelector("#upload-barcode-pic"),n=document.createElement("img"),i=document.querySelector("#cf-tas-specification-task-3-result-text"),s=document.getElementById("task-3-picture"),a=s.getContext("2d");JOB.Init(),JOB.SetImageCallback(function(t){if(t.length>0){for(var n=[],s=0;s<t.length;s++)n.push("Gefundene ISBN : "+t[s].Value);i.innerHTML=n.join("<br />"),e.solveTaskType3(t[0].Value+"")}else 0===t.length&&(i.innerHTML="Dekodieren ist leider fehlgeschlagen. Bitte versuche es mit einem Bild von besserer Qualit√§t!")}),JOB.PostOrientation=!0,JOB.OrientationCallback=function(e){s.width=e.width,s.height=e.height;for(var t=a.getImageData(0,0,s.width,s.height),n=0;n<t.data.length;n++)t.data[n]=e.data[n];a.putImageData(t,0,0)},JOB.SwitchLocalizationFeedback(!0),JOB.SetLocalizationCallback(function(e){a.beginPath(),a.lineWIdth="2",a.strokeStyle="red";for(var t=0;t<e.length;t++)a.rect(e[t].x,e[t].y,e[t].width,e[t].height);a.stroke()}),t&&n&&(t.onchange=function(e){$("#task-3-picture").show();var t=e.target.files;if(t&&t.length>0){var s=t[0];try{var a=window.URL||window.webkitURL;n.onload=function(e){i.innerHTML="",JOB.DecodeImage(n),a.revokeObjectURL(n.src)},n.src=a.createObjectURL(s)}catch(o){try{var r=new FileReader;r.onload=function(e){n.onload=function(e){i.innerHTML="",console.log("filereader"),JOB.DecodeImage(n)},n.src=e.target.result},r.readAsDataURL(s)}catch(o){i.innerHTML="Neither createObjectURL or FileReader are supported"}}}})},e.prototype.getTaskType4Answer=function(e){return"undefined"==typeof this.user.language||0==this.user.language.length||$.isEmptyObject(this.getTaskData().json_task_data)?{id:"",answer:""}:{id:"s"+this.shuffleArrayTaskType4[e],answer:this.getTaskData().json_task_data[this.user.language]["s"+this.shuffleArrayTaskType4[e]]}},e.prototype.exchangeShuffleArrayPosition=function(e,t){var n=this.shuffleArrayTaskType4[e];this.shuffleArrayTaskType4[e]=this.shuffleArrayTaskType4[t],this.shuffleArrayTaskType4[t]=n},e.prototype.solveTaskType4=function(){var e=JSON.stringify({1:"s"+this.shuffleArrayTaskType4[0],2:"s"+this.shuffleArrayTaskType4[1],3:"s"+this.shuffleArrayTaskType4[2]});this.solveTaskOverall(e,this.task_id)},e.prototype.getTaskType5TextWithoutBlankStatement=function(){return"undefined"==typeof this.user.language||0==this.user.language.length||$.isEmptyObject(this.getTaskData().json_task_data)?{text:""}:{text:this.getTaskData().json_task_data[this.user.language].text.replace("[::BLANK::]","___")}},e.prototype.solveTaskType5=function(){var e=JSON.stringify({text:$("#input-specification-task-blank").val()});this.solveTaskOverall(e,this.task_id)},e.prototype.solveTaskType6=function(e){var t=JSON.stringify({loc:e});this.solveTaskOverall(t,this.task_id)},e.prototype.removeFromSolvedOverlayArray=function(e){this.solvedOverlayArray.splice(e,1)},e.prototype.shuffle=function(e){for(var t=e.length;t;t--){var n=Math.floor(Math.random()*t);i=[e[n],e[t-1]],e[t-1]=i[0],e[n]=i[1]}var i},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"task_id",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"additionalinformation",void 0),e=i([a.Component({selector:"task-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n    <div class="col-xs-12" style="padding:0;">\n\n        <div *ngIf="getIsTaskBlocked()" class="content-frame">\n\n            <div class="content-task-frame" style="margin:0px;border-radius:0px;width:100%!important;">\n                <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                    <div style="font-size:1.5em!important;">Aufgabe: {{getTaskData().taskname}}</div>\n                    <br>\n                    <div id="task-description-healine" [innerHTML]="getTaskData().description_long"></div>\n                    <div style="clear:both;"></div>\n                </div>\n            </div>\n\n            <p class=\'headline\' style="background:rgb(255,120,120);">\n                Diese Aufgabe ist zur Zeit f√ºr dich nicht l√∂sbar.\n                <br>\n                Wieder l√∂sbar ab: {{lService.getFormatedDate(getTaskBlockedData().ts_blocked)}}\n            </p>\n        </div>\n\n        <div *ngIf="getIsTaskSolvedByUser()" class="content-frame">\n\n            <div class="content-task-frame" style="margin:0px;border-radius:0px;width:100%!important;">\n                <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                    <div style="font-size:1.5em!important;">Aufgabe: {{getTaskData().taskname}}</div>\n                    <br>\n                    <div id="task-description-healine" [innerHTML]="getTaskData().description_long"></div>\n                    <div style="clear:both;"></div>\n                </div>\n            </div>\n\n            <p class=\'headline\' style="background:rgb(120,255,120);">\n                Du hast diese Aufgabe bereits gel√∂st.\n                <br>\n                Gel√∂st am: {{lService.getFormatedDate(getUserTaskScore().ts_last_update)}}\n            </p>\n        </div>\n\n        <div *ngIf="!getIsTaskActive()" class="content-frame" >\n            <p class=\'headline\' style="background:rgb(255,120,120);">\n                Diese Aufgabe ist nicht l√§nger aktiv!\n            </p>\n        </div>\n\n        <!-- Specific Task Data -->\n        <div *ngIf="!getIsTaskBlocked() && !getIsTaskSolvedByUser() && getIsTaskActive()" id="cf-tas-specification-task" class="content-frame" style="padding-bottom: 10px;">\n\n            <div class="content-task-frame" style="margin:0px;border-radius:0px;width:100%!important;">\n                <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                    <div style="font-size:1.5em!important;">Aufgabe: {{getTaskData().taskname}}</div>\n                    <br>\n                    <div id="task-description-healine" [innerHTML]="getTaskData().description_long"></div>\n                    <div style="clear:both;"></div>\n                </div>\n            </div>\n\n            <!-- Task Type 1 -->\n            <div *ngIf="getTaskData().task_type_id==1" class=\'cf-tas-specification-task-1 depend-on-device-table-to-none\' style=\'width:100%;border-spacing:10px 15px;margin-top:5px;\'>\n                <div class=\'depend-on-device-tablerow-to-none\' style=\'width:100%;\'>\n\n                    <div (click)="solveTaskType1(0)" [innerHTML]="getTaskType1Answer(0).answer" class=\'cf-tas-specification-task-1-answer depend-on-device-tablecell-to-none depend-on-device-none-to-inlineblock depend-on-device-fifty-to-hundred-percentage-width\' style=\'text-align:center;vertical-align:middle;margin-bottom:0.2em;\'>\n                    </div>\n\n                    <div (click)="solveTaskType1(1)" [innerHTML]="getTaskType1Answer(1).answer" class=\'cf-tas-specification-task-1-answer depend-on-device-tablecell-to-none depend-on-device-none-to-inlineblock depend-on-device-fifty-to-hundred-percentage-width\' style=\'text-align:center;vertical-align:middle;margin-bottom:0.2em;color:white!important;\'>\n                    </div>\n\n                </div>\n                <div class=\'depend-on-device-tablerow-to-none\' style=\'width:100%;\'>\n\n                    <div (click)="solveTaskType1(2)" [innerHTML]="getTaskType1Answer(2).answer" class=\'cf-tas-specification-task-1-answer depend-on-device-tablecell-to-none depend-on-device-none-to-inlineblock depend-on-device-fifty-to-hundred-percentage-width\' style=\'text-align:center;vertical-align:middle;margin-bottom:0.2em;\'>\n                    </div>\n\n                    <div (click)="solveTaskType1(3)" [innerHTML]="getTaskType1Answer(3).answer" class=\'cf-tas-specification-task-1-answer depend-on-device-tablecell-to-none depend-on-device-none-to-inlineblock depend-on-device-fifty-to-hundred-percentage-width\' style=\'text-align:center;vertical-align:middle;margin-bottom:0.2em;\'>\n                    </div>\n\n                </div>\n            </div>\n\n            <!-- Task Type 2 -->\n            <div *ngIf="getTaskData().task_type_id==2" class="cf-tas-specification-task-2">\n\n                <div id="map" style="width:100%;height:350px;text-align:center;font-size:1.5em;color:black;background:url(../public/images/kachel.png);background-repeat:repeat;">\n                    Du wirst zur Zeit lokalisiert. Bitte checke, ob du deinem Browser das Recht gew√§hrst auf deinen Standort zuzugreifen.\n                </div>\n\n\n                <button id="cf-tas-specification-task-2-check-in" class="button">QR Code hochladen</button>\n\n                <div style="width:320px;margin:0!important;margin-right:auto!important;margin-left:auto!important;margin-top:1em!important;">\n                    <img id="qrcode-picture-img" width="320" style="display:none;">\n                </div>\n\n                <div class="content-frame">\n                    <p class=\'headline\' style="background:rgb(120,255,120);padding-left:1em;text-align:left;">\n                        <span class="fa fa-exclamation-triangle"></span> Du kannst diese Aufgabe auch durch Scannen des QR Codes an dem Ort l√∂sen!\n                    </p>\n                </div>\n\n                <div class="content-frame">\n                    <p class=\'headline\' style="background:rgb(120,255,120);padding-left:1em;text-align:left;">\n                        <span class="fa fa-exclamation-triangle"></span> Das Spiel lokalisiert deine Position in einem gewissen Interval, sobald du die Webseite ge√∂ffnet hast und deine Zustimmung hierzu gegeben hast! Solltest du also in der N√§he des gesuchten Ortes sein, wirst du automatisch benachrichtigt.\n                    </p>\n                </div>\n\n            </div>\n\n            <!-- Task Type 3 -->\n\n            <div *ngIf="getTaskData().task_type_id==3" class="cf-tas-specification-task-3" style="margin-top:30px;">\n                <div style="width:320px;margin:0!important;margin-right:auto!important;margin-left:auto!important;">\n                    <canvas width="320" height="240" id="task-3-picture" style="display:none;"></canvas>\n                </div>\n                <p id="cf-tas-specification-task-3-result-text" style="width:100%;text-align:center;margin-top:20px;"></p>\n                <button onclick="$(\'#upload-barcode-pic\').click();" class="button">Lade einen Barcode hoch!</button>\n                <input id="upload-barcode-pic" type="file" accept="image/*" style="display:none;" />\n            </div>\n\n\n            <!-- Task Type 4 -->\n\n            <div *ngIf="getTaskData().task_type_id==4" class="cf-tas-specification-task-4" style="padding:0 1.5em;">\n                <div id="cf-tas-specification-task-source-1" style="margin-top:1em;width:100%;line-height:3em;background:green;color:rgb(0,0,0);vertical-align:middle;text-align:center;">\n                    <div style="min-width:30%;float:left;color:transparent;">a</div>\n                    <div class="cf-tas-specification-task-4-source" style="width:40%;float:left;">{{getTaskType4Answer(0).answer}}</div>\n                    <div class="fa fa-arrow-circle-o-down" (click)="exchangeShuffleArrayPosition(0,1);" style="width:30%;float:left;cursor:pointer;line-height:3em;vertical-align:middle;"></div>\n                    <div style="clear:both;"></div>\n                </div>\n                <div id="cf-tas-specification-task-source-2" style="margin-top:1em;width:100%;line-height:3em;background:yellow;color:rgb(0,0,0);vertical-align:middle;text-align:center;cursor:pointer;">\n                    <div class="fa fa-arrow-circle-o-up" (click)="exchangeShuffleArrayPosition(0,1);" style="width:30%;float:left;cursor:pointer;line-height:3em;vertical-align:middle;"></div>\n                    <div class="cf-tas-specification-task-4-source" style="width:40%;float:left;">{{getTaskType4Answer(1).answer}}</div>\n                    <div class="fa fa-arrow-circle-o-down" (click)="exchangeShuffleArrayPosition(1,2);" style="width:30%;float:left;cursor:pointer;line-height:3em;vertical-align:middle;"></div>\n                    <div style="clear:both;"></div>\n                </div>\n                <div id="cf-tas-specification-task-source-3" style="margin-top:1em;width:100%;line-height:3em;background:red;color:rgb(0,0,0);vertical-align:middle;text-align:center;cursor:pointer;">\n                    <div class="fa fa-arrow-circle-o-up" (click)="exchangeShuffleArrayPosition(1,2);" style="width:30%;float:left;cursor:pointer;line-height:3em;vertical-align:middle;"></div>\n                    <div class="cf-tas-specification-task-4-source" style="width:40%;float:left;">{{getTaskType4Answer(2).answer}}</div>\n                    <div style="clear:both;"></div>\n                </div>\n\n                <button id="cf-tas-specification-task-4-send-button" (click)="solveTaskType4()" class="button" style="margin-top:3em;margin-bottom:0.3em;">√úberpr√ºfe jetzt meine Antwort</button>\n            </div>\n\n            <!-- Task Type 5 -->\n\n            <div *ngIf="getTaskData().task_type_id==5" class="cf-tas-specification-task-5" style="padding:0 1.5em;">\n                <div class="cf-tas-specification-task-blank-text" style="margin-top:1em;width:100%;color:rgb(0,0,0);vertical-align:middle;text-align:center;">\n                    <p>{{getTaskType5TextWithoutBlankStatement().text}}</p>\n                </div>\n                <div class="cf-tas-specification-task-blank-input" style="margin-top:0.3em;width:100%;color:rgb(0,0,0);vertical-align:middle;text-align:center;">\n                    <input type="text" [id]="\'input-specification-task-blank\'" placeholder="Gib hier deine Antwort ein" style="width:100%;">\n                </div>\n\n                <button id="cf-tas-specification-task-5-send-button" (click)="solveTaskType5()" class="button" style="margin-top:2em;margin-bottom:0.3em;">√úberpr√ºfe jetzt meine Antwort</button>\n            </div>\n\n            <!-- Task Type 6 -->\n\n            <div *ngIf="getTaskData().task_type_id==6" class="cf-tas-specification-task-6">\n\n                <div class="content-frame">\n                    <p class=\'headline\' style="background:rgb(120,255,120);padding-left:1em;text-align:left;">\n                        <span class="fa fa-exclamation-triangle"></span> Da nicht alle g√§ngigen Browser den QR Code Scan unterst√ºtzen. Muss leider ein externer QR Code Scanner auf deinem Smartphone benutzt werden, um die Aufgabe zu l√∂sen. Folge dann dem Link in dem gescannten QR Code und du hast diese Aufgabe abgeschlossen!\n                    </p>\n                </div>\n\n            </div>\n\n\n        </div>\n\n        <!-- Overview of task -->\n        <div id="cf-tas-overview" class="content-frame">\n\n            <p class="headline">Mehr Informationen zu der Aufgabe</p>\n\n\n\n            <div style="padding:1em 1em;width:100%;max-width:30em;margin-left:auto;margin-right:auto;">\n\n\n                <div style="display:table;border-spacing:0 2px;width:100%;">\n\n                    <div style="display:table-row;width:100%;background:#eeeeee;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Erfahrung:</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;">\n                          +{{getTaskData().score_rule}}\n                        </div>\n                    </div>\n\n                    <div style="display:table-row;width:100%;background:#eeeeee;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Dein Fortschritt:</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;">{{getUserTaskScore().value}}</div>\n                    </div>\n\n                    <div style="display:table-row;width:100%;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Ben√∂tigter Fortschritt:</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;">{{getTaskData().needed_value}}</div>\n                    </div>\n\n                    <div style="display:table-row;width:100%;background:#eeeeee;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Deine gesammelten Exp.:</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;color:green!important;">+{{getUserTaskScore().score}}</div>\n                    </div>\n\n                    <div style="display:table-row;width:100%;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">Diese Aufgabe ist Teil des folgenden Quests:</div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;">{{getQuestsContainingTaskId().length==0?\'-\':\'\'}}</div>\n                    </div>\n\n                    <div *ngFor="let t_quest of getQuestsContainingTaskId();" [hidden]="t_quest.is_active!=\'1\'" style="display:table-row;width:100%;">\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;padding-left:0.5em;">\n                            <div (click)="navigateToQuest(t_quest.quest_id)" class="content-quest-frame" style="width:100%;">\n                                <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                                    <div class="depend-on-device-left-to-none-float" style="font-size:1.5em;font-weight:bold;text-decoration:underline;">Quest: {{t_quest.questname}}</div>\n                                    <div class="depend-on-device-right-to-none-float" style="font-size:1.2em;margin-top:0.2em;"><span style="font-size:1.2em;font-weight:bold;">+{{t_quest.score_rule}}</span> Exp.</div>\n                                    <div style="clear:both;"></div>\n                                </div>\n                            </div>\n                        </div>\n                        <div style="display:table-cell;vertical-align:middle;padding:5px;text-align:right;"></div>\n                    </div>\n\n\n                </div>\n\n            </div>\n            <div style="clear:both;"></div>\n\n        </div>\n\n    </div>\n\n\n\n</div>\n\n    <!-- Solved Overlay -->\n    <div *ngFor="let solvedOverlayDataObject of solvedOverlayArray;let i = index;">\n      <solvedoverlay-component [user]="user" [universalcontent]="universalcontent" [solveddata]="solvedOverlayDataObject" (closeOverlay)="removeFromSolvedOverlayArray(i);"></solvedoverlay-component>\n    </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.TaskComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1}),this.lService.loadSpecificContent("tasks")},e.prototype.getUniversalContentHome1Description=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Content||0==this.universalcontent._Content.filter(function(e){return"HOME_1"==e.content_mapper}).length?"":this.universalcontent._Content.filter(function(e){return"HOME_1"==e.content_mapper})[0].text},e.prototype.tasksAvailable=function(){return!$.isEmptyObject(this.specificcontent)&&"undefined"!=typeof this.specificcontent.Active_Tasks&&"undefined"!=typeof this.specificcontent.Active_Quests&&(0!=this.specificcontent.Active_Tasks.length||0!=this.specificcontent.Active_Quests.length)},e.prototype.getActiveQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Active_Quests?[]:this.specificcontent.Active_Quests},e.prototype.getActiveTasks=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.Active_Tasks?[]:this.specificcontent.Active_Tasks},e.prototype.isStepCompleted=function(e){for(var t in e)if("undefined"==typeof e[t].completed||0==e[t].completed)return!1;return!0},e.prototype.hasQuestStepAnUncompletedPrestep=function(e,t){return 0!=parseInt(t)&&!this.isStepCompleted(e[parseInt(t)-1])},e.prototype.navigateToQuest=function(e){this.router.navigate(["/l/quest",e])},e.prototype.navigateToTask=function(e){this.router.navigate(["/l/task",e])},e.prototype.navigateToBadge=function(e){this.router.navigate(["/l/badge",e])},e.prototype.clickHome1Button=function(){$("#cf-ta-introduction-content").fadeToggle(0)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),e=i([a.Component({selector:"tasks-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n    <div class="col-xs-12 col-sm-3" style="padding:0;">\n\n        <div id="cf-ho-overview" class="content-frame">\n\n            <p class="headline"><span class="special-font-color">{{user?.username}}</span></p>\n\n            <div class="depend-on-device-table-to-none" style="width:100%;">\n\n                <div style="vertical-align:top;width:100%;color:rgb(255,255,255);">\n\n                    <div id="cf-ho-overview-stats-experience" class="depend-on-device-tablecell-to-none" style="width:100%;vertical-align:middle;">\n                        <p style="font-size:1.3em;font-weight:bold;text-align:center;margin-top:0.5em;">Erfahrung</p>\n                        <p style="font-size:1em;text-align:center;"><span style="font-size:1.6em!important;font-weight:bold;color:#0e9873;">{{user?.user_score}}</span></p>\n                        <div style="clear:both;"></div>\n                    </div>\n\n                </div>\n\n\n            </div>\n\n\n\n        </div>\n\n    </div>\n\n    <div class="col-xs-12 col-sm-9 padding-left-10px-sm-md-lg" style="padding:0;">\n\n        <!-- What can I do here -->\n        <div id="cf-ta-introduction" class="content-frame">\n\n            <p class="headline headline-as-button" (click)="clickHome1Button();" style="height:auto;padding-top:0px!important;"><button class="button">Was kann ich hier machen?</button></p>\n\n            <div id="cf-ta-introduction-content" style=\'display:none;width:100%;border-spacing:3px 10px;\'>\n\n                <div style=\'line-height:1.4em;text-align:justify;width:100%;vertical-align:top;color:rgb(0,0,0);padding:1em 0;\'>\n                    {{getUniversalContentHome1Description()}}\n                </div>\n\n\n            </div>\n\n        </div>\n\n    </div>\n\n\n\n  </div>\n\n\n  <div class="row">\n\n    <div class="col-xs-12" style="padding:0;">\n\n        <!-- Overview of tasks -->\n        <div id="cf-ta-overview" class="content-frame">\n\n            <p class="headline">Deine n√§chsten Ziele</p>\n\n            <p *ngIf="!tasksAvailable()" class=\'content-none-placeholder\' style=\'width:100%;text-align:center;margin-top:1em;margin-bottom:1em;background: yellow;padding:0.5em 0;\'>Keine weiteren Aufgaben vorhanden</p>\n\n            <!-- ACTIVE TASKS -->\n\n            <div *ngFor="let t_task of getActiveTasks();" (click)="navigateToTask(t_task.task_id)" class="content-task-frame" style="width:100%;">\n                <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                    <div class="depend-on-device-left-to-none-float" style="font-size:1.5em;font-weight:bold;text-decoration:underline;">Aufgabe: {{t_task.taskname}}</div>\n                    <div class="depend-on-device-right-to-none-float" style="font-size:1.2em;margin-top:0.2em;"><span style="font-size:1.2em;font-weight:bold;">+{{t_task.score_rule}}</span> Exp.</div>\n                    <div style="clear:both;"></div>\n                    <div style="font-size:1em;text-align:justify;margin-top:1em;">{{t_task.description_long}}</div>\n                </div>\n            </div>\n\n            <!-- Quests -->\n            <div *ngFor="let t_quest of getActiveQuests()" (click)="navigateToQuest(t_quest.quest_id)" class="content-quest-frame" style="width:100%;">\n                <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                    <div class="depend-on-device-left-to-none-float" style="font-size:1.5em;font-weight:bold;text-decoration:underline;">{{\'Quest: \'+t_quest.questname}}</div>\n                    <div class="depend-on-device-right-to-none-float" style="font-size:1.2em;margin-top:0.2em;"><span style="font-size:1.2em;font-weight:bold;">+{{t_quest.score_rule}}</span> Exp.</div>\n                    <div style="clear:both;"></div>\n\n                    <div *ngFor="let t_quest_step of t_quest.json_quest_task_ids; let i = index;" [hidden]="hasQuestStepAnUncompletedPrestep(t_quest.json_quest_task_ids, i)">\n                      <div style=\'font-size:1.2em;font-weight:bold;text-align:center;margin-top:0.3em;margin-bottom:0.2em;\'>Stufe {{i+1}} von {{t_quest.json_quest_task_ids.length}}</div>\n\n                      <div *ngFor="let t_quest_step_task of t_quest_step; let i_tasks = index;">\n                        <div style=\'cursor:pointer;font-weight:bold;font-size:1em;color:rgb(255,255,255);border:0px solid rgb(0,0,0);border-radius:4px;padding:0.2em 0.3em;background:rgb(50,50,50);margin-bottom:2px;\' >\n                          {{t_quest_step_task.taskname}}\n                          <button\n                            [class.fa-check-square]="t_quest_step_task.completed"\n                            [style.color]="t_quest_step_task.completed ?\'rgb(0,150,0)\':\'rgb(150,0,0)\'"\n                            [class.fa-minus-square]="!t_quest_step_task.completed"\n                            class=\'fa\' style=\'padding:0;font-size:1em;border:0;margin:0;background:transparent;margin-left:5px;float:right;\'></button>\n\n                        </div>\n                      </div>\n\n\n                    </div>\n                </div>\n            </div>\n\n\n\n\n\n\n\n\n        </div>\n\n\n    </div>\n\n\n\n  </div>\n\n\n  '
}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.TasksComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1,e.initMap()}),this.lService.loadSpecificContent("tasksearch")},e.prototype.getLocationsWhereUserCanFindTaskOrQuest=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.LOCATIONS_WHERE_USER_CAN_FIND_TASK_OR_QUEST?[]:this.specificcontent.LOCATIONS_WHERE_USER_CAN_FIND_TASK_OR_QUEST},e.prototype.getAllLocations=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.ALL_LOCATIONS?[]:this.specificcontent.ALL_LOCATIONS},e.prototype.getUniversalContent=function(e){if($.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Content)return"";var t=this.universalcontent._Content.filter(function(t){return t.content_mapper.toLowerCase()==e.toLowerCase()});return t.length>0?t[0].text:""},e.prototype.navigateToQuest=function(e){this.router.navigate(["/l/quest",e])},e.prototype.navigateToTask=function(e){this.router.navigate(["/l/task",e])},e.prototype.navigateToBadge=function(e){this.router.navigate(["/l/badge",e])},e.prototype.initMap=function(){var e=this;OpenLayers.Lang.setCode("de"),this.map=new OpenLayers.Map("show_map",{projection:new OpenLayers.Projection("EPSG:900913"),displayProjection:new OpenLayers.Projection("EPSG:4326"),controls:[new OpenLayers.Control.Navigation,new OpenLayers.Control.PanZoomBar],maxExtent:new OpenLayers.Bounds((-20037508.34),(-20037508.34),20037508.34,20037508.34),numZoomLevels:18,maxResolution:156543,units:"meters"}),this.layer_mapnik=new OpenLayers.Layer.OSM.Mapnik("Mapnik"),this.layer_markers=new OpenLayers.Layer.Markers("Address",{projection:new OpenLayers.Projection("EPSG:4326"),visibility:!0,displayInLayerSwitcher:!1}),this.layer_vector=new OpenLayers.Layer.Vector("vector"),this.map.addLayers([this.layer_mapnik,this.layer_markers,this.layer_vector]);var t=this.getAllLocations();for(var n in t)this.addMarker(this.layer_markers,parseFloat(t[n].geo_long),parseFloat(t[n].geo_lati));var i=8.461,s=49.4855,a=14,o=t.length>0?t[0]:{};for(var n in t)t[n].location_id+""==this.getUniversalContent("ROOT_LOCATION")&&(o=t[n]);"undefined"!=typeof o.location_id&&(i=parseFloat(o.geo_long),s=parseFloat(o.geo_lati)),this.jumpTo(i,s,a),this.geolocate=new OpenLayers.Control.Geolocate({bind:!1,geolocationOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:7e3}}),this.map.addControl(this.geolocate),this.geolocate.events.register("locationupdated",this.geolocate,function(t){e.layer_vector.removeAllFeatures();var n=new OpenLayers.Feature.Vector(OpenLayers.Geometry.Polygon.createRegularPolygon(new OpenLayers.Geometry.Point(t.point.x,t.point.y),t.position.coords.accuracy/8,40,0),{},{fillColor:"#000",fillOpacity:.1,strokeWidth:0});e.layer_vector.addFeatures([new OpenLayers.Feature.Vector(t.point,{},{graphicName:"cross",strokeColor:"#f00",strokeWidth:2,fillOpacity:0,pointRadius:10}),n])}),this.geolocate.activate(),this.locate()},e.prototype.jumpTo=function(e,t,n){var i=this.Lon2Merc(e),s=this.Lat2Merc(t);return this.map.setCenter(new OpenLayers.LonLat(i,s),n),!1},e.prototype.Lon2Merc=function(e){return 20037508.34*e/180},e.prototype.Lat2Merc=function(e){var t=3.141592653589793;return e=Math.log(Math.tan((90+e)*t/360))/(t/180),20037508.34*e/180},e.prototype.addMarker=function(e,t,n){var i=new OpenLayers.LonLat(this.Lon2Merc(t),this.Lat2Merc(n)),s=new OpenLayers.Marker(i);e.addMarker(s)},e.prototype.locate=function(){var e=this;this.geolocate.getCurrentLocation(),setTimeout(function(){e.locate()},5e3)},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),e=i([a.Component({selector:"tasksearch-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n      <div class="col-xs-12 col-sm-3" style="padding:0;">\n\n          <div id="cf-ho-overview" class="content-frame">\n\n              <p class="headline"><span class="special-font-color">{{user?.username}}</span></p>\n\n              <div class="depend-on-device-table-to-none" style="width:100%;">\n\n                  <div class="depend-on-device-tablerow-to-none" style="vertical-align:top;width:100%;color:rgb(255,255,255);">\n\n                      <div id="cf-ho-overview-stats-experience" class="depend-on-device-tablecell-to-none" style="width:100%;vertical-align:middle;">\n                          <p class="depend-on-device-none-to-left-float depend-on-device-none-to-49-percentage-width" style="font-size:1.3em;font-weight:bold;text-align:center;margin-top:0.5em;">Erfahrung</p>\n                          <p class="depend-on-device-none-to-left-float depend-on-device-none-to-49-percentage-width" style="font-size:1em;text-align:center;"><span style="font-size:1.6em!important;font-weight:bold;color:#0e9873;">{{user?.user_score}}</span></p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                  </div>\n\n              </div>\n\n          </div>\n      </div>\n\n      <div class="col-xs-12 col-sm-9 padding-left-10px-sm-md-lg" style="padding:0;">\n\n          <!-- Locations where user can find a task or a quest -->\n          <div *ngFor="let t_location of getLocationsWhereUserCanFindTaskOrQuest();" class="content-frame">\n             <p class=\'headline\' style="background:rgb(120,255,120);padding-left:1em;text-align:left;">\n                 <span class="fa fa-exclamation-triangle"></span> Besuche {{t_location.locationname}}\n             </p>\n          </div>\n\n      </div>\n\n\n\n  </div>\n\n  <div class="row">\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <!-- Searching for near tasks -->\n          <div id="cf-ma-map" class="content-frame">\n\n              <p class="headline">Suche nach Aufgaben in deiner N√§he</p>\n\n              <div id="show_map" style="width:100%;height:500px;text-align:center;font-size:1.5em;color:black;background:url(../public/images/kachel.png);background-repeat:repeat;">\n              </div>\n\n              <div style="background: white;">\n               <div id="osm">¬© <a href="http://www.openstreetmap.org">OpenStreetMap</a>\n                 und <a href="http://www.openstreetmap.org/copyright">Mitwirkende</a>,\n                 <a href="http://creativecommons.org/licenses/by-sa/2.0/deed.de">CC-BY-SA</a>\n               </div>\n              </div>\n\n          </div>\n\n\n      </div>\n\n\n\n  </div>\n\n  <div class="row">\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <div class="content-frame">\n              <p class=\'headline\' style="background:rgb(120,255,120);padding-left:1em;text-align:left;">\n                  <span class="fa fa-exclamation-triangle"></span> Du kannst auch den QR-Code an dem Ort scannen und dem Link folgen!\n              </p>\n          </div>\n\n      </div>\n\n  </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.TasksearchComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(61),r=n(29),d=function(){function e(e,t,n){this.router=e,this.route=t,this.lService=n,this.user={},this.loading_user=!0,this.universalcontent={},this.loading_universalcontent=!0,this.showncomponent="",this.legalcomponent="",this.username="",this.pwd="",this.new_password_email="",this.reg_username="",this.reg_username_valid=!0,this.reg_username_exists=!1,this.reg_email="",this.reg_email_valid=!0,this.reg_email_exists=!1,this.reg_password="",this.reg_password_valid=!0,this.reg_password_repeat="",this.reg_password_repeat_valid=!0,this.reg_faculty_id=-2}return e.prototype.ngOnInit=function(){var e=this;$("#titleBar").hide(),this.loading_user=!0,this.lService.user$.subscribe(function(t){console.log(t),e.user=t,e.loading_user=!1}),this.lService.loadUser(),this.loading_universalcontent=!0,this.lService.universalcontent$.subscribe(function(t){e.universalcontent=t,e.loading_universalcontent=!1}),this.lService.loadUniversalContent(),this.sub=this.route.params.subscribe(function(t){var n="undefined"!=typeof t.component?t.component:"",i="undefined"!=typeof t.id?t.id:"";n=n.toLowerCase(),i=i.toLowerCase(),0==n.length||"home"==n?e.showncomponent="home":"registration"==n?e.showncomponent="registration":"sendpwd"==n?e.showncomponent="sendpwd":"legal"==n&&0!=i.length?(e.showncomponent="legal",e.legalcomponent=i):e.showncomponent="home"})},e.prototype.ngOnDestroy=function(){this.sub.unsubscribe()},e.prototype.navigateToComponent=function(e){this.router.navigate(["/l/"+e])},e.prototype.navigateToUnloggedComponent=function(e){this.router.navigate(["/u/"+e])},e.prototype.loginAsAnonym=function(){var e=this;this.lService.loginAsAnonym().subscribe(function(t){"undefined"!=typeof t&&1==t.result?e.navigateToComponent("tasks"):window.alert("Es ist ein Fehler aufgetreten. Bitte die Seite neu laden lassen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte die Seite neu laden lassen!")})},e.prototype.sendNewPassword=function(){return 0!=this.new_password_email.length&&/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/.test(this.new_password_email)?void this.lService.sendNewPassword(this.new_password_email).subscribe(function(e){"undefined"!=typeof e&&1==e.result?window.alert("Dir wurde eine Mail mit deinen neuen Zugangsdaten gesendet!"):window.alert("Es ist ein Fehler aufgetreten. Bitte die Seite neu laden lassen und nochmal versuchen!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte die Seite neu laden lassen und nochmal versuchen!")}):void window.alert("Bitte gib zuerst deine korrekte E-Mail ein!")},e.prototype.registerUser=function(){var e=this,t=/^[A-Za-z0-9]{2,}$/;return 0==this.reg_username.length||null==this.reg_username.match(t)?void window.alert("Dein gew√§hlter Username entspricht nicht unseren Richtlinien!"):1==this.reg_username_exists?void window.alert("Dein gew√§hlter Username ist bereits vergeben!"):(t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/,0==this.reg_email.length||null==this.reg_email.match(t)?void window.alert("Bitte √ºberpr√ºfe deine E-Mail und versuche es erneut!"):1==this.reg_email_exists?void window.alert("Deine gew√§hlte E-Mail ist bereits vergeben!"):(t=/[A-Za-z0-9!?.:;-]{6,}/g,0==this.reg_password.length||null==this.reg_password.match(t)||this.reg_password!=this.reg_password_repeat?void window.alert("Dein Passwort entspricht nicht unseren Richtlinien oder du hast die beiden Passw√∂rter stimmen nicht √ºberein!"):this.reg_faculty_id==-2?void window.alert("Bitte w√§hle vor der Registration eine Fakult√§t!"):0==$("#reg_bed").prop("checked")?void window.alert("Bitte akzeptiere vor der Registration die AGB sowie die Datenschutzerkl√§rungen!"):void this.lService.registerUser(this.reg_username,this.reg_email,this.reg_password,this.reg_password_repeat,this.reg_faculty_id).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?e.router.navigate(["/l/tasks"]):window.alert("Bitte √ºberpr√ºfe deine Eingaben!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),console.error("Could not register user.")})))},e.prototype.getUniversalContentStart=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Content||0==this.universalcontent._Content.filter(function(e){return"START"==e.content_mapper}).length?"":this.universalcontent._Content.filter(function(e){return"START"==e.content_mapper})[0].text},e.prototype.getUniversalContentFacultyArray=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Faculties?[]:this.universalcontent._Faculties},e.prototype.getUniversalContentMainPictureId=function(){return $.isEmptyObject(this.universalcontent)||"undefined"==typeof this.universalcontent._Content||0==this.universalcontent._Content.filter(function(e){return"MAIN_PICTURE_ID"==e.content_mapper}).length?-1:this.universalcontent._Content.filter(function(e){return"MAIN_PICTURE_ID"==e.content_mapper})[0].text},e.prototype.loginUser=function(){var e=this;this.lService.loginUser(this.username,this.pwd).subscribe(function(t){"undefined"!=typeof t.result&&1==t.result?e.router.navigate(["/l/tasks"]):window.alert("Bitte √ºberpr√ºfe deinen Username und Passwort!")},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),console.error("Could not login user.")})},e.prototype.keyupRegisterUsername=function(){var e=this,t=/^[A-Za-z0-9]{2,}$/;0!=this.reg_username.length&&null!=this.reg_username.match(t)?this.reg_username_valid=!0:this.reg_username_valid=!1,this.lService.checkUsername(this.reg_username).subscribe(function(t){"undefined"!=typeof t.data&&"undefined"!=typeof t.data.username_exists&&"undefined"!=typeof t.data.username&&t.data.username==e.reg_username&&1==t.data.username_exists?e.reg_username_exists=!0:"undefined"!=typeof t.data&&"undefined"!=typeof t.data.username_exists&&"undefined"!=typeof t.data.username&&t.data.username==e.reg_username&&0==t.data.username_exists&&(e.reg_username_exists=!1)},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),console.error("Could not login user.")})},e.prototype.keyupRegisterEmail=function(){var e=this,t=/^([A-Za-z0-9_\-\.])+\@([A-Za-z0-9_\-\.])+\.([A-Za-z]{2,4})$/;0!=this.reg_email.length&&null!=this.reg_email.match(t)?this.reg_email_valid=!0:this.reg_email_valid=!1,this.lService.checkEmail(this.reg_email).subscribe(function(t){"undefined"!=typeof t.data&&"undefined"!=typeof t.data.email_exists&&"undefined"!=typeof t.data.email&&t.data.email==e.reg_email&&1==t.data.email_exists?e.reg_email_exists=!0:"undefined"!=typeof t.data&&"undefined"!=typeof t.data.email_exists&&"undefined"!=typeof t.data.email&&t.data.email==e.reg_email&&0==t.data.email_exists&&(e.reg_email_exists=!1)},function(e){window.alert("Es ist ein Fehler aufgetreten. Bitte Seite neu laden!"),console.error("Could not login user.")})},e.prototype.keyupRegisterPassword=function(){var e=/[A-Za-z0-9!?.:;-]{6,}/g;0!=this.reg_password.length&&null!=this.reg_password.match(e)?this.reg_password_valid=!0:this.reg_password_valid=!1},e.prototype.keyupRegisterPasswordRepeat=function(){0!=this.reg_password_repeat.length&&this.reg_password==this.reg_password_repeat?this.reg_password_repeat_valid=!0:this.reg_password_repeat_valid=!1},e=i([a.Component({selector:"unloggedcontent-component",providers:[o.LibgameService],template:'\n\n<div style="width:100%;background-color: #990000;min-height: 100%;position: absolute;padding-top: 50px;">\n\n  <div id="content-landing">\n\n    <div class="row">\n\n        <div class="col-xs-10 col-xs-offset-1 col-sm-4 col-sm-offset-4" style="padding:0;">\n\n            <!-- Logo -->\n            <div id="logo" style="width:200px;margin-left:auto;margin-right:auto;margin-bottom: 20px;">\n                <img [src]="getUniversalContentMainPictureId().length != 0 ? lService.getPictureLink(getUniversalContentMainPictureId()) : \'\'" style="width:100%;" />\n            </div>\n\n            <div id="wrapper" style="padding-left:0;">\n\n                <div *ngIf="showncomponent==\'registration\'">\n\n                  <p class="lp-headline" style="text-align:center;text-decoration:underline;font-size:1.2em;margin:0;color:white;margin-bottom:0.8em;">Registriere dich jetzt!</p>\n\n                  <form id="registerForm">\n                        <input [(ngModel)]="reg_username" (keyup)="keyupRegisterUsername()" [style.background]="reg_username.length>0?(reg_username_valid && reg_username_exists == false)?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_username" name="reg_username" type="text" maxlength="30" placeholder="Username" title="Gib hier deinen gew√ºnschten Usernamen ein" style="padding-top:7px;padding-bottom:7px;"/>\n                        <div *ngIf="reg_username_exists" style="padding: 5px;color: white;">Username ist leider schon vergeben!</div>\n\n                        <input [(ngModel)]="reg_email" (keyup)="keyupRegisterEmail()" [style.background]="reg_email.length>0?(reg_email_valid && reg_email_exists == false)?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_email" name="reg_email" type="text" maxlength="100" placeholder="E-Mail" title="Gib hier deine E-Mail ein" style="padding-top:7px;padding-bottom:7px;margin-top: 0.4em;"/>\n                        <div *ngIf="reg_email_exists" style="padding: 5px;color: white;">Ein User mit dieser E-Mail existiert leider bereits!</div>\n\n                        <input [(ngModel)]="reg_password" (keyup)="keyupRegisterPassword();keyupRegisterPasswordRepeat();" [style.background]="(reg_password_repeat.length>0 || reg_password.length>0)?reg_password_valid?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_password" name="reg_password" type="password" maxlength="30" placeholder="Passwort (Mind. 6 Zeichen)" title="Gib hier dein Passwort ein" style="padding-top:7px;padding-bottom:7px;margin-top: 0.4em;"/>\n\n                        <input [(ngModel)]="reg_password_repeat" (keyup)="keyupRegisterPasswordRepeat();keyupRegisterPassword();" [style.background]="(reg_password_repeat.length>0 || reg_password.length>0)?reg_password_repeat_valid?\'rgb(120,255,120)\':\'rgb(255,120,120)\':\'#eeeeee\'" id="registerForm_reg_password_repeat" name="reg_password_repeat" type="password" maxlength="30" placeholder="Wiederhole dein Passwort" title="Wiederhole hier dein Passwort" style="padding-top:7px;padding-bottom:7px;margin-top: 0.4em;"/>\n\n                        <select [(ngModel)]="reg_faculty_id" name="reg_department" style="font-size:1em;background:#eeeeee;padding-top: 7px;padding-bottom: 7px;margin-top: 0.4em;">\n                          <option value="-2">W√§hle deine Fakult√§t</option>\n                          <option *ngFor="let t_faculty of getUniversalContentFacultyArray();" value=\'{{t_faculty.faculty_id}}\'>{{t_faculty.facultyname}}</option>\n                        </select>\n\n                        <input id="reg_bed" style="margin:10px 5px;float:left;width:20px;height:20px;margin-top:8px;" name="reg_bed" type="checkbox" value="bed">\n                        <div style="color:white;margin:10px 5px;">Ich stimme den <a style="color:rgb(210,210,210);cursor:pointer;text-decoration: underline;" (click)="navigateToUnloggedComponent(\'legal/tou\')" target="_blank">AGB</a> sowie der <a style="color:rgb(210,210,210);cursor:pointer;text-decoration: underline;" (click)="navigateToUnloggedComponent(\'legal/pp\')" target="_blank">Datenschutzerkl√§rungen</a> zu</div>\n                        <div style="clear:both;"></div>\n\n                        <div (click)="registerUser()" id="buttonReg">Jetzt registrieren</div>\n                        <div class="buttonForLoginRegisterChange" (click)="navigateToUnloggedComponent(\'home\')">Zur√ºck zum Login</div>\n                  </form>\n\n                </div>\n\n                <div *ngIf="showncomponent==\'sendpwd\'">\n\n                  <p class="lp-headline" style="text-align:center;font-size:1.2em;margin:0;color:white;margin-bottom:0.8em;">Trage deine E-Mail ein und du wirst ein neues Passwort per Mail erhalten!</p>\n\n                  <form>\n                        <input [(ngModel)]="new_password_email" name="fp_email" type="text" maxlength="100" placeholder="E-Mail" title="Gib hier deine E-Mail ein"/>\n                        <div (click)="sendNewPassword()" id="buttonSendPassword">Neues Passwort jetzt senden</div>\n                        <div class="buttonForLoginRegisterChange" (click)="navigateToUnloggedComponent(\'home\')">Zur√ºck zum Login</div>\n                  </form>\n\n                </div>\n\n                <div *ngIf="showncomponent==\'legal\'">\n                  <legal-component [user]="user" [legalcomponent]="legalcomponent" [universalcontent]="universalcontent"></legal-component>\n\n                  <div class="buttonForLoginRegisterChange" (click)="navigateToUnloggedComponent(\'home\')">Zur√ºck zum Login</div>\n                </div>\n\n                <div *ngIf="showncomponent==\'home\'">\n\n                  <div [innerHTML]="getUniversalContentStart() | safeHtml" class="unloggedcontent">\n                  </div>\n\n                  <!-- Click In -->\n                  <form id="registerForm" style="margin-top:1em;">\n                      <input [(ngModel)]="username" type="text" name="username" placeholder="Dein Username" style="padding-top:7px;padding-bottom:7px;"/>\n                      <input [(ngModel)]="pwd" type="password" name="password" placeholder="Dein Passwort" style="padding-top:7px;padding-bottom:7px;margin-top: 0.5em;"/>\n                      <div (click)="loginUser()" id="buttonLogIn">Log In</div>\n                      <div class="buttonForLoginRegisterChange" (click)="navigateToUnloggedComponent(\'registration\')">Registriere dich jetzt</div>\n                      <div class="buttonForLoginAsAnonym" (click)="loginAsAnonym()">Erstmal Anonym spielen</div>\n                      <div class="buttonForForgotPasswordChange" (click)="navigateToUnloggedComponent(\'sendpwd\')">Passwort vergessen</div>\n                  </form>\n\n                </div>\n\n            </div>\n\n        </div>\n\n    </div>\n\n  </div>\n</div>\n\n  '}),s("design:paramtypes",[r.Router,r.ActivatedRoute,o.LibgameService])],e)}();t.UnloggedcontentComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0,this.open_tasks_type_key=-1}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1}),this.lService.loadSpecificContent("userprogress")},e.prototype.getCompletedQuests=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.COMPLETED_QUESTS?[]:this.specificcontent.COMPLETED_QUESTS},e.prototype.getBadgesWithProgressStatement=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.ALL_BADGES_WITH_COMPLETED_STATEMENT?[]:this.specificcontent.ALL_BADGES_WITH_COMPLETED_STATEMENT},e.prototype.getUserTaskInfoArray=function(){return $.isEmptyObject(this.specificcontent)||"undefined"==typeof this.specificcontent.USER_TASK_INFO?[]:this.specificcontent.USER_TASK_INFO},e.prototype.navigateToQuest=function(e){this.router.navigate(["/l/quest",e])},e.prototype.navigateToTask=function(e){this.router.navigate(["/l/task",e])},e.prototype.navigateToBadge=function(e){this.router.navigate(["/l/badge",e])},e.prototype.isTaskSolved=function(e,t){return parseFloat(e)>=parseFloat(t)},e.prototype.getMinScoreForTaskInUserTaskInfo=function(e){var t=1e6;if(0==this.getUserTaskInfoArray()[e].tasks.length)return 0;for(var n in this.getUserTaskInfoArray()[e].tasks)parseFloat(this.getUserTaskInfoArray()[e].tasks[n].score_rule)<t&&(t=parseFloat(this.getUserTaskInfoArray()[e].tasks[n].score_rule));return t},e.prototype.getMaxScoreForTaskInUserTaskInfo=function(e){var t=0;if(0==this.getUserTaskInfoArray()[e].tasks.length)return 0;for(var n in this.getUserTaskInfoArray()[e].tasks)parseFloat(this.getUserTaskInfoArray()[e].tasks[n].score_rule)>t&&(t=parseFloat(this.getUserTaskInfoArray()[e].tasks[n].score_rule));return t},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),e=i([a.Component({selector:"userprogress-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n      <div class="col-xs-12 col-sm-3" style="padding:0;">\n\n          <div id="cf-ho-overview" class="content-frame">\n\n              <p class="headline"><span class="special-font-color">{{user?.username}}</span></p>\n\n              <div class="depend-on-device-table-to-none" style="width:100%;">\n\n                  <div class="depend-on-device-tablerow-to-none" style="vertical-align:top;width:100%;color:rgb(255,255,255);">\n\n                      <div id="cf-ho-overview-stats-experience" class="depend-on-device-tablecell-to-none" style="width:100%;vertical-align:middle;">\n                          <p class="depend-on-device-none-to-left-float depend-on-device-none-to-49-percentage-width" style="font-size:1.3em;font-weight:bold;text-align:center;margin-top:0.5em;">Erfahrung</p>\n                          <p class="depend-on-device-none-to-left-float depend-on-device-none-to-49-percentage-width" style="font-size:1em;text-align:center;"><span style="font-size:1.6em!important;font-weight:bold;color:#0e9873;">{{user?.user_score}}</span></p>\n                          <div style="clear:both;"></div>\n                      </div>\n\n                  </div>\n\n\n              </div>\n\n\n\n          </div>\n\n      </div>\n\n\n      <div class="col-xs-12 col-sm-9 padding-left-10px-sm-md-lg" style="padding:0;">\n\n\n          <!-- Quests -->\n          <div id="cf-ac-quests" class="content-frame">\n\n              <p class="headline">Abgeschlossene Quests</p>\n\n              <p [hidden]="getCompletedQuests().length!=0" style=\'width:100%;text-align:center;margin-top:1em;margin-bottom:1em;\'>Keine abgeschlossenen Quests vorhanden</p>\n\n              <div *ngFor="let t_c_quest of getCompletedQuests();" (click)="navigateToQuest(t_c_quest.quest_id)" class="content-quest-frame" style="width:100%;">\n                  <div style="width:100%;color:rgb(0,0,0);cursor:pointer;">\n                      <div class="depend-on-device-left-to-none-float" style="font-size:1.5em;font-weight:bold;text-decoration:underline;">Quest: {{t_c_quest.questname}}</div>\n                      <div class="depend-on-device-right-to-none-float" style="font-size:1.2em;margin-top:0.2em;"><span style="font-size:1.2em;font-weight:bold;">+{{t_c_quest.score_rule}}</span> Exp.</div>\n                      <div style="clear:both;"></div>\n                      <div style="font-size:1.2em;font-weight:bold;text-align:center;margin-top:0.3em;margin-bottom:0.2em;">Abgeschlossen</div>\n                  </div>\n              </div>\n\n\n          </div>\n\n      </div>\n\n  </div>\n\n  <div class="row">\n\n      <div class="col-xs-12" style="padding:0;">\n\n\n          <!-- Badges -->\n          <div id="cf-ac-badges" class="content-frame">\n\n              <p class="headline">Abzeichen</p>\n\n              <div style="display:block;width: 100%;">\n\n\n                  <div *ngFor="let t_badge of getBadgesWithProgressStatement();" (click)="navigateToBadge(t_badge.badge_id)" class=\'col-xs-6 col-sm-1\' style=\'display:inline-block;padding:1em;\'>\n                      <div style=\'position:relative;cursor:pointer;\'>\n                          <img style=\'position:relative;top:0;left:0;width:100%;\' src=\'{{lService.getPictureLink(t_badge.picture_id)}}\'>\n                          <div *ngIf="t_badge.completed" class=\'fa fa-check-square\' style=\'position:absolute;right:0;margin:0.3em;font-size:2em!important;color:white;\'></div>\n                          <div *ngIf="!t_badge.completed" class=\'fa fa-minus-square\' style=\'position:absolute;right:0;margin:0.3em;font-size:2em!important;color:white;\'></div>\n                      </div>\n                  </div>\n\n                  <div style="clear:both;"></div>\n\n\n              </div>\n\n          </div>\n\n\n\n          <!-- Tasks -->\n          <div id="cf-ac-tasks" class="content-frame">\n\n              <p class="headline">Abgeschlossene Aufgaben</p>\n\n\n              <div *ngFor="let t_task_type of getUserTaskInfoArray(); let i = index;" class="content-inner-frame" style="width:100%;">\n                  <!-- Description of Task_Type -->\n                  <div class="cf-ac-tasks-task-type-button"\n                    (click)="open_tasks_type_key==i?open_tasks_type_key=-1:open_tasks_type_key=i;"\n                    [class.separator]="open_tasks_type_key==i"\n                    style="width:100%;color:rgb(255,255,255);cursor:pointer;padding:0.5em 0;">\n                      <div class="depend-on-device-left-to-none-float" style="font-size:1.5em;text-decoration:underline;">\n                        {{t_task_type.task_type_name}}\n                      </div>\n                      <div class="depend-on-device-right-to-none-float" style="font-size:1.2em;margin-top:0.2em;"><span style="font-size:1.2em;font-weight:bold;">\n                        +[{{getMinScoreForTaskInUserTaskInfo(i)}} - {{getMaxScoreForTaskInUserTaskInfo(i)}}]</span> Exp. pro Aufgabe ({{t_task_type["tasks"].length}} Aufgaben)\n                      </div>\n                      <div style="clear:both;"></div>\n                  </div>\n\n                  <!-- Tasks -->\n                  <div *ngIf="t_task_type[\'tasks\'].length==0 && open_tasks_type_key==i" class=\'cf-ac-tasks-no-tasks\' style=\'width:100%;text-align:center;font-size:1.3em;font-weight:bold;color:black;margin-top:5px;margin-bottom:10px;\'>Keine Aufgaben vorhanden</div>\n\n                  <div *ngIf="t_task_type[\'tasks\'].length!=0 && open_tasks_type_key==i" class=\'cf-ac-tasks-tasks depend-on-device-table-to-none\' style=\'width:100%;border-spacing:10px 15px;margin-top:5px;\'>\n                    <div *ngFor="let t_task of t_task_type[\'tasks\']"  class=\'cf-ac-tasks-task depend-on-device-tablerow-to-none\' style=\'width:100%;padding:0.8em 0;\'>\n\n                          <div class=\'col-xs-9\' style=\'text-align:left;vertical-align:middle;line-height:1.1em !important;\'>\n                              <span class="link" (click)="navigateToTask(t_task.task_id)" style="font-size:1.3em;font-weight:bold;">{{t_task.taskname}}</span>\n                          </div>\n\n                          <div class=\'col-xs-1\' style=\'text-align:center;vertical-align:middle;\'>\n                              <button *ngIf="isTaskSolved(t_task.value,t_task.needed_value)" class=\'fa fa-check-square\' style=\'padding:0;font-size:2em;color:rgb(0,150,0);border:0;margin:0;background:transparent;\'></button>\n                              <button *ngIf="!isTaskSolved(t_task.value,t_task.needed_value)" class=\'fa fa-minus-square\' style=\'padding:0;font-size:2em;color:rgb(150,0,0);border:0;margin:0;background:transparent;\'></button>\n                          </div>\n\n                          <div class=\'col-xs-1\' style=\'text-align:center;vertical-align:middle;\'>\n                              <span style="color:rgb(0,0,0);"><span style="font-size:1.3em;font-weight:bold;">{{t_task.value}}</span>/{{t_task.needed_value}}</span>\n                          </div>\n\n                          <div style="clear:both;"></div>\n                      </div>\n                    </div>\n\n              </div>\n\n          </div>\n\n      </div>\n\n\n  </div>\n\n  '
}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.UserprogressComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(29),r=n(61),d=function(){function e(e,t){this.router=e,this.lService=t,this.specificcontent={},this.loading_specificcontent=!0,this.error_setting_new_password=!1,this.show_update_password_button=!0}return e.prototype.ngOnInit=function(){var e=this;this.loading_specificcontent=!0,this.lService.specificcontent$.subscribe(function(t){e.specificcontent=t,e.loading_specificcontent=!1}),this.lService.loadSpecificContent("usersettings"),$(document).ready(function(){$("#settings_new_password").keyup(function(){var e=/[A-Za-z0-9!?.:;-]{6,}/g;null!=$(this).val().match(e)?$(this).css("background","rgb(120,255,120)"):$(this).css("background","rgb(255,120,120)")}),$("#settings_new_password_repeat").keyup(function(){$(this).val()==$("#settings_new_password").val()?$(this).css("background","rgb(120,255,120)"):$(this).css("background","rgb(255,120,120)")})})},e.prototype.setNewPassword=function(){var e=this,t=/[A-Za-z0-9!?.:;-]{6,}/g;return null==$("#settings_new_password").val().match(t)?void window.alert("Das Passwort entspricht nicht unseren Passwort Richtlinien!"):$("#settings_new_password").val()!=$("#settings_new_password_repeat").val()?void window.alert("Das Passwort und dessen wiederholte Eingabe m√ºssen √ºbereinstimmen!"):(this.show_update_password_button=!1,void this.lService.updatePassword($("#settings_old_password").val(),$("#settings_new_password").val()).subscribe(function(t){e.show_update_password_button=!0,"undefined"==typeof t.data||1!=t.data?(e.error_setting_new_password=!0,window.alert("Beim Setzen des neuen Passworts ist ein Fehler aufgetreten.")):($("#settings_old_password").val(""),$("#settings_new_password").val(""),$("#settings_new_password_repeat").val(""),window.alert("Ihr Passwort wurde neu gesetzt!"))},function(t){e.show_update_password_button=!0,e.error_setting_new_password=!0,window.alert("Beim Setzen des neuen Passworts ist ein Fehler aufgetreten."),console.error("Could not set new password.")}))},i([a.Input(),s("design:type",Object)],e.prototype,"user",void 0),i([a.Input(),s("design:type",Object)],e.prototype,"universalcontent",void 0),e=i([a.Component({selector:"usersettings-component",providers:[r.LibgameService],template:'\n\n  <div class="row">\n\n      <div class="col-xs-12" style="padding:0;">\n\n          <div id="cf-se-overview" class="content-frame">\n\n              <p class="headline">Neues Passwort</p>\n\n              <div style="width:70%;margin-left:auto;margin-right:auto;">\n                  <input type="password" placeholder="Altes Passwort" id="settings_old_password" style="width:100%;margin-top:0.3em;margin-bottom:0.3em;">\n                  <br>\n                  <input type="password" placeholder="Neues Passwort (Min. 6 Zeichen)" id="settings_new_password" style="width:100%;margin-top:0.3em;margin-bottom:0.3em;">\n                  <br>\n                  <input type="password" placeholder="Wiederhole das neue Passwort" id="settings_new_password_repeat" style="width:100%;margin-top:0.3em;margin-bottom:0.3em;">\n                  <br>\n                  <button (click)="setNewPassword()" *ngIf="show_update_password_button" class="button" style="margin-top:0.5em;margin-bottom:0.3em;width:100%;">Neues Passwort jetzt setzen</button>\n                  <button *ngIf="!show_update_password_button" class="button" style="margin-top:0.5em;margin-bottom:0.3em;width:100%;"><i class="fa fa-spinner fa-pulse"></i></button>\n\n              </div>\n\n\n\n          </div>\n\n\n      </div>\n\n\n\n  </div>\n\n  '}),s("design:paramtypes",[o.Router,r.LibgameService])],e)}();t.UsersettingsComponent=d},function(e,t,n){"use strict";var i=this&&this.__decorate||function(e,t,n,i){var s,a=arguments.length,o=a<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(e,t,n,i);else for(var r=e.length-1;r>=0;r--)(s=e[r])&&(o=(a<3?s(o):a>3?s(t,n,o):s(t,n))||o);return a>3&&o&&Object.defineProperty(t,n,o),o},s=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)},a=n(3),o=n(21),r=function(){function e(e){this.sanitized=e}return e.prototype.transform=function(e){return console.log(this.sanitized.bypassSecurityTrustHtml(e)),this.sanitized.bypassSecurityTrustHtml(e)},e=i([a.Pipe({name:"safeHtml"}),s("design:paramtypes",[o.DomSanitizer])],e)}();t.SafeHtmlPipe=r}]);
//# sourceMappingURL=app.b90f4c24d266e725abef.js.map